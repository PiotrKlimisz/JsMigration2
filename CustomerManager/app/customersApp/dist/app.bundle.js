!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=20)}([function(e,t,r){"use strict";var n;(n=function(e,t,r){var n=this,o="/";n.email=null,n.password=null,n.errorMessage=null,n.login=function(){r.login(n.email,n.password).then(function(r){r?(r&&t&&t.redirect&&(o+=t.redirect),e.path(o)):n.errorMessage="Unable to login"})}}).$inject=["$location","$routeParams","authService"],angular.module("customersApp").controller("LoginController",n)},function(e,t,r){"use strict";var n;(n=function(e,t,r,n){var o=this;function u(){var e="/login"+t.$$path;t.replace(),t.path(e)}function s(){o.loginLogoutText=n.user.isAuthenticated?"Logout":"Login"}o.isCollapsed=!1,o.appTitle=r.useBreeze?"Customer Management Breeze":"Customer Management",o.highlight=function(e){return t.path().substr(0,e.length)===e},o.loginOrOut=function(){s(),n.user.isAuthenticated&&n.logout().then(function(){t.path("/")}),u()},e.$on("loginStatusChanged",function(e){s()}),e.$on("redirectToLogin",function(){u()}),s()}).$inject=["$scope","$location","config","authService"],angular.module("customersApp").controller("NavbarController",n)},function(e,t,r){"use strict";var n;(n=function(){}).$inject=[],angular.module("customersApp").controller("AboutController",n)},function(e,t,r){"use strict";var n;(n=function(e,t,r){var n=this;function o(t){n.filteredCustomers=e("nameProductFilter")(n.customers,t),n.filteredCount=n.filteredCustomers.length}function u(){r.getCustomers(n.currentPage-1,n.pageSize).then(function(e){n.totalRecords=e.totalRecords,n.customers=e.results,o("")},function(e){t.alert(e.message)})}n.customers=[],n.filteredCustomers,n.filteredCount,n.totalRecords=0,n.pageSize=10,n.currentPage=1,u(),n.pageChanged=function(e){n.currentPage=e,u()},n.searchTextChanged=function(){o(n.searchText)}}).$inject=["$filter","$window","dataService"],angular.module("customersApp").controller("OrdersController",n)},function(e,t,r){"use strict";var n;(n=function(e){var t=this;function r(e){for(var r=0,n=0;n<e.orders.length;n++){r+=e.orders[n].orderTotal}t.ordersTotal=r}t.orderby="product",t.reverse=!1,t.ordersTotal=0,t.customer,e.customer?(t.customer=e.customer,r(e.customer)):e.$on("customer",function(e,n){t.customer=n,r(n)}),t.setOrder=function(e){e===t.orderby&&(t.reverse=!t.reverse),t.orderby=e}}).$inject=["$scope"],angular.module("customersApp").controller("OrderChildController",n)},function(e,t,r){"use strict";var n;(n=function(e,t,r,n,o,u,s){var a=this;function i(){u.getCustomersSummary(a.currentPage-1,a.pageSize).then(function(e){a.totalRecords=e.totalRecords,a.customers=e.results,c(""),n(function(){a.cardAnimationClass=""},1e3)},function(e){r.alert("Sorry, an error occurred: "+e.data.message)})}function c(e){a.filteredCustomers=t("nameCityStateFilter")(a.customers,e),a.filteredCount=a.filteredCustomers.length}a.customers=[],a.filteredCustomers=[],a.filteredCount=0,a.orderby="lastName",a.reverse=!1,a.searchText=null,a.cardAnimationClass=".card-animation",a.totalRecords=0,a.pageSize=10,a.currentPage=1,a.pageChanged=function(e){a.currentPage=e,i()},a.deleteCustomer=function(t){if(o.user.isAuthenticated){var n=function(e){for(var t=0;t<a.customers.length;t++){var r=a.customers[t];if(r.id===e)return r}return null}(t),i={closeButtonText:"Cancel",actionButtonText:"Delete Customer",headerText:"Delete "+(n.firstName+" "+n.lastName)+"?",bodyText:"Are you sure you want to delete this customer?"};s.showModal({},i).then(function(e){"ok"===e&&u.deleteCustomer(t).then(function(){for(var e=0;e<a.customers.length;e++)if(a.customers[e].id===t){a.customers.splice(e,1);break}c(a.searchText)},function(e){r.alert("Error deleting customer: "+e.message)})})}else e.path(o.loginPath+e.$$path)},a.DisplayModeEnum={Card:0,List:1},a.changeDisplayMode=function(e){switch(e){case a.DisplayModeEnum.Card:a.listDisplayModeEnabled=!1;break;case a.DisplayModeEnum.List:a.listDisplayModeEnabled=!0}},a.navigate=function(t){e.path(t)},a.setOrder=function(e){e===a.orderby&&(a.reverse=!a.reverse),a.orderby=e},a.searchTextChanged=function(){c(a.searchText)},i()}).$inject=["$location","$filter","$window","$timeout","authService","dataService","modalService"],angular.module("customersApp").controller("CustomersController",n)},function(e,t,r){"use strict";var n;(n=function(e,t,r,n){var o=this,u=t.customerId?parseInt(t.customerId):0;o.customer={},o.ordersTotal=0,u>0&&n.getCustomer(u).then(function(t){o.customer=t,e.$broadcast("customer",t)},function(e){r.alert("Sorry, an error occurred: "+e.message)})}).$inject=["$scope","$routeParams","$window","dataService"],angular.module("customersApp").controller("CustomerOrdersController",n)},function(e,t,r){"use strict";var n;(n=function(e,t,r,n,o,u,s){var a,i,c=this,l=r.customerId?parseInt(r.customerId):0;function d(e,r,n){if(c.editForm&&c.editForm.$dirty){s.showModal({},{closeButtonText:"Cancel",actionButtonText:"Ignore Changes",headerText:"Unsaved Changes",bodyText:"You have unsaved changes. Leave the page?"}).then(function(e){"ok"===e&&(i(),t.path(t.url(r).hash()))}),e.preventDefault()}}function m(){e.editForm.$dirty=!1,c.updateStatus=!0,c.title="Edit",c.buttonText="Update",p()}function f(e){c.errorMessage=e.message,p()}function p(){a=n(function(){n.cancel(a),c.errorMessage="",c.updateStatus=!1},3e3)}c.customer={},c.states=[],c.title=l>0?"Edit":"Add",c.buttonText=l>0?"Update":"Add",c.updateStatus=!1,c.errorMessage="",c.isStateSelected=function(e,t){return e===t},c.saveCustomer=function(){e.editForm.$valid&&(c.customer.id?u.updateCustomer(c.customer).then(m,f):u.insertCustomer(c.customer).then(m,f))},c.deleteCustomer=function(){var e={closeButtonText:"Cancel",actionButtonText:"Delete Customer",headerText:"Delete "+(c.customer.firstName+" "+c.customer.lastName)+"?",bodyText:"Are you sure you want to delete this customer?"};s.showModal({},e).then(function(e){"ok"===e&&u.deleteCustomer(c.customer.id).then(function(){i(),t.path("/customers")},f)})},u.getStates().then(function(e){c.states=e},f).then(function(){l>0?u.getCustomer(l).then(function(e){c.customer=e},f):u.newCustomer().then(function(e){c.customer=e})}),i=e.$on("$locationChangeStart",d)}).$inject=["$scope","$location","$routeParams","$timeout","config","dataService","modalService"],angular.module("customersApp").controller("CustomerEditController",n)},function(e,t,r){"use strict";var n;(n=function(e){var t={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"/app/customersApp/partials/modal.html"},r={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"Perform this action?"};this.showModal=function(e,t){return e||(e={}),e.backdrop="static",this.show(e,t)},this.show=function(n,o){var u={},s={};return angular.extend(u,t,n),angular.extend(s,r,o),u.controller||(u.controller=function(e,t){e.modalOptions=s,e.modalOptions.ok=function(e){t.close("ok")},e.modalOptions.close=function(e){t.close("cancel")}},u.controller.$inject=["$scope","$modalInstance"]),e.open(u).result}}).$inject=["$modal"],angular.module("customersApp").service("modalService",n)},function(e,t,r){"use strict";var n;(n=function(e,t,r){return e.useBreeze?r:t}).$inject=["config","customersService","customersBreezeService"],angular.module("customersApp").factory("dataService",n)},function(e,t,r){"use strict";var n;(n=function(e,t){var r="/api/dataservice/",n={};function o(e){for(var t=e.length,r=0;r<t;r++){var n=e[r];if(n.orders){for(var o=n.orders.length,u=0;u<o;u++){var a=n.orders[u];a.orderTotal=a.quantity*a.price}n.ordersTotal=s(n)}}}function u(t,n,u){var s=t;return s+=3==arguments.length?function(e,t){return"?$top="+t+"&$skip="+e*t}(n,u):"",e.get(r+s).then(function(e){var t=e.data;return o(t),{totalRecords:parseInt(e.headers("X-InlineCount")),results:t}})}function s(e){for(var t=0,r=e.orders,n=r.length,o=0;o<n;o++)t+=r[o].orderTotal;return t}return n.getCustomers=function(e,t){return u("customers",e,t)},n.getCustomersSummary=function(e,t){return u("customersSummary",e,t)},n.getStates=function(){return e.get(r+"states").then(function(e){return e.data})},n.checkUniqueValue=function(t,n,o){return t||(t=0),e.get(r+"checkUnique/"+t+"?property="+n+"&value="+escape(o)).then(function(e){return e.data.status})},n.insertCustomer=function(t){return e.post(r+"postCustomer",t).then(function(e){return t.id=e.data.id,e.data})},n.newCustomer=function(){return t.when({id:0})},n.updateCustomer=function(t){return e.put(r+"putCustomer/"+t.id,t).then(function(e){return e.data})},n.deleteCustomer=function(t){return e.delete(r+"deleteCustomer/"+t).then(function(e){return e.data})},n.getCustomer=function(t){return e.get(r+"customerById/"+t).then(function(e){return o([e.data]),e.data})},n}).$inject=["$http","$q"],angular.module("customersApp").factory("customersService",n)},function(e,t,r){"use strict";var n;(n=function(e,t,r){var n={},o=e.EntityQuery;e.config.initializeAdapterInstance("modelLibrary","backingStore",!0),e.NamingConvention.camelCase.setAsDefault();var u="breeze/breezedataservice",s=new e.EntityManager(u);function a(e,t){return e.using(s).execute().then(function(e,r,n){return t?e.results[0]:e.results},function(e){r.alert(e.message)})}function i(e,t,n,u){var a=o.from(e).skip(n*u).take(u).inlineCount(!0);return t&&""!=t&&(a=a.expand(t)),a.using(s).execute().then(function(e){return{totalRecords:parseInt(e.inlineCount),results:e.results}},function(e){r.alert("Error "+e.message)})}n.getCustomers=function(e,t){return i("Customers","orders",e,t)},n.getCustomersSummary=function(e,t){return i("CustomersSummary","",e,t)},n.getStates=function(){return function(e,t){var r=o.from(e);t&&(r=r.expand(t));return a(r)}("States")},n.getCustomer=function(e){return a(o.from("Customers").where("id","==",e).expand("orders, state"),!0)},n.checkUniqueValue=function(t,r,n){var u=new e.Predicate(r,"==",n),a=t?u.and(new e.Predicate("id","!=",t)):u;return o.from("Customers").where(a).take(0).inlineCount().using(s).execute().then(function(e){return!(!e||0!=e.inlineCount)})},n.insertCustomer=function(e){return s.saveChanges()},n.newCustomer=function(){return(e=s.metadataStore,e.hasMetadataFor(u)?t.when(!0):e.fetchMetadata(u)).then(function(){return s.createEntity("Customer",{firstName:"",lastName:""})});var e},n.deleteCustomer=function(t){if(!t)return r.alert("ID was null - cannot delete"),null;var n=s.getEntityByKey("Customer",t);n?(n.orders.slice().forEach(function(e){s.detachEntity(e)}),n.entityAspect.setDeleted()):n=s.createEntity("Customer",{id:t,gender:"Male"},e.EntityState.Deleted);return s.saveChanges()},n.updateCustomer=function(e){return s.saveChanges()};return s.metadataStore.registerEntityTypeCtor("Order",function(){},function(e){e.orderTotal=e.quantity*e.price}),s.metadataStore.registerEntityTypeCtor("Customer",function(){},function(e){e.ordersTotal=function(e){for(var t=0,r=e.orders,n=r.length,o=0;o<n;o++)t+=r[o].orderTotal;return t}(e)}),n}).$inject=["breeze","$q","$window"],angular.module("customersApp").factory("customersBreezeService",n)},function(e,t,r){"use strict";angular.module("customersApp").config(["$httpProvider",function(e){var t=function(e,t){var r=function(e){return e},n=function(r){return 401===r.status?(t.$broadcast("redirectToLogin",null),e.reject(r)):e.reject(r)};return function(e){return e.then(r,n)}};t.$inject=["$q","$rootScope"],e.interceptors.push(t)}])},function(e,t,r){"use strict";var n;(n=function(e,t){var r={loginPath:"/login",user:{isAuthenticated:!1,roles:null}};function n(e){r.user.isAuthenticated=e,t.$broadcast("loginStatusChanged",e)}return r.login=function(t,r){return e.post("/api/dataservice/login",{userLogin:{userName:t,password:r}}).then(function(e){var t=e.data.status;return n(t),t})},r.logout=function(){return e.post("/api/dataservice/logout").then(function(e){var t=!e.data.status;return n(t),t})},r.redirectToLogin=function(){t.$broadcast("redirectToLogin",null)},r}).$inject=["$http","$rootScope"],angular.module("customersApp").factory("authService",n)},function(e,t,r){"use strict";angular.module("customersApp").value("config",{useBreeze:!1})},function(e,t,r){"use strict";angular.module("customersApp").filter("nameProductFilter",function(){function e(e,t){if(e.orders)for(var r=0;r<e.orders.length;r++)if(e.orders[r].product.toLowerCase().indexOf(t)>-1)return!0;return!1}return function(t,r){if(!r||!t)return t;var n=[];r=r.toLowerCase();for(var o=0;o<t.length;o++){var u=t[o];(u.firstName.toLowerCase().indexOf(r)>-1||u.lastName.toLowerCase().indexOf(r)>-1||e(u,r))&&n.push(u)}return n}})},function(e,t,r){"use strict";angular.module("customersApp").filter("nameCityStateFilter",function(){return function(e,t){if(!t)return e;var r=[];t=t.toLowerCase();for(var n=0;n<e.length;n++){var o=e[n];(o.firstName.toLowerCase().indexOf(t)>-1||o.lastName.toLowerCase().indexOf(t)>-1||o.city.toLowerCase().indexOf(t)>-1||o.state.name.toLowerCase().indexOf(t)>-1)&&r.push(o)}return r}})},function(e,t,r){"use strict";var n;(n=function(e,t){return{restrict:"A",require:"ngModel",link:function(r,n,o,u){u.$asyncValidators.unique=function(r,n){var u=e.defer(),s=r||n,a=o.wcUniqueKey,i=o.wcUniqueProperty;return a&&i?(t.checkUniqueValue(a,i,s).then(function(e){e?u.resolve():u.reject()}),u.promise):e.when(!0)}}}}).$inject=["$q","dataService"],angular.module("customersApp").directive("wcUnique",n)},function(e,t,r){"use strict";angular.module("customersApp").animation(".card-animation",function(){return{enter:function(e,t){var r=100*Math.random();TweenMax.set(e,{opacity:0,left:r+"px"});var n=Math.random();TweenMax.to(e,.5,{opacity:1,left:"0px",ease:Back.easeInOut,delay:n,onComplete:t})},leave:function(e,t){TweenMax.to(e,.5,{opacity:0,left:"-50px",onComplete:t})}}})},function(e,t,r){"use strict";var n;(n=angular.module("customersApp",["ngRoute","ngAnimate","wc.directives","ui.bootstrap","breeze.angular"])).config(["$routeProvider",function(e){var t="/app/customersApp/views/";e.when("/customers",{controller:"CustomersController",templateUrl:t+"customers/customers.html",controllerAs:"vm"}).when("/customerorders/:customerId",{controller:"CustomerOrdersController",templateUrl:t+"customers/customerOrders.html",controllerAs:"vm"}).when("/customeredit/:customerId",{controller:"CustomerEditController",templateUrl:t+"customers/customerEdit.html",controllerAs:"vm",secure:!0}).when("/orders",{controller:"OrdersController",templateUrl:t+"orders/orders.html",controllerAs:"vm"}).when("/about",{controller:"AboutController",templateUrl:t+"about.html",controllerAs:"vm"}).when("/login/:redirect*?",{controller:"LoginController",templateUrl:t+"login.html",controllerAs:"vm"}).otherwise({redirectTo:"/customers"})}]),n.run(["$rootScope","$location","authService",function(e,t,r){e.$on("$routeChangeStart",function(t,n,o){n&&n.$$route&&n.$$route.secure&&(r.user.isAuthenticated||e.$evalAsync(function(){r.redirectToLogin()}))})}])},function(e,t,r){"use strict";r(19),r(18),r(17),r(16),r(15),r(14),r(13),r(12),r(11),r(10),r(9),r(8),r(7),r(6),r(5),r(4),r(3),r(2),r(1),r(0)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9sb2dpbkNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9uYXZiYXJDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvY29udHJvbGxlcnMvYWJvdXRDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvY29udHJvbGxlcnMvb3JkZXJzL29yZGVyc0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9vcmRlcnMvb3JkZXJDaGlsZENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9jdXN0b21lcnMvY3VzdG9tZXJzQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvY3VzdG9tZXJzQXBwL2NvbnRyb2xsZXJzL2N1c3RvbWVycy9jdXN0b21lck9yZGVyc0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9jdXN0b21lcnMvY3VzdG9tZXJFZGl0Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvY3VzdG9tZXJzQXBwL3NlcnZpY2VzL21vZGFsU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvY3VzdG9tZXJzQXBwL3NlcnZpY2VzL2RhdGFTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvc2VydmljZXMvY3VzdG9tZXJzU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvY3VzdG9tZXJzQXBwL3NlcnZpY2VzL2N1c3RvbWVyc0JyZWV6ZVNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9zZXJ2aWNlcy9odHRwSW50ZXJjZXB0b3JzLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvc2VydmljZXMvYXV0aFNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9zZXJ2aWNlcy9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9maWx0ZXJzL25hbWVQcm9kdWN0RmlsdGVyLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvZmlsdGVycy9uYW1lQ2l0eVN0YXRlRmlsdGVyLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvZGlyZWN0aXZlcy93Y1VuaXF1ZS5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvY3VzdG9tZXJzQXBwL2FuaW1hdGlvbnMvbGlzdEFuaW1hdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vU2NyaXB0cy9tYWluLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJMb2dpbkNvbnRyb2xsZXIiLCIkbG9jYXRpb24iLCIkcm91dGVQYXJhbXMiLCJhdXRoU2VydmljZSIsInZtIiwidGhpcyIsInBhdGgiLCJlbWFpbCIsInBhc3N3b3JkIiwiZXJyb3JNZXNzYWdlIiwibG9naW4iLCJ0aGVuIiwic3RhdHVzIiwicmVkaXJlY3QiLCIkaW5qZWN0IiwiYW5ndWxhciIsImNvbnRyb2xsZXIiLCJOYXZiYXJDb250cm9sbGVyIiwiJHNjb3BlIiwiY29uZmlnIiwicmVkaXJlY3RUb0xvZ2luIiwiJCRwYXRoIiwicmVwbGFjZSIsInNldExvZ2luTG9nb3V0VGV4dCIsImxvZ2luTG9nb3V0VGV4dCIsInVzZXIiLCJpc0F1dGhlbnRpY2F0ZWQiLCJpc0NvbGxhcHNlZCIsImFwcFRpdGxlIiwidXNlQnJlZXplIiwiaGlnaGxpZ2h0Iiwic3Vic3RyIiwibGVuZ3RoIiwibG9naW5Pck91dCIsImxvZ291dCIsIiRvbiIsImxvZ2dlZEluIiwiQWJvdXRDb250cm9sbGVyIiwiT3JkZXJzQ29udHJvbGxlciIsIiRmaWx0ZXIiLCIkd2luZG93IiwiZGF0YVNlcnZpY2UiLCJmaWx0ZXJDdXN0b21lcnNQcm9kdWN0cyIsImZpbHRlclRleHQiLCJmaWx0ZXJlZEN1c3RvbWVycyIsImN1c3RvbWVycyIsImZpbHRlcmVkQ291bnQiLCJnZXRDdXN0b21lcnMiLCJjdXJyZW50UGFnZSIsInBhZ2VTaXplIiwiZGF0YSIsInRvdGFsUmVjb3JkcyIsInJlc3VsdHMiLCJlcnJvciIsImFsZXJ0IiwibWVzc2FnZSIsInBhZ2VDaGFuZ2VkIiwicGFnZSIsInNlYXJjaFRleHRDaGFuZ2VkIiwic2VhcmNoVGV4dCIsIk9yZGVyQ2hpbGRDb250cm9sbGVyIiwidXBkYXRlVG90YWwiLCJjdXN0b21lciIsInRvdGFsIiwib3JkZXJzIiwib3JkZXJUb3RhbCIsIm9yZGVyc1RvdGFsIiwib3JkZXJieSIsInJldmVyc2UiLCJldmVudCIsInNldE9yZGVyIiwiQ3VzdG9tZXJzQ29udHJvbGxlciIsIiR0aW1lb3V0IiwibW9kYWxTZXJ2aWNlIiwiZ2V0Q3VzdG9tZXJzU3VtbWFyeSIsImZpbHRlckN1c3RvbWVycyIsImNhcmRBbmltYXRpb25DbGFzcyIsImRlbGV0ZUN1c3RvbWVyIiwiaWQiLCJjdXN0IiwiZ2V0Q3VzdG9tZXJCeUlkIiwibW9kYWxPcHRpb25zIiwiY2xvc2VCdXR0b25UZXh0IiwiYWN0aW9uQnV0dG9uVGV4dCIsImhlYWRlclRleHQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImJvZHlUZXh0Iiwic2hvd01vZGFsIiwicmVzdWx0Iiwic3BsaWNlIiwibG9naW5QYXRoIiwiRGlzcGxheU1vZGVFbnVtIiwiQ2FyZCIsIkxpc3QiLCJjaGFuZ2VEaXNwbGF5TW9kZSIsImRpc3BsYXlNb2RlIiwibGlzdERpc3BsYXlNb2RlRW5hYmxlZCIsIm5hdmlnYXRlIiwidXJsIiwiQ3VzdG9tZXJPcmRlcnNDb250cm9sbGVyIiwiY3VzdG9tZXJJZCIsInBhcnNlSW50IiwiZ2V0Q3VzdG9tZXIiLCIkYnJvYWRjYXN0IiwiQ3VzdG9tZXJFZGl0Q29udHJvbGxlciIsInRpbWVyIiwib25Sb3V0ZUNoYW5nZU9mZiIsInJvdXRlQ2hhbmdlIiwibmV3VXJsIiwib2xkVXJsIiwiZWRpdEZvcm0iLCIkZGlydHkiLCJoYXNoIiwicHJldmVudERlZmF1bHQiLCJwcm9jZXNzU3VjY2VzcyIsInVwZGF0ZVN0YXR1cyIsInRpdGxlIiwiYnV0dG9uVGV4dCIsInN0YXJ0VGltZXIiLCJwcm9jZXNzRXJyb3IiLCJjYW5jZWwiLCJzdGF0ZXMiLCJpc1N0YXRlU2VsZWN0ZWQiLCJjdXN0b21lclN0YXRlSWQiLCJzdGF0ZUlkIiwic2F2ZUN1c3RvbWVyIiwiJHZhbGlkIiwidXBkYXRlQ3VzdG9tZXIiLCJpbnNlcnRDdXN0b21lciIsImdldFN0YXRlcyIsIm5ld0N1c3RvbWVyIiwiJG1vZGFsIiwibW9kYWxEZWZhdWx0cyIsImJhY2tkcm9wIiwia2V5Ym9hcmQiLCJtb2RhbEZhZGUiLCJ0ZW1wbGF0ZVVybCIsImN1c3RvbU1vZGFsRGVmYXVsdHMiLCJjdXN0b21Nb2RhbE9wdGlvbnMiLCJzaG93IiwidGVtcE1vZGFsRGVmYXVsdHMiLCJ0ZW1wTW9kYWxPcHRpb25zIiwiZXh0ZW5kIiwiJG1vZGFsSW5zdGFuY2UiLCJvayIsImNsb3NlIiwib3BlbiIsInNlcnZpY2UiLCJjdXN0b21lcnNTZXJ2aWNlIiwiY3VzdG9tZXJzQnJlZXplU2VydmljZSIsImZhY3RvcnkiLCJjdXN0b21lcnNGYWN0b3J5IiwiJGh0dHAiLCIkcSIsInNlcnZpY2VCYXNlIiwiZXh0ZW5kQ3VzdG9tZXJzIiwiY3VzdHNMZW4iLCJvcmRlcnNMZW4iLCJqIiwib3JkZXIiLCJxdWFudGl0eSIsInByaWNlIiwiZ2V0UGFnZWRSZXNvdXJjZSIsImJhc2VSZXNvdXJjZSIsInBhZ2VJbmRleCIsInJlc291cmNlIiwiYXJndW1lbnRzIiwiYnVpbGRQYWdpbmdVcmkiLCJyZXNwb25zZSIsImN1c3RzIiwiaGVhZGVycyIsImNvdW50IiwiY2hlY2tVbmlxdWVWYWx1ZSIsImVzY2FwZSIsInBvc3QiLCJ3aGVuIiwicHV0IiwiZGVsZXRlIiwiYnJlZXplIiwiRW50aXR5UXVlcnkiLCJpbml0aWFsaXplQWRhcHRlckluc3RhbmNlIiwiTmFtaW5nQ29udmVudGlvbiIsImNhbWVsQ2FzZSIsInNldEFzRGVmYXVsdCIsInNlcnZpY2VOYW1lIiwiZW50aXR5TWFuYWdlciIsIkVudGl0eU1hbmFnZXIiLCJleGVjdXRlUXVlcnkiLCJxdWVyeSIsInRha2VGaXJzdCIsInVzaW5nIiwiZXhlY3V0ZSIsImVudGl0eU5hbWUiLCJleHBhbmQiLCJmcm9tIiwic2tpcCIsInRha2UiLCJpbmxpbmVDb3VudCIsImdldEFsbCIsIndoZXJlIiwicHJvcGVydHlQcmVkaWNhdGUiLCJQcmVkaWNhdGUiLCJwcmVkaWNhdGUiLCJhbmQiLCJzYXZlQ2hhbmdlcyIsInN0b3JlIiwibWV0YWRhdGFTdG9yZSIsImhhc01ldGFkYXRhRm9yIiwiZmV0Y2hNZXRhZGF0YSIsImNyZWF0ZUVudGl0eSIsImdldEVudGl0eUJ5S2V5Iiwic2xpY2UiLCJmb3JFYWNoIiwiZGV0YWNoRW50aXR5IiwiZW50aXR5QXNwZWN0Iiwic2V0RGVsZXRlZCIsImdlbmRlciIsIkVudGl0eVN0YXRlIiwiRGVsZXRlZCIsInJlZ2lzdGVyRW50aXR5VHlwZUN0b3IiLCIkaHR0cFByb3ZpZGVyIiwiaHR0cEludGVyY2VwdG9yNDAxIiwiJHJvb3RTY29wZSIsInN1Y2Nlc3MiLCJyZXMiLCJyZWplY3QiLCJwcm9taXNlIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsImF1dGhGYWN0b3J5Iiwicm9sZXMiLCJjaGFuZ2VBdXRoIiwidXNlckxvZ2luIiwidXNlck5hbWUiLCJmaWx0ZXIiLCJtYXRjaGVzUHJvZHVjdCIsImZpbHRlclZhbHVlIiwicHJvZHVjdCIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsIm1hdGNoZXMiLCJjaXR5Iiwic3RhdGUiLCJ3Y1VuaXF1ZURpcmVjdGl2ZSIsInJlc3RyaWN0IiwicmVxdWlyZSIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsIm5nTW9kZWwiLCIkYXN5bmNWYWxpZGF0b3JzIiwidW5pcXVlIiwibW9kZWxWYWx1ZSIsInZpZXdWYWx1ZSIsImRlZmVycmVkIiwiZGVmZXIiLCJjdXJyZW50VmFsdWUiLCJrZXkiLCJ3Y1VuaXF1ZUtleSIsIndjVW5pcXVlUHJvcGVydHkiLCJyZXNvbHZlIiwiZGlyZWN0aXZlIiwiYW5pbWF0aW9uIiwiZW50ZXIiLCJkb25lIiwicmFuZG9tIiwiTWF0aCIsIlR3ZWVuTWF4Iiwic2V0Iiwib3BhY2l0eSIsImxlZnQiLCJyYW5kb20yIiwidG8iLCJlYXNlIiwiQmFjayIsImVhc2VJbk91dCIsImRlbGF5Iiwib25Db21wbGV0ZSIsImxlYXZlIiwiYXBwIiwiJHJvdXRlUHJvdmlkZXIiLCJ2aWV3QmFzZSIsImNvbnRyb2xsZXJBcyIsInNlY3VyZSIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJydW4iLCJuZXh0IiwiY3VycmVudCIsIiQkcm91dGUiLCIkZXZhbEFzeW5jIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFB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QVksa0JBQ1p5SCxZQUFha0osRUFBVyxhQUN4QkMsYUFBYyxPQUVmNUcsS0FBSyxzQkFDSmhLLFdBQVksa0JBQ1p5SCxZQUFha0osRUFBVyxhQUN4QkMsYUFBYyxPQUVmRSxXQUFZQyxXQUFZLGtCQUkvQk4sRUFBSU8sS0FDRixhQUNBLFlBQ0EsY0FDQSxTQUFTakUsRUFBWTlOLEVBQVdFLEdBRzlCNE4sRUFBVzVMLElBQUksb0JBQXFCLFNBQVNrQyxFQUFPNE4sRUFBTUMsR0FDcERELEdBQVFBLEVBQUtFLFNBQVdGLEVBQUtFLFFBQVFOLFNBQ2xDMVIsRUFBWXNCLEtBQUtDLGlCQUNwQnFNLEVBQVdxRSxXQUFXLFdBQ3BCalMsRUFBWWlCLHdEQy9EMUJqRCxFQUFBLElBQ0FBLEVBQUEsSUFDQUEsRUFBQSxJQUNBQSxFQUFBLElBQ0FBLEVBQUEsSUFDQUEsRUFBQSxJQUNBQSxFQUFBLElBQ0FBLEVBQUEsSUFDQUEsRUFBQSxJQUNBQSxFQUFBLElBQ0FBLEVBQUEsR0FDQUEsRUFBQSxHQUNBQSxFQUFBLEdBQ0FBLEVBQUEsR0FDQUEsRUFBQSxHQUNBQSxFQUFBLEdBQ0FBLEVBQUEsR0FDQUEsRUFBQSxHQUNBQSxFQUFBLEdBRUFBLEVBQUEiLCJmaWxlIjoiYXBwLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMjApO1xuIiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgaW5qZWN0UGFyYW1zID0gWyckbG9jYXRpb24nLCAnJHJvdXRlUGFyYW1zJywgJ2F1dGhTZXJ2aWNlJ107XHJcblxyXG4gICAgdmFyIExvZ2luQ29udHJvbGxlciA9IGZ1bmN0aW9uICgkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgYXV0aFNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzLFxyXG4gICAgICAgICAgICBwYXRoID0gJy8nO1xyXG5cclxuICAgICAgICB2bS5lbWFpbCA9IG51bGw7XHJcbiAgICAgICAgdm0ucGFzc3dvcmQgPSBudWxsO1xyXG4gICAgICAgIHZtLmVycm9yTWVzc2FnZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHZtLmxvZ2luID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhdXRoU2VydmljZS5sb2dpbih2bS5lbWFpbCwgdm0ucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgLy8kcm91dGVQYXJhbXMucmVkaXJlY3Qgd2lsbCBoYXZlIHRoZSByb3V0ZVxyXG4gICAgICAgICAgICAgICAgLy90aGV5IHdlcmUgdHJ5aW5nIHRvIGdvIHRvIGluaXRpYWxseVxyXG4gICAgICAgICAgICAgICAgaWYgKCFzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5lcnJvck1lc3NhZ2UgPSAnVW5hYmxlIHRvIGxvZ2luJztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyAmJiAkcm91dGVQYXJhbXMgJiYgJHJvdXRlUGFyYW1zLnJlZGlyZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHBhdGggKyAkcm91dGVQYXJhbXMucmVkaXJlY3Q7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgocGF0aCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIExvZ2luQ29udHJvbGxlci4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBMb2dpbkNvbnRyb2xsZXIpO1xyXG5cclxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBpbmplY3RQYXJhbXMgPSBbJyRzY29wZScsICckbG9jYXRpb24nLCAnY29uZmlnJywgJ2F1dGhTZXJ2aWNlJ107XHJcblxyXG4gICAgdmFyIE5hdmJhckNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIGNvbmZpZywgYXV0aFNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzLFxyXG4gICAgICAgICAgICBhcHBUaXRsZSA9ICdDdXN0b21lciBNYW5hZ2VtZW50JztcclxuXHJcbiAgICAgICAgdm0uaXNDb2xsYXBzZWQgPSBmYWxzZTtcclxuICAgICAgICB2bS5hcHBUaXRsZSA9IChjb25maWcudXNlQnJlZXplKSA/IGFwcFRpdGxlICsgJyBCcmVlemUnIDogYXBwVGl0bGU7XHJcblxyXG4gICAgICAgIHZtLmhpZ2hsaWdodCA9IGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkbG9jYXRpb24ucGF0aCgpLnN1YnN0cigwLCBwYXRoLmxlbmd0aCkgPT09IHBhdGg7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdm0ubG9naW5Pck91dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0TG9naW5Mb2dvdXRUZXh0KCk7XHJcbiAgICAgICAgICAgIHZhciBpc0F1dGhlbnRpY2F0ZWQgPSBhdXRoU2VydmljZS51c2VyLmlzQXV0aGVudGljYXRlZDtcclxuICAgICAgICAgICAgaWYgKGlzQXV0aGVudGljYXRlZCkgeyAvL2xvZ291dCBcclxuICAgICAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmxvZ291dCgpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlZGlyZWN0VG9Mb2dpbigpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlZGlyZWN0VG9Mb2dpbigpIHtcclxuICAgICAgICAgICAgdmFyIHBhdGggPSAnL2xvZ2luJyArICRsb2NhdGlvbi4kJHBhdGg7XHJcbiAgICAgICAgICAgICRsb2NhdGlvbi5yZXBsYWNlKCk7XHJcbiAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKHBhdGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLiRvbignbG9naW5TdGF0dXNDaGFuZ2VkJywgZnVuY3Rpb24gKGxvZ2dlZEluKSB7XHJcbiAgICAgICAgICAgIHNldExvZ2luTG9nb3V0VGV4dChsb2dnZWRJbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3JlZGlyZWN0VG9Mb2dpbicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVkaXJlY3RUb0xvZ2luKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldExvZ2luTG9nb3V0VGV4dCgpIHtcclxuICAgICAgICAgICAgdm0ubG9naW5Mb2dvdXRUZXh0ID0gKGF1dGhTZXJ2aWNlLnVzZXIuaXNBdXRoZW50aWNhdGVkKSA/ICdMb2dvdXQnIDogJ0xvZ2luJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldExvZ2luTG9nb3V0VGV4dCgpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgTmF2YmFyQ29udHJvbGxlci4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5jb250cm9sbGVyKCdOYXZiYXJDb250cm9sbGVyJywgTmF2YmFyQ29udHJvbGxlcik7XHJcblxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBpbmplY3RQYXJhbXMgPSBbXTtcclxuXHJcbiAgICB2YXIgQWJvdXRDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgQWJvdXRDb250cm9sbGVyLiRpbmplY3QgPSBpbmplY3RQYXJhbXM7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbWVyc0FwcCcpLmNvbnRyb2xsZXIoJ0Fib3V0Q29udHJvbGxlcicsIEFib3V0Q29udHJvbGxlcik7XHJcblxyXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIGluamVjdFBhcmFtcyA9IFsnJGZpbHRlcicsICckd2luZG93JywgJ2RhdGFTZXJ2aWNlJ107XHJcblxyXG4gICAgdmFyIE9yZGVyc0NvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJGZpbHRlciwgJHdpbmRvdywgZGF0YVNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2bS5jdXN0b21lcnMgPSBbXTtcclxuICAgICAgICB2bS5maWx0ZXJlZEN1c3RvbWVycztcclxuICAgICAgICB2bS5maWx0ZXJlZENvdW50O1xyXG5cclxuICAgICAgICAvL3BhZ2luZ1xyXG4gICAgICAgIHZtLnRvdGFsUmVjb3JkcyA9IDA7XHJcbiAgICAgICAgdm0ucGFnZVNpemUgPSAxMDtcclxuICAgICAgICB2bS5jdXJyZW50UGFnZSA9IDE7XHJcblxyXG4gICAgICAgIGluaXQoKTtcclxuXHJcbiAgICAgICAgdm0ucGFnZUNoYW5nZWQgPSBmdW5jdGlvbiAocGFnZSkge1xyXG4gICAgICAgICAgICB2bS5jdXJyZW50UGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgICAgIGdldEN1c3RvbWVycygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLnNlYXJjaFRleHRDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmaWx0ZXJDdXN0b21lcnNQcm9kdWN0cyh2bS5zZWFyY2hUZXh0KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgICAgICAvL2NyZWF0ZVdhdGNoZXMoKTtcclxuICAgICAgICAgICAgZ2V0Q3VzdG9tZXJzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2Z1bmN0aW9uIGNyZWF0ZVdhdGNoZXMoKSB7XHJcbiAgICAgICAgLy8gICAgLy9XYXRjaCBzZWFyY2hUZXh0IHZhbHVlIGFuZCBwYXNzIGl0IGFuZCB0aGUgY3VzdG9tZXJzIHRvIG5hbWVDaXR5U3RhdGVGaWx0ZXJcclxuICAgICAgICAvLyAgICAvL0RvaW5nIHRoaXMgaW5zdGVhZCBvZiBhZGRpbmcgdGhlIGZpbHRlciB0byBuZy1yZXBlYXQgYWxsb3dzIGl0IHRvIG9ubHkgYmUgcnVuIG9uY2UgKHJhdGhlciB0aGFuIHR3aWNlKVxyXG4gICAgICAgIC8vICAgIC8vd2hpbGUgYWxzbyBhY2Nlc3NpbmcgdGhlIGZpbHRlcmVkIGNvdW50IHZpYSB2bS5maWx0ZXJlZENvdW50IGFib3ZlXHJcblxyXG4gICAgICAgIC8vICAgIC8vQmV0dGVyIHRvIGhhbmRsZSB0aGlzIHVzaW5nIG5nLWNoYW5nZSBvbiA8aW5wdXQ+LiBTZWUgc2VhcmNoVGV4dENoYW5nZWQoKSBmdW5jdGlvbi5cclxuICAgICAgICAvLyAgICAkc2NvcGUuJHdhdGNoKFwic2VhcmNoVGV4dFwiLCBmdW5jdGlvbiAoZmlsdGVyVGV4dCkge1xyXG4gICAgICAgIC8vICAgICAgICBmaWx0ZXJDdXN0b21lcnNQcm9kdWN0cyhmaWx0ZXJUZXh0KTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmlsdGVyQ3VzdG9tZXJzUHJvZHVjdHMoZmlsdGVyVGV4dCkge1xyXG4gICAgICAgICAgICB2bS5maWx0ZXJlZEN1c3RvbWVycyA9ICRmaWx0ZXIoXCJuYW1lUHJvZHVjdEZpbHRlclwiKSh2bS5jdXN0b21lcnMsIGZpbHRlclRleHQpO1xyXG4gICAgICAgICAgICB2bS5maWx0ZXJlZENvdW50ID0gdm0uZmlsdGVyZWRDdXN0b21lcnMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJzKCkge1xyXG4gICAgICAgICAgICBkYXRhU2VydmljZS5nZXRDdXN0b21lcnModm0uY3VycmVudFBhZ2UgLSAxLCB2bS5wYWdlU2l6ZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0udG90YWxSZWNvcmRzID0gZGF0YS50b3RhbFJlY29yZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uY3VzdG9tZXJzID0gZGF0YS5yZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlckN1c3RvbWVyc1Byb2R1Y3RzKCcnKTtcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cuYWxlcnQoZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIE9yZGVyc0NvbnRyb2xsZXIuJGluamVjdCA9IGluamVjdFBhcmFtcztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tZXJzQXBwJykuY29udHJvbGxlcignT3JkZXJzQ29udHJvbGxlcicsIE9yZGVyc0NvbnRyb2xsZXIpO1xyXG5cclxufSgpKTtcclxuXHJcblxyXG5cclxuIiwiKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciBpbmplY3RQYXJhbXMgPSBbJyRzY29wZSddO1xyXG5cclxuICAgIHZhciBPcmRlckNoaWxkQ29udHJvbGxlciA9IGZ1bmN0aW9uICgkc2NvcGUpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2bS5vcmRlcmJ5ID0gJ3Byb2R1Y3QnO1xyXG4gICAgICAgIHZtLnJldmVyc2UgPSBmYWxzZTtcclxuICAgICAgICB2bS5vcmRlcnNUb3RhbCA9IDAuMDA7XHJcbiAgICAgICAgdm0uY3VzdG9tZXI7XHJcblxyXG4gICAgICAgIGluaXQoKTtcclxuXHJcbiAgICAgICAgdm0uc2V0T3JkZXIgPSBmdW5jdGlvbiAob3JkZXJieSkge1xyXG4gICAgICAgICAgICBpZiAob3JkZXJieSA9PT0gdm0ub3JkZXJieSkge1xyXG4gICAgICAgICAgICAgICAgdm0ucmV2ZXJzZSA9ICF2bS5yZXZlcnNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZtLm9yZGVyYnkgPSBvcmRlcmJ5O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgICAgIHZtLmN1c3RvbWVyID0gJHNjb3BlLmN1c3RvbWVyO1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlVG90YWwoJHNjb3BlLmN1c3RvbWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS4kb24oJ2N1c3RvbWVyJywgZnVuY3Rpb24gKGV2ZW50LCBjdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmN1c3RvbWVyID0gY3VzdG9tZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVG90YWwoY3VzdG9tZXIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRvdGFsKGN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDAuMDA7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VzdG9tZXIub3JkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3JkZXIgPSBjdXN0b21lci5vcmRlcnNbaV07XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBvcmRlci5vcmRlclRvdGFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZtLm9yZGVyc1RvdGFsID0gdG90YWw7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBPcmRlckNoaWxkQ29udHJvbGxlci4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5jb250cm9sbGVyKCdPcmRlckNoaWxkQ29udHJvbGxlcicsIE9yZGVyQ2hpbGRDb250cm9sbGVyKTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgaW5qZWN0UGFyYW1zID0gWyckbG9jYXRpb24nLCAnJGZpbHRlcicsICckd2luZG93JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyR0aW1lb3V0JywgJ2F1dGhTZXJ2aWNlJywgJ2RhdGFTZXJ2aWNlJywgJ21vZGFsU2VydmljZSddO1xyXG5cclxuICAgIHZhciBDdXN0b21lcnNDb250cm9sbGVyID0gZnVuY3Rpb24gKCRsb2NhdGlvbiwgJGZpbHRlciwgJHdpbmRvdyxcclxuICAgICAgICAkdGltZW91dCwgYXV0aFNlcnZpY2UsIGRhdGFTZXJ2aWNlLCBtb2RhbFNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuXHJcbiAgICAgICAgdm0uY3VzdG9tZXJzID0gW107XHJcbiAgICAgICAgdm0uZmlsdGVyZWRDdXN0b21lcnMgPSBbXTtcclxuICAgICAgICB2bS5maWx0ZXJlZENvdW50ID0gMDtcclxuICAgICAgICB2bS5vcmRlcmJ5ID0gJ2xhc3ROYW1lJztcclxuICAgICAgICB2bS5yZXZlcnNlID0gZmFsc2U7XHJcbiAgICAgICAgdm0uc2VhcmNoVGV4dCA9IG51bGw7XHJcbiAgICAgICAgdm0uY2FyZEFuaW1hdGlvbkNsYXNzID0gJy5jYXJkLWFuaW1hdGlvbic7XHJcblxyXG4gICAgICAgIC8vcGFnaW5nXHJcbiAgICAgICAgdm0udG90YWxSZWNvcmRzID0gMDtcclxuICAgICAgICB2bS5wYWdlU2l6ZSA9IDEwO1xyXG4gICAgICAgIHZtLmN1cnJlbnRQYWdlID0gMTtcclxuXHJcbiAgICAgICAgdm0ucGFnZUNoYW5nZWQgPSBmdW5jdGlvbiAocGFnZSkge1xyXG4gICAgICAgICAgICB2bS5jdXJyZW50UGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgICAgIGdldEN1c3RvbWVyc1N1bW1hcnkoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2bS5kZWxldGVDdXN0b21lciA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICBpZiAoIWF1dGhTZXJ2aWNlLnVzZXIuaXNBdXRoZW50aWNhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChhdXRoU2VydmljZS5sb2dpblBhdGggKyAkbG9jYXRpb24uJCRwYXRoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGN1c3QgPSBnZXRDdXN0b21lckJ5SWQoaWQpO1xyXG4gICAgICAgICAgICB2YXIgY3VzdE5hbWUgPSBjdXN0LmZpcnN0TmFtZSArICcgJyArIGN1c3QubGFzdE5hbWU7XHJcblxyXG4gICAgICAgICAgICB2YXIgbW9kYWxPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgY2xvc2VCdXR0b25UZXh0OiAnQ2FuY2VsJyxcclxuICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvblRleHQ6ICdEZWxldGUgQ3VzdG9tZXInLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyVGV4dDogJ0RlbGV0ZSAnICsgY3VzdE5hbWUgKyAnPycsXHJcbiAgICAgICAgICAgICAgICBib2R5VGV4dDogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBjdXN0b21lcj8nXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBtb2RhbFNlcnZpY2Uuc2hvd01vZGFsKHt9LCBtb2RhbE9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ29rJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTZXJ2aWNlLmRlbGV0ZUN1c3RvbWVyKGlkKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5jdXN0b21lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2bS5jdXN0b21lcnNbaV0uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uY3VzdG9tZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJDdXN0b21lcnModm0uc2VhcmNoVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR3aW5kb3cuYWxlcnQoJ0Vycm9yIGRlbGV0aW5nIGN1c3RvbWVyOiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLkRpc3BsYXlNb2RlRW51bSA9IHtcclxuICAgICAgICAgICAgQ2FyZDogMCxcclxuICAgICAgICAgICAgTGlzdDogMVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLmNoYW5nZURpc3BsYXlNb2RlID0gZnVuY3Rpb24gKGRpc3BsYXlNb2RlKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZGlzcGxheU1vZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2Ugdm0uRGlzcGxheU1vZGVFbnVtLkNhcmQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdm0ubGlzdERpc3BsYXlNb2RlRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSB2bS5EaXNwbGF5TW9kZUVudW0uTGlzdDpcclxuICAgICAgICAgICAgICAgICAgICB2bS5saXN0RGlzcGxheU1vZGVFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLm5hdmlnYXRlID0gZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aCh1cmwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLnNldE9yZGVyID0gZnVuY3Rpb24gKG9yZGVyYnkpIHtcclxuICAgICAgICAgICAgaWYgKG9yZGVyYnkgPT09IHZtLm9yZGVyYnkpIHtcclxuICAgICAgICAgICAgICAgIHZtLnJldmVyc2UgPSAhdm0ucmV2ZXJzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2bS5vcmRlcmJ5ID0gb3JkZXJieTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2bS5zZWFyY2hUZXh0Q2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZmlsdGVyQ3VzdG9tZXJzKHZtLnNlYXJjaFRleHQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgICAgIC8vY3JlYXRlV2F0Y2hlcygpO1xyXG4gICAgICAgICAgICBnZXRDdXN0b21lcnNTdW1tYXJ5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL2Z1bmN0aW9uIGNyZWF0ZVdhdGNoZXMoKSB7XHJcbiAgICAgICAgLy8gICAgLy9XYXRjaCBzZWFyY2hUZXh0IHZhbHVlIGFuZCBwYXNzIGl0IGFuZCB0aGUgY3VzdG9tZXJzIHRvIG5hbWVDaXR5U3RhdGVGaWx0ZXJcclxuICAgICAgICAvLyAgICAvL0RvaW5nIHRoaXMgaW5zdGVhZCBvZiBhZGRpbmcgdGhlIGZpbHRlciB0byBuZy1yZXBlYXQgYWxsb3dzIGl0IHRvIG9ubHkgYmUgcnVuIG9uY2UgKHJhdGhlciB0aGFuIHR3aWNlKVxyXG4gICAgICAgIC8vICAgIC8vd2hpbGUgYWxzbyBhY2Nlc3NpbmcgdGhlIGZpbHRlcmVkIGNvdW50IHZpYSB2bS5maWx0ZXJlZENvdW50IGFib3ZlXHJcblxyXG4gICAgICAgIC8vICAgIC8vQmV0dGVyIHRvIGhhbmRsZSB0aGlzIHVzaW5nIG5nLWNoYW5nZSBvbiA8aW5wdXQ+LiBTZWUgc2VhcmNoVGV4dENoYW5nZWQoKSBmdW5jdGlvbi5cclxuICAgICAgICAvLyAgICB2bS4kd2F0Y2goXCJzZWFyY2hUZXh0XCIsIGZ1bmN0aW9uIChmaWx0ZXJUZXh0KSB7XHJcbiAgICAgICAgLy8gICAgICAgIGZpbHRlckN1c3RvbWVycyhmaWx0ZXJUZXh0KTtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJzU3VtbWFyeSgpIHtcclxuICAgICAgICAgICAgZGF0YVNlcnZpY2UuZ2V0Q3VzdG9tZXJzU3VtbWFyeSh2bS5jdXJyZW50UGFnZSAtIDEsIHZtLnBhZ2VTaXplKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdm0udG90YWxSZWNvcmRzID0gZGF0YS50b3RhbFJlY29yZHM7XHJcbiAgICAgICAgICAgICAgICB2bS5jdXN0b21lcnMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJDdXN0b21lcnMoJycpOyAvL1RyaWdnZXIgaW5pdGlhbCBmaWx0ZXJcclxuXHJcbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uY2FyZEFuaW1hdGlvbkNsYXNzID0gJyc7IC8vVHVybiBvZmYgYW5pbWF0aW9uIHNpbmNlIGl0IHdvbid0IGtlZXAgdXAgd2l0aCBmaWx0ZXJpbmdcclxuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG5cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAkd2luZG93LmFsZXJ0KCdTb3JyeSwgYW4gZXJyb3Igb2NjdXJyZWQ6ICcgKyBlcnJvci5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbHRlckN1c3RvbWVycyhmaWx0ZXJUZXh0KSB7XHJcbiAgICAgICAgICAgIHZtLmZpbHRlcmVkQ3VzdG9tZXJzID0gJGZpbHRlcihcIm5hbWVDaXR5U3RhdGVGaWx0ZXJcIikodm0uY3VzdG9tZXJzLCBmaWx0ZXJUZXh0KTtcclxuICAgICAgICAgICAgdm0uZmlsdGVyZWRDb3VudCA9IHZtLmZpbHRlcmVkQ3VzdG9tZXJzLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEN1c3RvbWVyQnlJZChpZCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZtLmN1c3RvbWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1c3QgPSB2bS5jdXN0b21lcnNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VzdC5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VzdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGluaXQoKTtcclxuICAgIH07XHJcblxyXG4gICAgQ3VzdG9tZXJzQ29udHJvbGxlci4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5jb250cm9sbGVyKCdDdXN0b21lcnNDb250cm9sbGVyJywgQ3VzdG9tZXJzQ29udHJvbGxlcik7XHJcblxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBpbmplY3RQYXJhbXMgPSBbJyRzY29wZScsJyRyb3V0ZVBhcmFtcycsICckd2luZG93JywgJ2RhdGFTZXJ2aWNlJ107XHJcblxyXG4gICAgdmFyIEN1c3RvbWVyT3JkZXJzQ29udHJvbGxlciA9IGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZVBhcmFtcywgJHdpbmRvdywgZGF0YVNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgdm0gPSB0aGlzLFxyXG4gICAgICAgICAgICBjdXN0b21lcklkID0gKCRyb3V0ZVBhcmFtcy5jdXN0b21lcklkKSA/IHBhcnNlSW50KCRyb3V0ZVBhcmFtcy5jdXN0b21lcklkKSA6IDA7XHJcblxyXG4gICAgICAgIHZtLmN1c3RvbWVyID0ge307XHJcbiAgICAgICAgdm0ub3JkZXJzVG90YWwgPSAwLjAwO1xyXG5cclxuICAgICAgICBpbml0KCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXN0b21lcklkID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVNlcnZpY2UuZ2V0Q3VzdG9tZXIoY3VzdG9tZXJJZClcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChjdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmN1c3RvbWVyID0gY3VzdG9tZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRicm9hZGNhc3QoJ2N1c3RvbWVyJywgY3VzdG9tZXIpO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5hbGVydChcIlNvcnJ5LCBhbiBlcnJvciBvY2N1cnJlZDogXCIgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDdXN0b21lck9yZGVyc0NvbnRyb2xsZXIuJGluamVjdCA9IGluamVjdFBhcmFtcztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tZXJzQXBwJykuY29udHJvbGxlcignQ3VzdG9tZXJPcmRlcnNDb250cm9sbGVyJywgQ3VzdG9tZXJPcmRlcnNDb250cm9sbGVyKTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgaW5qZWN0UGFyYW1zID0gWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJyRyb3V0ZVBhcmFtcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICckdGltZW91dCcsICdjb25maWcnLCAnZGF0YVNlcnZpY2UnLCAnbW9kYWxTZXJ2aWNlJ107XHJcblxyXG4gICAgdmFyIEN1c3RvbWVyRWRpdENvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0LCBjb25maWcsIGRhdGFTZXJ2aWNlLCBtb2RhbFNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgdmFyIHZtID0gdGhpcyxcclxuICAgICAgICAgICAgY3VzdG9tZXJJZCA9ICgkcm91dGVQYXJhbXMuY3VzdG9tZXJJZCkgPyBwYXJzZUludCgkcm91dGVQYXJhbXMuY3VzdG9tZXJJZCkgOiAwLFxyXG4gICAgICAgICAgICB0aW1lcixcclxuICAgICAgICAgICAgb25Sb3V0ZUNoYW5nZU9mZjtcclxuXHJcbiAgICAgICAgdm0uY3VzdG9tZXIgPSB7fTtcclxuICAgICAgICB2bS5zdGF0ZXMgPSBbXTtcclxuICAgICAgICB2bS50aXRsZSA9IChjdXN0b21lcklkID4gMCkgPyAnRWRpdCcgOiAnQWRkJztcclxuICAgICAgICB2bS5idXR0b25UZXh0ID0gKGN1c3RvbWVySWQgPiAwKSA/ICdVcGRhdGUnIDogJ0FkZCc7XHJcbiAgICAgICAgdm0udXBkYXRlU3RhdHVzID0gZmFsc2U7XHJcbiAgICAgICAgdm0uZXJyb3JNZXNzYWdlID0gJyc7XHJcblxyXG4gICAgICAgIHZtLmlzU3RhdGVTZWxlY3RlZCA9IGZ1bmN0aW9uIChjdXN0b21lclN0YXRlSWQsIHN0YXRlSWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGN1c3RvbWVyU3RhdGVJZCA9PT0gc3RhdGVJZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2bS5zYXZlQ3VzdG9tZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZWRpdEZvcm0uJHZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXZtLmN1c3RvbWVyLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNlcnZpY2UuaW5zZXJ0Q3VzdG9tZXIodm0uY3VzdG9tZXIpLnRoZW4ocHJvY2Vzc1N1Y2Nlc3MsIHByb2Nlc3NFcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU2VydmljZS51cGRhdGVDdXN0b21lcih2bS5jdXN0b21lcikudGhlbihwcm9jZXNzU3VjY2VzcywgcHJvY2Vzc0Vycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLmRlbGV0ZUN1c3RvbWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY3VzdE5hbWUgPSB2bS5jdXN0b21lci5maXJzdE5hbWUgKyAnICcgKyB2bS5jdXN0b21lci5sYXN0TmFtZTtcclxuICAgICAgICAgICAgdmFyIG1vZGFsT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIGNsb3NlQnV0dG9uVGV4dDogJ0NhbmNlbCcsXHJcbiAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b25UZXh0OiAnRGVsZXRlIEN1c3RvbWVyJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlclRleHQ6ICdEZWxldGUgJyArIGN1c3ROYW1lICsgJz8nLFxyXG4gICAgICAgICAgICAgICAgYm9keVRleHQ6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgY3VzdG9tZXI/J1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgbW9kYWxTZXJ2aWNlLnNob3dNb2RhbCh7fSwgbW9kYWxPcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09ICdvaycpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU2VydmljZS5kZWxldGVDdXN0b21lcih2bS5jdXN0b21lci5pZCkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uUm91dGVDaGFuZ2VPZmYoKTsgLy9TdG9wIGxpc3RlbmluZyBmb3IgbG9jYXRpb24gY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2N1c3RvbWVycycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHByb2Nlc3NFcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XHJcblxyXG4gICAgICAgICAgICBnZXRTdGF0ZXMoKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXN0b21lcklkID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTZXJ2aWNlLmdldEN1c3RvbWVyKGN1c3RvbWVySWQpLnRoZW4oZnVuY3Rpb24gKGN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmN1c3RvbWVyID0gY3VzdG9tZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgcHJvY2Vzc0Vycm9yKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNlcnZpY2UubmV3Q3VzdG9tZXIoKS50aGVuKGZ1bmN0aW9uIChjdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bS5jdXN0b21lciA9IGN1c3RvbWVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICAvL01ha2Ugc3VyZSB0aGV5J3JlIHdhcm5lZCBpZiB0aGV5IG1hZGUgYSBjaGFuZ2UgYnV0IGRpZG4ndCBzYXZlIGl0XHJcbiAgICAgICAgICAgIC8vQ2FsbCB0byAkb24gcmV0dXJucyBhIFwiZGVyZWdpc3RyYXRpb25cIiBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWQgdG9cclxuICAgICAgICAgICAgLy9yZW1vdmUgdGhlIGxpc3RlbmVyIChzZWUgcm91dGVDaGFuZ2UoKSBmb3IgYW4gZXhhbXBsZSBvZiB1c2luZyBpdClcclxuICAgICAgICAgICAgb25Sb3V0ZUNoYW5nZU9mZiA9ICRzY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN0YXJ0Jywgcm91dGVDaGFuZ2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5pdCgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByb3V0ZUNoYW5nZShldmVudCwgbmV3VXJsLCBvbGRVcmwpIHtcclxuICAgICAgICAgICAgLy9OYXZpZ2F0ZSB0byBuZXdVcmwgaWYgdGhlIGZvcm0gaXNuJ3QgZGlydHlcclxuICAgICAgICAgICAgaWYgKCF2bS5lZGl0Rm9ybSB8fCAhdm0uZWRpdEZvcm0uJGRpcnR5KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgbW9kYWxPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgY2xvc2VCdXR0b25UZXh0OiAnQ2FuY2VsJyxcclxuICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvblRleHQ6ICdJZ25vcmUgQ2hhbmdlcycsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJUZXh0OiAnVW5zYXZlZCBDaGFuZ2VzJyxcclxuICAgICAgICAgICAgICAgIGJvZHlUZXh0OiAnWW91IGhhdmUgdW5zYXZlZCBjaGFuZ2VzLiBMZWF2ZSB0aGUgcGFnZT8nXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBtb2RhbFNlcnZpY2Uuc2hvd01vZGFsKHt9LCBtb2RhbE9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ29rJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uUm91dGVDaGFuZ2VPZmYoKTsgLy9TdG9wIGxpc3RlbmluZyBmb3IgbG9jYXRpb24gY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCRsb2NhdGlvbi51cmwobmV3VXJsKS5oYXNoKCkpOyAvL0dvIHRvIHBhZ2UgdGhleSdyZSBpbnRlcmVzdGVkIGluXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy9wcmV2ZW50IG5hdmlnYXRpb24gYnkgZGVmYXVsdCBzaW5jZSB3ZSdsbCBoYW5kbGUgaXRcclxuICAgICAgICAgICAgLy9vbmNlIHRoZSB1c2VyIHNlbGVjdHMgYSBkaWFsb2cgb3B0aW9uXHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFN0YXRlcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGFTZXJ2aWNlLmdldFN0YXRlcygpLnRoZW4oZnVuY3Rpb24gKHN0YXRlcykge1xyXG4gICAgICAgICAgICAgICAgdm0uc3RhdGVzID0gc3RhdGVzO1xyXG4gICAgICAgICAgICB9LCBwcm9jZXNzRXJyb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc1N1Y2Nlc3MoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5lZGl0Rm9ybS4kZGlydHkgPSBmYWxzZTtcclxuICAgICAgICAgICAgdm0udXBkYXRlU3RhdHVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgdm0udGl0bGUgPSAnRWRpdCc7XHJcbiAgICAgICAgICAgIHZtLmJ1dHRvblRleHQgPSAnVXBkYXRlJztcclxuICAgICAgICAgICAgc3RhcnRUaW1lcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc0Vycm9yKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHZtLmVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIHN0YXJ0VGltZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0VGltZXIoKSB7XHJcbiAgICAgICAgICAgIHRpbWVyID0gJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVyKTtcclxuICAgICAgICAgICAgICAgIHZtLmVycm9yTWVzc2FnZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdm0udXBkYXRlU3RhdHVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgQ3VzdG9tZXJFZGl0Q29udHJvbGxlci4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5jb250cm9sbGVyKCdDdXN0b21lckVkaXRDb250cm9sbGVyJywgQ3VzdG9tZXJFZGl0Q29udHJvbGxlcik7XHJcblxyXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIGluamVjdFBhcmFtcyA9IFsnJG1vZGFsJ107XHJcblxyXG4gICAgdmFyIG1vZGFsU2VydmljZSA9IGZ1bmN0aW9uICgkbW9kYWwpIHtcclxuXHJcbiAgICAgICAgdmFyIG1vZGFsRGVmYXVsdHMgPSB7XHJcbiAgICAgICAgICAgIGJhY2tkcm9wOiB0cnVlLFxyXG4gICAgICAgICAgICBrZXlib2FyZDogdHJ1ZSxcclxuICAgICAgICAgICAgbW9kYWxGYWRlOiB0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvY3VzdG9tZXJzQXBwL3BhcnRpYWxzL21vZGFsLmh0bWwnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIG1vZGFsT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgY2xvc2VCdXR0b25UZXh0OiAnQ2xvc2UnLFxyXG4gICAgICAgICAgICBhY3Rpb25CdXR0b25UZXh0OiAnT0snLFxyXG4gICAgICAgICAgICBoZWFkZXJUZXh0OiAnUHJvY2VlZD8nLFxyXG4gICAgICAgICAgICBib2R5VGV4dDogJ1BlcmZvcm0gdGhpcyBhY3Rpb24/J1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuc2hvd01vZGFsID0gZnVuY3Rpb24gKGN1c3RvbU1vZGFsRGVmYXVsdHMsIGN1c3RvbU1vZGFsT3B0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAoIWN1c3RvbU1vZGFsRGVmYXVsdHMpIGN1c3RvbU1vZGFsRGVmYXVsdHMgPSB7fTtcclxuICAgICAgICAgICAgY3VzdG9tTW9kYWxEZWZhdWx0cy5iYWNrZHJvcCA9ICdzdGF0aWMnO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93KGN1c3RvbU1vZGFsRGVmYXVsdHMsIGN1c3RvbU1vZGFsT3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zaG93ID0gZnVuY3Rpb24gKGN1c3RvbU1vZGFsRGVmYXVsdHMsIGN1c3RvbU1vZGFsT3B0aW9ucykge1xyXG4gICAgICAgICAgICAvL0NyZWF0ZSB0ZW1wIG9iamVjdHMgdG8gd29yayB3aXRoIHNpbmNlIHdlJ3JlIGluIGEgc2luZ2xldG9uIHNlcnZpY2VcclxuICAgICAgICAgICAgdmFyIHRlbXBNb2RhbERlZmF1bHRzID0ge307XHJcbiAgICAgICAgICAgIHZhciB0ZW1wTW9kYWxPcHRpb25zID0ge307XHJcblxyXG4gICAgICAgICAgICAvL01hcCBhbmd1bGFyLXVpIG1vZGFsIGN1c3RvbSBkZWZhdWx0cyB0byBtb2RhbCBkZWZhdWx0cyBkZWZpbmVkIGluIHRoaXMgc2VydmljZVxyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh0ZW1wTW9kYWxEZWZhdWx0cywgbW9kYWxEZWZhdWx0cywgY3VzdG9tTW9kYWxEZWZhdWx0cyk7XHJcblxyXG4gICAgICAgICAgICAvL01hcCBtb2RhbC5odG1sICRzY29wZSBjdXN0b20gcHJvcGVydGllcyB0byBkZWZhdWx0cyBkZWZpbmVkIGluIHRoaXMgc2VydmljZVxyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh0ZW1wTW9kYWxPcHRpb25zLCBtb2RhbE9wdGlvbnMsIGN1c3RvbU1vZGFsT3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRlbXBNb2RhbERlZmF1bHRzLmNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRlbXBNb2RhbERlZmF1bHRzLmNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCAkbW9kYWxJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2RhbE9wdGlvbnMgPSB0ZW1wTW9kYWxPcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2RhbE9wdGlvbnMub2sgPSBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRtb2RhbEluc3RhbmNlLmNsb3NlKCdvaycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsT3B0aW9ucy5jbG9zZSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoJ2NhbmNlbCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRlbXBNb2RhbERlZmF1bHRzLmNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRtb2RhbEluc3RhbmNlJ107XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAkbW9kYWwub3Blbih0ZW1wTW9kYWxEZWZhdWx0cykucmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIG1vZGFsU2VydmljZS4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5zZXJ2aWNlKCdtb2RhbFNlcnZpY2UnLCBtb2RhbFNlcnZpY2UpO1xyXG5cclxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBpbmplY3RQYXJhbXMgPSBbJ2NvbmZpZycsICdjdXN0b21lcnNTZXJ2aWNlJywgJ2N1c3RvbWVyc0JyZWV6ZVNlcnZpY2UnXTtcclxuXHJcbiAgICB2YXIgZGF0YVNlcnZpY2UgPSBmdW5jdGlvbiAoY29uZmlnLCBjdXN0b21lcnNTZXJ2aWNlLCBjdXN0b21lcnNCcmVlemVTZXJ2aWNlKSB7XHJcbiAgICAgICAgcmV0dXJuIChjb25maWcudXNlQnJlZXplKSA/IGN1c3RvbWVyc0JyZWV6ZVNlcnZpY2UgOiBjdXN0b21lcnNTZXJ2aWNlO1xyXG4gICAgfTtcclxuXHJcbiAgICBkYXRhU2VydmljZS4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5mYWN0b3J5KCdkYXRhU2VydmljZScsIGRhdGFTZXJ2aWNlKTtcclxuXHJcbn0oKSk7XHJcblxyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBpbmplY3RQYXJhbXMgPSBbJyRodHRwJywgJyRxJ107XHJcblxyXG4gICAgdmFyIGN1c3RvbWVyc0ZhY3RvcnkgPSBmdW5jdGlvbiAoJGh0dHAsICRxKSB7XHJcbiAgICAgICAgdmFyIHNlcnZpY2VCYXNlID0gJy9hcGkvZGF0YXNlcnZpY2UvJyxcclxuICAgICAgICAgICAgZmFjdG9yeSA9IHt9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LmdldEN1c3RvbWVycyA9IGZ1bmN0aW9uIChwYWdlSW5kZXgsIHBhZ2VTaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRQYWdlZFJlc291cmNlKCdjdXN0b21lcnMnLCBwYWdlSW5kZXgsIHBhZ2VTaXplKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LmdldEN1c3RvbWVyc1N1bW1hcnkgPSBmdW5jdGlvbiAocGFnZUluZGV4LCBwYWdlU2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0UGFnZWRSZXNvdXJjZSgnY3VzdG9tZXJzU3VtbWFyeScsIHBhZ2VJbmRleCwgcGFnZVNpemUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZhY3RvcnkuZ2V0U3RhdGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHNlcnZpY2VCYXNlICsgJ3N0YXRlcycpLnRoZW4oXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LmNoZWNrVW5pcXVlVmFsdWUgPSBmdW5jdGlvbiAoaWQsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWlkKSBpZCA9IDA7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoc2VydmljZUJhc2UgKyAnY2hlY2tVbmlxdWUvJyArIGlkICsgJz9wcm9wZXJ0eT0nICsgcHJvcGVydHkgKyAnJnZhbHVlPScgKyBlc2NhcGUodmFsdWUpKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cy5kYXRhLnN0YXR1cztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZhY3RvcnkuaW5zZXJ0Q3VzdG9tZXIgPSBmdW5jdGlvbiAoY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3Qoc2VydmljZUJhc2UgKyAncG9zdEN1c3RvbWVyJywgY3VzdG9tZXIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbWVyLmlkID0gcmVzdWx0cy5kYXRhLmlkO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHMuZGF0YTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS5uZXdDdXN0b21lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxLndoZW4oe2lkOiAwfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS51cGRhdGVDdXN0b21lciA9IGZ1bmN0aW9uIChjdXN0b21lcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucHV0KHNlcnZpY2VCYXNlICsgJ3B1dEN1c3RvbWVyLycgKyBjdXN0b21lci5pZCwgY3VzdG9tZXIpLnRoZW4oZnVuY3Rpb24gKHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXR1cy5kYXRhO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LmRlbGV0ZUN1c3RvbWVyID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoc2VydmljZUJhc2UgKyAnZGVsZXRlQ3VzdG9tZXIvJyArIGlkKS50aGVuKGZ1bmN0aW9uIChzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0dXMuZGF0YTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS5nZXRDdXN0b21lciA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICAvL3RoZW4gZG9lcyBub3QgdW53cmFwIGRhdGEgc28gbXVzdCBnbyB0aHJvdWdoIC5kYXRhIHByb3BlcnR5XHJcbiAgICAgICAgICAgIC8vc3VjY2VzcyB1bndyYXBzIGRhdGEgYXV0b21hdGljYWxseSAobm8gbmVlZCB0byBjYWxsIC5kYXRhIHByb3BlcnR5KVxyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHNlcnZpY2VCYXNlICsgJ2N1c3RvbWVyQnlJZC8nICsgaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgIGV4dGVuZEN1c3RvbWVycyhbcmVzdWx0cy5kYXRhXSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cy5kYXRhO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBleHRlbmRDdXN0b21lcnMoY3VzdG9tZXJzKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXN0c0xlbiA9IGN1c3RvbWVycy5sZW5ndGg7XHJcbiAgICAgICAgICAgIC8vSXRlcmF0ZSB0aHJvdWdoIGN1c3RvbWVyc1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGN1c3RzTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXN0ID0gY3VzdG9tZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjdXN0Lm9yZGVycykgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG9yZGVyc0xlbiA9IGN1c3Qub3JkZXJzLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb3JkZXJzTGVuOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXIgPSBjdXN0Lm9yZGVyc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICBvcmRlci5vcmRlclRvdGFsID0gb3JkZXIucXVhbnRpdHkgKiBvcmRlci5wcmljZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1c3Qub3JkZXJzVG90YWwgPSBvcmRlcnNUb3RhbChjdXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UGFnZWRSZXNvdXJjZShiYXNlUmVzb3VyY2UsIHBhZ2VJbmRleCwgcGFnZVNpemUpIHtcclxuICAgICAgICAgICAgdmFyIHJlc291cmNlID0gYmFzZVJlc291cmNlO1xyXG4gICAgICAgICAgICByZXNvdXJjZSArPSAoYXJndW1lbnRzLmxlbmd0aCA9PSAzKSA/IGJ1aWxkUGFnaW5nVXJpKHBhZ2VJbmRleCwgcGFnZVNpemUpIDogJyc7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoc2VydmljZUJhc2UgKyByZXNvdXJjZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXN0cyA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBleHRlbmRDdXN0b21lcnMoY3VzdHMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3RhbFJlY29yZHM6IHBhcnNlSW50KHJlc3BvbnNlLmhlYWRlcnMoJ1gtSW5saW5lQ291bnQnKSksXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0czogY3VzdHNcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRQYWdpbmdVcmkocGFnZUluZGV4LCBwYWdlU2l6ZSkge1xyXG4gICAgICAgICAgICB2YXIgdXJpID0gJz8kdG9wPScgKyBwYWdlU2l6ZSArICcmJHNraXA9JyArIChwYWdlSW5kZXggKiBwYWdlU2l6ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpcyB0aGlzIHN0aWxsIHVzZWQ/Pz9cclxuICAgICAgICBmdW5jdGlvbiBvcmRlclRvdGFsKG9yZGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvcmRlci5xdWFudGl0eSAqIG9yZGVyLnByaWNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9yZGVyc1RvdGFsKGN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgIHZhciB0b3RhbCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBvcmRlcnMgPSBjdXN0b21lci5vcmRlcnM7XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IG9yZGVycy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IG9yZGVyc1tpXS5vcmRlclRvdGFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZmFjdG9yeTtcclxuICAgIH07XHJcblxyXG4gICAgY3VzdG9tZXJzRmFjdG9yeS4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5mYWN0b3J5KCdjdXN0b21lcnNTZXJ2aWNlJywgY3VzdG9tZXJzRmFjdG9yeSk7XHJcblxyXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIGluamVjdFBhcmFtcyA9IFsnYnJlZXplJywgJyRxJywgJyR3aW5kb3cnXTtcclxuXHJcbiAgICB2YXIgY3VzdG9tZXJzQnJlZXplU2VydmljZSA9IGZ1bmN0aW9uIChicmVlemUsICRxLCAkd2luZG93KSB7XHJcblxyXG4gICAgICAgIHZhciBmYWN0b3J5ID0ge307XHJcbiAgICAgICAgdmFyIEVudGl0eVF1ZXJ5ID0gYnJlZXplLkVudGl0eVF1ZXJ5O1xyXG5cclxuICAgICAgICAvLyBjb25maWd1cmUgdG8gdXNlIHRoZSBtb2RlbCBsaWJyYXJ5IGZvciBBbmd1bGFyXHJcbiAgICAgICAgYnJlZXplLmNvbmZpZy5pbml0aWFsaXplQWRhcHRlckluc3RhbmNlKCdtb2RlbExpYnJhcnknLCAnYmFja2luZ1N0b3JlJywgdHJ1ZSk7XHJcbiAgICAgICAgLy8gY29uZmlndXJlIHRvIHVzZSBjYW1lbENhc2VcclxuICAgICAgICBicmVlemUuTmFtaW5nQ29udmVudGlvbi5jYW1lbENhc2Uuc2V0QXNEZWZhdWx0KCk7XHJcbiAgICAgICAgLy8gY3JlYXRlIGVudGl0eSBNYW5hZ2VyXHJcbiAgICAgICAgdmFyIHNlcnZpY2VOYW1lID0gJ2JyZWV6ZS9icmVlemVkYXRhc2VydmljZSc7XHJcbiAgICAgICAgdmFyIGVudGl0eU1hbmFnZXIgPSBuZXcgYnJlZXplLkVudGl0eU1hbmFnZXIoc2VydmljZU5hbWUpO1xyXG5cclxuICAgICAgICBmYWN0b3J5LmdldEN1c3RvbWVycyA9IGZ1bmN0aW9uIChwYWdlSW5kZXgsIHBhZ2VTaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRQYWdlZFJlc291cmNlKCdDdXN0b21lcnMnLCAnb3JkZXJzJywgcGFnZUluZGV4LCBwYWdlU2l6ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS5nZXRDdXN0b21lcnNTdW1tYXJ5ID0gZnVuY3Rpb24gKHBhZ2VJbmRleCwgcGFnZVNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldFBhZ2VkUmVzb3VyY2UoJ0N1c3RvbWVyc1N1bW1hcnknLCAnJywgcGFnZUluZGV4LCBwYWdlU2l6ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS5nZXRTdGF0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRBbGwoJ1N0YXRlcycpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZhY3RvcnkuZ2V0Q3VzdG9tZXIgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gRW50aXR5UXVlcnlcclxuICAgICAgICAgICAgICAgIC5mcm9tKCdDdXN0b21lcnMnKVxyXG4gICAgICAgICAgICAgICAgLndoZXJlKCdpZCcsICc9PScsIGlkKVxyXG4gICAgICAgICAgICAgICAgLmV4cGFuZCgnb3JkZXJzLCBzdGF0ZScpO1xyXG4gICAgICAgICAgICByZXR1cm4gZXhlY3V0ZVF1ZXJ5KHF1ZXJ5LCB0cnVlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LmNoZWNrVW5pcXVlVmFsdWUgPSBmdW5jdGlvbiAoaWQsIHByb3BlcnR5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlQcmVkaWNhdGUgPSBuZXcgYnJlZXplLlByZWRpY2F0ZShwcm9wZXJ0eSwgXCI9PVwiLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciBwcmVkaWNhdGUgPSAoaWQpID8gcHJvcGVydHlQcmVkaWNhdGUuYW5kKG5ldyBicmVlemUuUHJlZGljYXRlKFwiaWRcIiwgXCIhPVwiLCBpZCkpIDogcHJvcGVydHlQcmVkaWNhdGU7XHJcblxyXG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBFbnRpdHlRdWVyeS5mcm9tKCdDdXN0b21lcnMnKS53aGVyZShwcmVkaWNhdGUpLnRha2UoMCkuaW5saW5lQ291bnQoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeS51c2luZyhlbnRpdHlNYW5hZ2VyKS5leGVjdXRlKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChkYXRhICYmIGRhdGEuaW5saW5lQ291bnQgPT0gMCkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZhY3RvcnkuaW5zZXJ0Q3VzdG9tZXIgPSBmdW5jdGlvbiAoY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVudGl0eU1hbmFnZXIuc2F2ZUNoYW5nZXMoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5Lm5ld0N1c3RvbWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0TWV0YWRhdGEoKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHlNYW5hZ2VyLmNyZWF0ZUVudGl0eSgnQ3VzdG9tZXInLCB7IGZpcnN0TmFtZTogJycsIGxhc3ROYW1lOiAnJyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS5kZWxldGVDdXN0b21lciA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgICAgICAgICAkd2luZG93LmFsZXJ0KCdJRCB3YXMgbnVsbCAtIGNhbm5vdCBkZWxldGUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjdXN0b21lciA9IGVudGl0eU1hbmFnZXIuZ2V0RW50aXR5QnlLZXkoJ0N1c3RvbWVyJywgaWQpO1xyXG5cclxuICAgICAgICAgICAgLyogIFdoZW4gdGhlIGN1c3RvbWVyIGlzIGRlbGV0ZWQgdGhlIGN1c3RvbWVySUQgaXMgc2V0IHRvIDAgZm9yIGVhY2ggb3JkZXJcclxuICAgICAgICAgICAgICAgIHNpbmNlIG5vIHBhcmVudCBleGlzdHNcclxuICAgICAgICAgICAgICAgIERldGFjaCBvcmRlcnMgc2luY2UgdGhlIGN1c3RvbWVyIGlzIGJlaW5nIGRlbGV0ZWQgYW5kIHNlcnZlclxyXG4gICAgICAgICAgICAgICAgaXMgc2V0IHRvIGNhc2NhZGUgZGVsZXRlc1xyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAoY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmRlcnMgPSBjdXN0b21lci5vcmRlcnMuc2xpY2UoKTsgLy9DcmVhdGUgYSBjb3B5IG9mIHRoZSBsaXZlIGxpc3RcclxuICAgICAgICAgICAgICAgIG9yZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChvcmRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eU1hbmFnZXIuZGV0YWNoRW50aXR5KG9yZGVyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY3VzdG9tZXIuZW50aXR5QXNwZWN0LnNldERlbGV0ZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vUmVhbGx5IGEgQ3VzdG9tZXJTdW1tYXJ5IHNvIHdlJ3JlIGdvaW5nIHRvIGFkZCBhIG5ldyBDdXN0b21lciBcclxuICAgICAgICAgICAgICAgIC8vYW5kIG1hcmsgaXQgYXMgZGVsZXRlZC4gVGhhdCBhbGxvd3MgdXMgdG8gc2F2ZSBzb21lIGNvZGUgYW5kIGF2b2lkIGhhdmluZ1xyXG4gICAgICAgICAgICAgICAgLy9hIHNlcGFyYXRlIG1ldGhvZCB0byBkZWFsIHdpdGggdGhlIEN1c3RvbWVyU3VtbWFyeSBwcm9qZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBjdXN0b21lciA9IGVudGl0eU1hbmFnZXIuY3JlYXRlRW50aXR5KCdDdXN0b21lcicsIHsgaWQ6IGlkLCBnZW5kZXI6ICdNYWxlJyB9LCBicmVlemUuRW50aXR5U3RhdGUuRGVsZXRlZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHlNYW5hZ2VyLnNhdmVDaGFuZ2VzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS51cGRhdGVDdXN0b21lciA9IGZ1bmN0aW9uIChjdXN0b21lcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZW50aXR5TWFuYWdlci5zYXZlQ2hhbmdlcygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGV4ZWN1dGVRdWVyeShxdWVyeSwgdGFrZUZpcnN0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeS51c2luZyhlbnRpdHlNYW5hZ2VyKS5leGVjdXRlKCkudGhlbihxdWVyeVN1Y2Nlc3MsIHF1ZXJ5RXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcXVlcnlTdWNjZXNzKGRhdGEsIHN0YXR1cywgaGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRha2VGaXJzdCA/IGRhdGEucmVzdWx0c1swXSA6IGRhdGEucmVzdWx0cztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcXVlcnlFcnJvcihlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJHdpbmRvdy5hbGVydChlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsKGVudGl0eU5hbWUsIGV4cGFuZCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBFbnRpdHlRdWVyeS5mcm9tKGVudGl0eU5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoZXhwYW5kKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LmV4cGFuZChleHBhbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBleGVjdXRlUXVlcnkocXVlcnkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0TWV0YWRhdGEoKSB7XHJcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IGVudGl0eU1hbmFnZXIubWV0YWRhdGFTdG9yZTtcclxuICAgICAgICAgICAgaWYgKHN0b3JlLmhhc01ldGFkYXRhRm9yKHNlcnZpY2VOYW1lKSkgeyAvL0hhdmUgbWV0YWRhdGFcclxuICAgICAgICAgICAgICAgIHJldHVybiAkcS53aGVuKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgeyAvL0dldCBtZXRhZGF0YVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmZldGNoTWV0YWRhdGEoc2VydmljZU5hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRQYWdlZFJlc291cmNlKGVudGl0eU5hbWUsIGV4cGFuZCwgcGFnZUluZGV4LCBwYWdlU2l6ZSkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBFbnRpdHlRdWVyeVxyXG4gICAgICAgICAgICAuZnJvbShlbnRpdHlOYW1lKVxyXG4gICAgICAgICAgICAuc2tpcChwYWdlSW5kZXggKiBwYWdlU2l6ZSlcclxuICAgICAgICAgICAgLnRha2UocGFnZVNpemUpXHJcbiAgICAgICAgICAgIC5pbmxpbmVDb3VudCh0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChleHBhbmQgJiYgZXhwYW5kICE9ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5LmV4cGFuZChleHBhbmQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL05vdCBjYWxsaW5nIHRoZSByZS11c2VhYmxlIGV4ZWN1dGVRdWVyeSgpIGZ1bmN0aW9uIGhlcmUgc2luY2Ugd2UgbmVlZCB0byBnZXQgdG8gbW9yZSBkZXRhaWxzXHJcbiAgICAgICAgICAgIC8vYW5kIHJldHVybiBhIGN1c3RvbSBvYmplY3RcclxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5LnVzaW5nKGVudGl0eU1hbmFnZXIpLmV4ZWN1dGUoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsUmVjb3JkczogcGFyc2VJbnQoZGF0YS5pbmxpbmVDb3VudCksXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0czogZGF0YS5yZXN1bHRzXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cuYWxlcnQoJ0Vycm9yICcgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgT3JkZXJDdG9yID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9yZGVySW5pdChvcmRlcikge1xyXG4gICAgICAgICAgICBvcmRlci5vcmRlclRvdGFsID0gb3JkZXIucXVhbnRpdHkgKiBvcmRlci5wcmljZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBDdXN0b21lckN0b3IgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3VzdG9tZXJJbml0KGN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbWVyLm9yZGVyc1RvdGFsID0gb3JkZXJzVG90YWwoY3VzdG9tZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb3JkZXJzVG90YWwoY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgdmFyIG9yZGVycyA9IGN1c3RvbWVyLm9yZGVycztcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gb3JkZXJzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gb3JkZXJzW2ldLm9yZGVyVG90YWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGVudGl0eU1hbmFnZXIubWV0YWRhdGFTdG9yZS5yZWdpc3RlckVudGl0eVR5cGVDdG9yKCdPcmRlcicsIE9yZGVyQ3Rvciwgb3JkZXJJbml0KTtcclxuICAgICAgICBlbnRpdHlNYW5hZ2VyLm1ldGFkYXRhU3RvcmUucmVnaXN0ZXJFbnRpdHlUeXBlQ3RvcignQ3VzdG9tZXInLCBDdXN0b21lckN0b3IsIGN1c3RvbWVySW5pdCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmYWN0b3J5O1xyXG4gICAgfTtcclxuXHJcbiAgICBjdXN0b21lcnNCcmVlemVTZXJ2aWNlLiRpbmplY3QgPSBpbmplY3RQYXJhbXM7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbWVyc0FwcCcpXHJcbiAgICAgICAgLmZhY3RvcnkoJ2N1c3RvbWVyc0JyZWV6ZVNlcnZpY2UnLCBjdXN0b21lcnNCcmVlemVTZXJ2aWNlKTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tZXJzQXBwJylcclxuICAgICAgICAuY29uZmlnKFsnJGh0dHBQcm92aWRlcicsIGZ1bmN0aW9uICgkaHR0cFByb3ZpZGVyKSB7XHJcblxyXG4gICAgICAgIHZhciBpbmplY3RQYXJhbXMgPSBbJyRxJywgJyRyb290U2NvcGUnXTtcclxuXHJcbiAgICAgICAgdmFyIGh0dHBJbnRlcmNlcHRvcjQwMSA9IGZ1bmN0aW9uICgkcSwgJHJvb3RTY29wZSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBlcnJvciA9IGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSA0MDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL1JhaXNlIGV2ZW50IHNvIGxpc3RlbmVyIChuYXZiYXJDb250cm9sbGVyKSBjYW4gYWN0IG9uIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdyZWRpcmVjdFRvTG9naW4nLCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oc3VjY2VzcywgZXJyb3IpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBodHRwSW50ZXJjZXB0b3I0MDEuJGluamVjdCA9IGluamVjdFBhcmFtcztcclxuXHJcbiAgICAgICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaChodHRwSW50ZXJjZXB0b3I0MDEpO1xyXG5cclxuICAgIH1dKTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgaW5qZWN0UGFyYW1zID0gWyckaHR0cCcsICckcm9vdFNjb3BlJ107XHJcblxyXG4gICAgdmFyIGF1dGhGYWN0b3J5ID0gZnVuY3Rpb24gKCRodHRwLCAkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgdmFyIHNlcnZpY2VCYXNlID0gJy9hcGkvZGF0YXNlcnZpY2UvJyxcclxuICAgICAgICAgICAgZmFjdG9yeSA9IHtcclxuICAgICAgICAgICAgICAgIGxvZ2luUGF0aDogJy9sb2dpbicsXHJcbiAgICAgICAgICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICByb2xlczogbnVsbFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LmxvZ2luID0gZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChzZXJ2aWNlQmFzZSArICdsb2dpbicsIHsgdXNlckxvZ2luOiB7IHVzZXJOYW1lOiBlbWFpbCwgcGFzc3dvcmQ6IHBhc3N3b3JkIH0gfSkudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ2dlZEluID0gcmVzdWx0cy5kYXRhLnN0YXR1czs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlQXV0aChsb2dnZWRJbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlZEluO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KHNlcnZpY2VCYXNlICsgJ2xvZ291dCcpLnRoZW4oXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2dnZWRJbiA9ICFyZXN1bHRzLmRhdGEuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZUF1dGgobG9nZ2VkSW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2dnZWRJbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZhY3RvcnkucmVkaXJlY3RUb0xvZ2luID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3JlZGlyZWN0VG9Mb2dpbicsIG51bGwpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNoYW5nZUF1dGgobG9nZ2VkSW4pIHtcclxuICAgICAgICAgICAgZmFjdG9yeS51c2VyLmlzQXV0aGVudGljYXRlZCA9IGxvZ2dlZEluO1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2xvZ2luU3RhdHVzQ2hhbmdlZCcsIGxvZ2dlZEluKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWN0b3J5O1xyXG4gICAgfTtcclxuXHJcbiAgICBhdXRoRmFjdG9yeS4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5mYWN0b3J5KCdhdXRoU2VydmljZScsIGF1dGhGYWN0b3J5KTtcclxuXHJcbn0oKSk7XHJcblxyXG4iLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciB2YWx1ZSA9IHtcclxuICAgICAgICB1c2VCcmVlemU6IGZhbHNlXHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS52YWx1ZSgnY29uZmlnJywgdmFsdWUpO1xyXG5cclxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBuYW1lUHJvZHVjdEZpbHRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbWF0Y2hlc1Byb2R1Y3QoY3VzdG9tZXIsIGZpbHRlclZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXN0b21lci5vcmRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VzdG9tZXIub3JkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbWVyLm9yZGVyc1tpXS5wcm9kdWN0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXJWYWx1ZSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjdXN0b21lcnMsIGZpbHRlclZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICghZmlsdGVyVmFsdWUgfHwgIWN1c3RvbWVycykgcmV0dXJuIGN1c3RvbWVycztcclxuXHJcbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gW107XHJcbiAgICAgICAgICAgIGZpbHRlclZhbHVlID0gZmlsdGVyVmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXN0b21lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXN0ID0gY3VzdG9tZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1c3QuZmlyc3ROYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXJWYWx1ZSkgPiAtMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGN1c3QubGFzdE5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlclZhbHVlKSA+IC0xIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlc1Byb2R1Y3QoY3VzdCwgZmlsdGVyVmFsdWUpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChjdXN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlcztcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tZXJzQXBwJykuZmlsdGVyKCduYW1lUHJvZHVjdEZpbHRlcicsIG5hbWVQcm9kdWN0RmlsdGVyKTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgbmFtZUNpdHlTdGF0ZUZpbHRlciA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjdXN0b21lcnMsIGZpbHRlclZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICghZmlsdGVyVmFsdWUpIHJldHVybiBjdXN0b21lcnM7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xyXG4gICAgICAgICAgICBmaWx0ZXJWYWx1ZSA9IGZpbHRlclZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VzdG9tZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VzdCA9IGN1c3RvbWVyc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXN0LmZpcnN0TmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyVmFsdWUpID4gLTEgfHxcclxuICAgICAgICAgICAgICAgICAgICBjdXN0Lmxhc3ROYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXJWYWx1ZSkgPiAtMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGN1c3QuY2l0eS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyVmFsdWUpID4gLTEgfHxcclxuICAgICAgICAgICAgICAgICAgICBjdXN0LnN0YXRlLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlclZhbHVlKSA+IC0xKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChjdXN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlcztcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tZXJzQXBwJykuZmlsdGVyKCduYW1lQ2l0eVN0YXRlRmlsdGVyJywgbmFtZUNpdHlTdGF0ZUZpbHRlcik7XHJcblxyXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIGluamVjdFBhcmFtcyA9IFsnJHEnLCAnZGF0YVNlcnZpY2UnXTtcclxuXHJcbiAgICB2YXIgd2NVbmlxdWVEaXJlY3RpdmUgPSBmdW5jdGlvbiAoJHEsIGRhdGFTZXJ2aWNlKSB7XHJcblxyXG4gICAgICAgIHZhciBsaW5rID0gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xyXG4gICAgICAgICAgICBuZ01vZGVsLiRhc3luY1ZhbGlkYXRvcnMudW5pcXVlID0gZnVuY3Rpb24gKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBrZXkgPSBhdHRycy53Y1VuaXF1ZUtleSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eSA9IGF0dHJzLndjVW5pcXVlUHJvcGVydHk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9GaXJzdCB0aW1lIHRoZSBhc3luY1ZhbGlkYXRvcnMgZnVuY3Rpb24gaXMgbG9hZGVkIHRoZVxyXG4gICAgICAgICAgICAgICAgLy9rZXkgd29uJ3QgYmUgc2V0ICBzbyBlbnN1cmUgdGhhdCB3ZSBoYXZlIFxyXG4gICAgICAgICAgICAgICAgLy9rZXkgYW5kIHByb3BlcnR5TmFtZSBiZWZvcmUgY2hlY2tpbmcgd2l0aCB0aGUgc2VydmVyIFxyXG4gICAgICAgICAgICAgICAgaWYgKGtleSAmJiBwcm9wZXJ0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTZXJ2aWNlLmNoZWNrVW5pcXVlVmFsdWUoa2V5LCBwcm9wZXJ0eSwgY3VycmVudFZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh1bmlxdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuaXF1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpOyAvL0l0J3MgdW5pcXVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTsgLy9BZGQgdW5pcXVlIHRvICRlcnJvcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLndoZW4odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBsaW5rXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgd2NVbmlxdWVEaXJlY3RpdmUuJGluamVjdCA9IGluamVjdFBhcmFtcztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tZXJzQXBwJykuZGlyZWN0aXZlKCd3Y1VuaXF1ZScsIHdjVW5pcXVlRGlyZWN0aXZlKTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHZhciB3Y0FuaW1hdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gMC41O1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGVudGVyOiBmdW5jdGlvbiAoZWxlbWVudCwgZG9uZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJhbmRvbSA9IE1hdGgucmFuZG9tKCkgKiAxMDA7XHJcbiAgICAgICAgICAgICAgICBUd2Vlbk1heC5zZXQoZWxlbWVudCwgeyBvcGFjaXR5OiAwLCBsZWZ0OiByYW5kb20gKyAncHgnIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciByYW5kb20yID0gTWF0aC5yYW5kb20oKTtcclxuICAgICAgICAgICAgICAgIFR3ZWVuTWF4LnRvKGVsZW1lbnQsIGR1cmF0aW9uLCB7IG9wYWNpdHk6IDEsIGxlZnQ6ICcwcHgnLCBlYXNlOiBCYWNrLmVhc2VJbk91dCwgZGVsYXk6IHJhbmRvbTIsIG9uQ29tcGxldGU6IGRvbmUgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxlYXZlOiBmdW5jdGlvbiAoZWxlbWVudCwgZG9uZSkge1xyXG4gICAgICAgICAgICAgICAgVHdlZW5NYXgudG8oZWxlbWVudCwgZHVyYXRpb24sIHsgb3BhY2l0eTogMCwgbGVmdDogJy01MHB4Jywgb25Db21wbGV0ZTogZG9uZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5hbmltYXRpb24oJy5jYXJkLWFuaW1hdGlvbicsIHdjQW5pbWF0aW9ucyk7XHJcblxyXG59KCkpO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgLy8gaW1wb3J0IGFuZ3VsYXIgZnJvbSAnYW5ndWxhcidcclxuXHJcbiAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnLCBbXHJcbiAgICAnbmdSb3V0ZScsXHJcbiAgICAnbmdBbmltYXRlJyxcclxuICAgICd3Yy5kaXJlY3RpdmVzJyxcclxuICAgICd1aS5ib290c3RyYXAnLFxyXG4gICAgJ2JyZWV6ZS5hbmd1bGFyJ1xyXG4gIF0pO1xyXG5cclxuICBhcHAuY29uZmlnKFtcclxuICAgICckcm91dGVQcm92aWRlcicsXHJcbiAgICBmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xyXG4gICAgICB2YXIgdmlld0Jhc2UgPSAnL2FwcC9jdXN0b21lcnNBcHAvdmlld3MvJztcclxuXHJcbiAgICAgICRyb3V0ZVByb3ZpZGVyXHJcbiAgICAgICAgLndoZW4oJy9jdXN0b21lcnMnLCB7XHJcbiAgICAgICAgICBjb250cm9sbGVyOiAnQ3VzdG9tZXJzQ29udHJvbGxlcicsXHJcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld0Jhc2UgKyAnY3VzdG9tZXJzL2N1c3RvbWVycy5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLndoZW4oJy9jdXN0b21lcm9yZGVycy86Y3VzdG9tZXJJZCcsIHtcclxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdDdXN0b21lck9yZGVyc0NvbnRyb2xsZXInLFxyXG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdCYXNlICsgJ2N1c3RvbWVycy9jdXN0b21lck9yZGVycy5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLndoZW4oJy9jdXN0b21lcmVkaXQvOmN1c3RvbWVySWQnLCB7XHJcbiAgICAgICAgICBjb250cm9sbGVyOiAnQ3VzdG9tZXJFZGl0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld0Jhc2UgKyAnY3VzdG9tZXJzL2N1c3RvbWVyRWRpdC5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuICAgICAgICAgIHNlY3VyZTogdHJ1ZSAvL1RoaXMgcm91dGUgcmVxdWlyZXMgYW4gYXV0aGVudGljYXRlZCB1c2VyXHJcbiAgICAgICAgfSlcclxuICAgICAgICAud2hlbignL29yZGVycycsIHtcclxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdPcmRlcnNDb250cm9sbGVyJyxcclxuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3QmFzZSArICdvcmRlcnMvb3JkZXJzLmh0bWwnLFxyXG4gICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXHJcbiAgICAgICAgfSlcclxuICAgICAgICAud2hlbignL2Fib3V0Jywge1xyXG4gICAgICAgICAgY29udHJvbGxlcjogJ0Fib3V0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld0Jhc2UgKyAnYWJvdXQuaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVuKCcvbG9naW4vOnJlZGlyZWN0Kj8nLCB7XHJcbiAgICAgICAgICBjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcclxuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3QmFzZSArICdsb2dpbi5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm90aGVyd2lzZSh7IHJlZGlyZWN0VG86ICcvY3VzdG9tZXJzJyB9KTtcclxuICAgIH1cclxuICBdKTtcclxuXHJcbiAgYXBwLnJ1bihbXHJcbiAgICAnJHJvb3RTY29wZScsXHJcbiAgICAnJGxvY2F0aW9uJyxcclxuICAgICdhdXRoU2VydmljZScsXHJcbiAgICBmdW5jdGlvbigkcm9vdFNjb3BlLCAkbG9jYXRpb24sIGF1dGhTZXJ2aWNlKSB7XHJcbiAgICAgIC8vQ2xpZW50LXNpZGUgc2VjdXJpdHkuIFNlcnZlci1zaWRlIGZyYW1ld29yayBNVVNUIGFkZCBpdCdzXHJcbiAgICAgIC8vb3duIHNlY3VyaXR5IGFzIHdlbGwgc2luY2UgY2xpZW50LWJhc2VkIHNlY3VyaXR5IGlzIGVhc2lseSBoYWNrZWRcclxuICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24oZXZlbnQsIG5leHQsIGN1cnJlbnQpIHtcclxuICAgICAgICBpZiAobmV4dCAmJiBuZXh0LiQkcm91dGUgJiYgbmV4dC4kJHJvdXRlLnNlY3VyZSkge1xyXG4gICAgICAgICAgaWYgKCFhdXRoU2VydmljZS51c2VyLmlzQXV0aGVudGljYXRlZCkge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgYXV0aFNlcnZpY2UucmVkaXJlY3RUb0xvZ2luKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICBdKTtcclxuXHJcbn0pKCk7XHJcbiIsImltcG9ydCAnLi4vYXBwL2N1c3RvbWVyc0FwcC9hcHAnO1xyXG5pbXBvcnQgJy4uL2FwcC9jdXN0b21lcnNBcHAvYW5pbWF0aW9ucy9saXN0QW5pbWF0aW9ucyc7XHJcbmltcG9ydCAnLi4vYXBwL2N1c3RvbWVyc0FwcC9kaXJlY3RpdmVzL3djVW5pcXVlJztcclxuaW1wb3J0ICcuLi9hcHAvY3VzdG9tZXJzQXBwL2ZpbHRlcnMvbmFtZUNpdHlTdGF0ZUZpbHRlcic7XHJcbmltcG9ydCAnLi4vYXBwL2N1c3RvbWVyc0FwcC9maWx0ZXJzL25hbWVQcm9kdWN0RmlsdGVyJztcclxuaW1wb3J0ICcuLi9hcHAvY3VzdG9tZXJzQXBwL3NlcnZpY2VzL2NvbmZpZyc7XHJcbmltcG9ydCAnLi4vYXBwL2N1c3RvbWVyc0FwcC9zZXJ2aWNlcy9hdXRoU2VydmljZSc7XHJcbmltcG9ydCAnLi4vYXBwL2N1c3RvbWVyc0FwcC9zZXJ2aWNlcy9odHRwSW50ZXJjZXB0b3JzJztcclxuaW1wb3J0ICcuLi9hcHAvY3VzdG9tZXJzQXBwL3NlcnZpY2VzL2N1c3RvbWVyc0JyZWV6ZVNlcnZpY2UnO1xyXG5pbXBvcnQgJy4uL2FwcC9jdXN0b21lcnNBcHAvc2VydmljZXMvY3VzdG9tZXJzU2VydmljZSc7XHJcbmltcG9ydCAnLi4vYXBwL2N1c3RvbWVyc0FwcC9zZXJ2aWNlcy9kYXRhU2VydmljZSc7XHJcbmltcG9ydCAnLi4vYXBwL2N1c3RvbWVyc0FwcC9zZXJ2aWNlcy9tb2RhbFNlcnZpY2UnO1xyXG5pbXBvcnQgJy4uL2FwcC9jdXN0b21lcnNBcHAvY29udHJvbGxlcnMvY3VzdG9tZXJzL2N1c3RvbWVyRWRpdENvbnRyb2xsZXInXHJcbmltcG9ydCAnLi4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9jdXN0b21lcnMvY3VzdG9tZXJPcmRlcnNDb250cm9sbGVyJztcclxuaW1wb3J0ICcuLi9hcHAvY3VzdG9tZXJzQXBwL2NvbnRyb2xsZXJzL2N1c3RvbWVycy9jdXN0b21lcnNDb250cm9sbGVyJztcclxuaW1wb3J0ICcuLi9hcHAvY3VzdG9tZXJzQXBwL2NvbnRyb2xsZXJzL29yZGVycy9vcmRlckNoaWxkQ29udHJvbGxlcic7XHJcbmltcG9ydCAnLi4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9vcmRlcnMvb3JkZXJzQ29udHJvbGxlcic7XHJcbmltcG9ydCAnLi4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9hYm91dENvbnRyb2xsZXInO1xyXG5pbXBvcnQgJy4uL2FwcC9jdXN0b21lcnNBcHAvY29udHJvbGxlcnMvbmF2YmFyQ29udHJvbGxlcic7XHJcbmltcG9ydCAnLi4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9vcmRlcnMvb3JkZXJDaGlsZENvbnRyb2xsZXInO1xyXG5pbXBvcnQgJy4uL2FwcC9jdXN0b21lcnNBcHAvY29udHJvbGxlcnMvbG9naW5Db250cm9sbGVyJztcclxuXHJcbi8vIC8qKlxyXG4vLyAgKiAgSW1wb3J0IG1vZHVsZSB0byBiZSBib290c3RyYXBwZWRcclxuLy8gICovXHJcbi8vIGltcG9ydCB7IG1vZHVsZU5hbWUgYXMgYXBwTW9kdWxlIH0gZnJvbSAnLi9hcHAvYXBwJztcclxuXHJcbi8vIC8qKlxyXG4vLyAgKiBCb290c3RyYXAgdGhlIGFwcGxpY2F0aW9uIHVzaW5nIHRoZSBpbXBvcnRlZCBtb2R1bGVOYW1lXHJcbi8vICAqL1xyXG4vLyBjb25zdCBib290c3RyYXBNb2R1bGVOYW1lID0gYW5ndWxhci5tb2R1bGUoJ2FwcGxpY2F0aW9uLmJvb3RzdHJhcCcsIFtcclxuLy8gICBhcHBNb2R1bGVcclxuLy8gXS5uYW1lO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9