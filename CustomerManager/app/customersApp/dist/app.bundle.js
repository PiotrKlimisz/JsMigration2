!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=20)}([function(e,t,r){"use strict";var n;(n=function(e){var t=this;function r(e){for(var r=0,n=0;n<e.orders.length;n++){r+=e.orders[n].orderTotal}t.ordersTotal=r}t.orderby="product",t.reverse=!1,t.ordersTotal=0,t.customer,e.customer?(t.customer=e.customer,r(e.customer)):e.$on("customer",function(e,n){t.customer=n,r(n)}),t.setOrder=function(e){e===t.orderby&&(t.reverse=!t.reverse),t.orderby=e}}).$inject=["$scope"],angular.module("customersApp").controller("OrderChildController",n)},function(e,t,r){"use strict";var n;(n=angular.module("customersApp",["ngRoute","ngAnimate","wc.directives","ui.bootstrap","breeze.angular"])).config(["$routeProvider",function(e){var t="/app/customersApp/views/";e.when("/customers",{controller:"CustomersController",templateUrl:t+"customers/customers.html",controllerAs:"vm"}).when("/customerorders/:customerId",{controller:"CustomerOrdersController",templateUrl:t+"customers/customerOrders.html",controllerAs:"vm"}).when("/customeredit/:customerId",{controller:"CustomerEditController",templateUrl:t+"customers/customerEdit.html",controllerAs:"vm",secure:!0}).when("/orders",{controller:"OrdersController",templateUrl:t+"orders/orders.html",controllerAs:"vm"}).when("/about",{controller:"AboutController",templateUrl:t+"about.html",controllerAs:"vm"}).when("/login/:redirect*?",{controller:"LoginController",templateUrl:t+"login.html",controllerAs:"vm"}).otherwise({redirectTo:"/customers"})}]),n.run(["$rootScope","$location","authService",function(e,t,r){e.$on("$routeChangeStart",function(t,n,o){n&&n.$$route&&n.$$route.secure&&(r.user.isAuthenticated||e.$evalAsync(function(){r.redirectToLogin()}))})}])},function(e,t,r){"use strict";var n;(n=function(e,t,r){var n=this,o="/";n.email=null,n.password=null,n.errorMessage=null,n.login=function(){r.login(n.email,n.password).then(function(r){r?(r&&t&&t.redirect&&(o+=t.redirect),e.path(o)):n.errorMessage="Unable to login"})}}).$inject=["$location","$routeParams","authService"],angular.module("customersApp").controller("LoginController",n)},function(e,t,r){"use strict";var n;(n=function(e,t,r,n){var o=this;function u(){var e="/login"+t.$$path;t.replace(),t.path(e)}function s(){o.loginLogoutText=n.user.isAuthenticated?"Logout":"Login"}o.isCollapsed=!1,o.appTitle=r.useBreeze?"Customer Management Breeze":"Customer Management",o.highlight=function(e){return t.path().substr(0,e.length)===e},o.loginOrOut=function(){s(),n.user.isAuthenticated&&n.logout().then(function(){t.path("/")}),u()},e.$on("loginStatusChanged",function(e){s()}),e.$on("redirectToLogin",function(){u()}),s()}).$inject=["$scope","$location","config","authService"],angular.module("customersApp").controller("NavbarController",n)},function(e,t,r){"use strict";var n;(n=function(){}).$inject=[],angular.module("customersApp").controller("AboutController",n)},function(e,t,r){"use strict";var n;(n=function(e,t,r){var n=this;function o(t){n.filteredCustomers=e("nameProductFilter")(n.customers,t),n.filteredCount=n.filteredCustomers.length}function u(){r.getCustomers(n.currentPage-1,n.pageSize).then(function(e){n.totalRecords=e.totalRecords,n.customers=e.results,o("")},function(e){t.alert(e.message)})}n.customers=[],n.filteredCustomers,n.filteredCount,n.totalRecords=0,n.pageSize=10,n.currentPage=1,u(),n.pageChanged=function(e){n.currentPage=e,u()},n.searchTextChanged=function(){o(n.searchText)}}).$inject=["$filter","$window","dataService"],angular.module("customersApp").controller("OrdersController",n)},function(e,t){var r;(r=function(e,t,r,n,o,u,s){var a=this;function i(){u.getCustomersSummary(a.currentPage-1,a.pageSize).then(function(e){a.totalRecords=e.totalRecords,a.customers=e.results,c(""),n(function(){a.cardAnimationClass=""},1e3)},function(e){r.alert("Sorry, an error occurred: "+e.data.message)})}function c(e){a.filteredCustomers=t("nameCityStateFilter")(a.customers,e),a.filteredCount=a.filteredCustomers.length}a.customers=[],a.filteredCustomers=[],a.filteredCount=0,a.orderby="lastName",a.reverse=!1,a.searchText=null,a.cardAnimationClass=".card-animation",a.totalRecords=0,a.pageSize=10,a.currentPage=1,a.pageChanged=function(e){a.currentPage=e,i()},a.deleteCustomer=function(t){if(o.user.isAuthenticated){var n=function(e){for(var t=0;t<a.customers.length;t++){var r=a.customers[t];if(r.id===e)return r}return null}(t),i={closeButtonText:"Cancel",actionButtonText:"Delete Customer",headerText:"Delete "+(n.firstName+" "+n.lastName)+"?",bodyText:"Are you sure you want to delete this customer?"};s.showModal({},i).then(function(e){"ok"===e&&u.deleteCustomer(t).then(function(){for(var e=0;e<a.customers.length;e++)if(a.customers[e].id===t){a.customers.splice(e,1);break}c(a.searchText)},function(e){r.alert("Error deleting customer: "+e.message)})})}else e.path(o.loginPath+e.$$path)},a.DisplayModeEnum={Card:0,List:1},a.changeDisplayMode=function(e){switch(e){case a.DisplayModeEnum.Card:a.listDisplayModeEnabled=!1;break;case a.DisplayModeEnum.List:a.listDisplayModeEnabled=!0}},a.navigate=function(t){e.path(t)},a.setOrder=function(e){e===a.orderby&&(a.reverse=!a.reverse),a.orderby=e},a.searchTextChanged=function(){c(a.searchText)},i()}).$inject=["$location","$filter","$window","$timeout","authService","dataService","modalService"],angular.module("customersApp").controller("CustomersController",r)},function(e,t,r){"use strict";var n;(n=function(e,t,r,n){var o=this,u=t.customerId?parseInt(t.customerId):0;o.customer={},o.ordersTotal=0,u>0&&n.getCustomer(u).then(function(t){o.customer=t,e.$broadcast("customer",t)},function(e){r.alert("Sorry, an error occurred: "+e.message)})}).$inject=["$scope","$routeParams","$window","dataService"],angular.module("customersApp").controller("CustomerOrdersController",n)},function(e,t){var r;(r=function(e,t,r,n,o,u,s){var a,i,c=this,l=r.customerId?parseInt(r.customerId):0;function d(e,r,n){if(c.editForm&&c.editForm.$dirty){s.showModal({},{closeButtonText:"Cancel",actionButtonText:"Ignore Changes",headerText:"Unsaved Changes",bodyText:"You have unsaved changes. Leave the page?"}).then(function(e){"ok"===e&&(i(),t.path(t.url(r).hash()))}),e.preventDefault()}}function m(){e.editForm.$dirty=!1,c.updateStatus=!0,c.title="Edit",c.buttonText="Update",p()}function f(e){c.errorMessage=e.message,p()}function p(){a=n(function(){n.cancel(a),c.errorMessage="",c.updateStatus=!1},3e3)}c.customer={},c.states=[],c.title=l>0?"Edit":"Add",c.buttonText=l>0?"Update":"Add",c.updateStatus=!1,c.errorMessage="",c.isStateSelected=function(e,t){return e===t},c.saveCustomer=function(){e.editForm.$valid&&(c.customer.id?u.updateCustomer(c.customer).then(m,f):u.insertCustomer(c.customer).then(m,f))},c.deleteCustomer=function(){var e={closeButtonText:"Cancel",actionButtonText:"Delete Customer",headerText:"Delete "+(c.customer.firstName+" "+c.customer.lastName)+"?",bodyText:"Are you sure you want to delete this customer?"};s.showModal({},e).then(function(e){"ok"===e&&u.deleteCustomer(c.customer.id).then(function(){i(),t.path("/customers")},f)})},u.getStates().then(function(e){c.states=e},f).then(function(){l>0?u.getCustomer(l).then(function(e){c.customer=e},f):u.newCustomer().then(function(e){c.customer=e})}),i=e.$on("$locationChangeStart",d)}).$inject=["$scope","$location","$routeParams","$timeout","config","dataService","modalService"],angular.module("customersApp").controller("CustomerEditController",r)},function(e,t,r){"use strict";var n;(n=function(e){var t={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"/app/customersApp/partials/modal.html"},r={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"Perform this action?"};this.showModal=function(e,t){return e||(e={}),e.backdrop="static",this.show(e,t)},this.show=function(n,o){var u={},s={};return angular.extend(u,t,n),angular.extend(s,r,o),u.controller||(u.controller=function(e,t){e.modalOptions=s,e.modalOptions.ok=function(e){t.close("ok")},e.modalOptions.close=function(e){t.close("cancel")}},u.controller.$inject=["$scope","$modalInstance"]),e.open(u).result}}).$inject=["$modal"],angular.module("customersApp").service("modalService",n)},function(e,t,r){"use strict";var n;(n=function(e,t,r){return e.useBreeze?r:t}).$inject=["config","customersService","customersBreezeService"],angular.module("customersApp").factory("dataService",n)},function(e,t,r){"use strict";var n;(n=function(e,t){var r="/api/dataservice/",n={};function o(e){for(var t=e.length,r=0;r<t;r++){var n=e[r];if(n.orders){for(var o=n.orders.length,u=0;u<o;u++){var a=n.orders[u];a.orderTotal=a.quantity*a.price}n.ordersTotal=s(n)}}}function u(t,n,u){var s=t;return s+=3==arguments.length?function(e,t){return"?$top="+t+"&$skip="+e*t}(n,u):"",e.get(r+s).then(function(e){var t=e.data;return o(t),{totalRecords:parseInt(e.headers("X-InlineCount")),results:t}})}function s(e){for(var t=0,r=e.orders,n=r.length,o=0;o<n;o++)t+=r[o].orderTotal;return t}return n.getCustomers=function(e,t){return u("customers",e,t)},n.getCustomersSummary=function(e,t){return u("customersSummary",e,t)},n.getStates=function(){return e.get(r+"states").then(function(e){return e.data})},n.checkUniqueValue=function(t,n,o){return t||(t=0),e.get(r+"checkUnique/"+t+"?property="+n+"&value="+escape(o)).then(function(e){return e.data.status})},n.insertCustomer=function(t){return e.post(r+"postCustomer",t).then(function(e){return t.id=e.data.id,e.data})},n.newCustomer=function(){return t.when({id:0})},n.updateCustomer=function(t){return e.put(r+"putCustomer/"+t.id,t).then(function(e){return e.data})},n.deleteCustomer=function(t){return e.delete(r+"deleteCustomer/"+t).then(function(e){return e.data})},n.getCustomer=function(t){return e.get(r+"customerById/"+t).then(function(e){return o([e.data]),e.data})},n}).$inject=["$http","$q"],angular.module("customersApp").factory("customersService",n)},function(e,t,r){"use strict";var n;(n=function(e,t,r){var n={},o=e.EntityQuery;e.config.initializeAdapterInstance("modelLibrary","backingStore",!0),e.NamingConvention.camelCase.setAsDefault();var u="breeze/breezedataservice",s=new e.EntityManager(u);function a(e,t){return e.using(s).execute().then(function(e,r,n){return t?e.results[0]:e.results},function(e){r.alert(e.message)})}function i(e,t,n,u){var a=o.from(e).skip(n*u).take(u).inlineCount(!0);return t&&""!=t&&(a=a.expand(t)),a.using(s).execute().then(function(e){return{totalRecords:parseInt(e.inlineCount),results:e.results}},function(e){r.alert("Error "+e.message)})}n.getCustomers=function(e,t){return i("Customers","orders",e,t)},n.getCustomersSummary=function(e,t){return i("CustomersSummary","",e,t)},n.getStates=function(){return function(e,t){var r=o.from(e);t&&(r=r.expand(t));return a(r)}("States")},n.getCustomer=function(e){return a(o.from("Customers").where("id","==",e).expand("orders, state"),!0)},n.checkUniqueValue=function(t,r,n){var u=new e.Predicate(r,"==",n),a=t?u.and(new e.Predicate("id","!=",t)):u;return o.from("Customers").where(a).take(0).inlineCount().using(s).execute().then(function(e){return!(!e||0!=e.inlineCount)})},n.insertCustomer=function(e){return s.saveChanges()},n.newCustomer=function(){return(e=s.metadataStore,e.hasMetadataFor(u)?t.when(!0):e.fetchMetadata(u)).then(function(){return s.createEntity("Customer",{firstName:"",lastName:""})});var e},n.deleteCustomer=function(t){if(!t)return r.alert("ID was null - cannot delete"),null;var n=s.getEntityByKey("Customer",t);n?(n.orders.slice().forEach(function(e){s.detachEntity(e)}),n.entityAspect.setDeleted()):n=s.createEntity("Customer",{id:t,gender:"Male"},e.EntityState.Deleted);return s.saveChanges()},n.updateCustomer=function(e){return s.saveChanges()};return s.metadataStore.registerEntityTypeCtor("Order",function(){},function(e){e.orderTotal=e.quantity*e.price}),s.metadataStore.registerEntityTypeCtor("Customer",function(){},function(e){e.ordersTotal=function(e){for(var t=0,r=e.orders,n=r.length,o=0;o<n;o++)t+=r[o].orderTotal;return t}(e)}),n}).$inject=["breeze","$q","$window"],angular.module("customersApp").factory("customersBreezeService",n)},function(e,t,r){"use strict";angular.module("customersApp").config(["$httpProvider",function(e){var t=function(e,t){var r=function(e){return e},n=function(r){return 401===r.status?(t.$broadcast("redirectToLogin",null),e.reject(r)):e.reject(r)};return function(e){return e.then(r,n)}};t.$inject=["$q","$rootScope"],e.interceptors.push(t)}])},function(e,t,r){"use strict";var n;(n=function(e,t){var r={loginPath:"/login",user:{isAuthenticated:!1,roles:null}};function n(e){r.user.isAuthenticated=e,t.$broadcast("loginStatusChanged",e)}return r.login=function(t,r){return e.post("/api/dataservice/login",{userLogin:{userName:t,password:r}}).then(function(e){var t=e.data.status;return n(t),t})},r.logout=function(){return e.post("/api/dataservice/logout").then(function(e){var t=!e.data.status;return n(t),t})},r.redirectToLogin=function(){t.$broadcast("redirectToLogin",null)},r}).$inject=["$http","$rootScope"],angular.module("customersApp").factory("authService",n)},function(e,t,r){"use strict";angular.module("customersApp").value("config",{useBreeze:!1})},function(e,t,r){"use strict";angular.module("customersApp").filter("nameProductFilter",function(){function e(e,t){if(e.orders)for(var r=0;r<e.orders.length;r++)if(e.orders[r].product.toLowerCase().indexOf(t)>-1)return!0;return!1}return function(t,r){if(!r||!t)return t;var n=[];r=r.toLowerCase();for(var o=0;o<t.length;o++){var u=t[o];(u.firstName.toLowerCase().indexOf(r)>-1||u.lastName.toLowerCase().indexOf(r)>-1||e(u,r))&&n.push(u)}return n}})},function(e,t,r){"use strict";angular.module("customersApp").filter("nameCityStateFilter",function(){return function(e,t){if(!t)return e;var r=[];t=t.toLowerCase();for(var n=0;n<e.length;n++){var o=e[n];(o.firstName.toLowerCase().indexOf(t)>-1||o.lastName.toLowerCase().indexOf(t)>-1||o.city.toLowerCase().indexOf(t)>-1||o.state.name.toLowerCase().indexOf(t)>-1)&&r.push(o)}return r}})},function(e,t,r){"use strict";var n;(n=function(e,t){return{restrict:"A",require:"ngModel",link:function(r,n,o,u){u.$asyncValidators.unique=function(r,n){var u=e.defer(),s=r||n,a=o.wcUniqueKey,i=o.wcUniqueProperty;return a&&i?(t.checkUniqueValue(a,i,s).then(function(e){e?u.resolve():u.reject()}),u.promise):e.when(!0)}}}}).$inject=["$q","dataService"],angular.module("customersApp").directive("wcUnique",n)},function(e,t,r){"use strict";angular.module("customersApp").animation(".card-animation",function(){return{enter:function(e,t){var r=100*Math.random();TweenMax.set(e,{opacity:0,left:r+"px"});var n=Math.random();TweenMax.to(e,.5,{opacity:1,left:"0px",ease:Back.easeInOut,delay:n,onComplete:t})},leave:function(e,t){TweenMax.to(e,.5,{opacity:0,left:"-50px",onComplete:t})}}})},function(e,t,r){"use strict";r.r(t);r(1),r(19),r(18),r(17),r(16),r(15),r(14),r(13),r(12),r(11),r(10),r(9),r(8),r(7),r(6),r(0),r(5),r(4),r(3),r(2)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9vcmRlcnMvb3JkZXJDaGlsZENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9sb2dpbkNvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9uYXZiYXJDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvY29udHJvbGxlcnMvYWJvdXRDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvY29udHJvbGxlcnMvb3JkZXJzL29yZGVyc0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9jdXN0b21lcnMvY3VzdG9tZXJzQ29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9hcHAvY3VzdG9tZXJzQXBwL2NvbnRyb2xsZXJzL2N1c3RvbWVycy9jdXN0b21lck9yZGVyc0NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9jb250cm9sbGVycy9jdXN0b21lcnMvY3VzdG9tZXJFZGl0Q29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9hcHAvY3VzdG9tZXJzQXBwL3NlcnZpY2VzL21vZGFsU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvY3VzdG9tZXJzQXBwL3NlcnZpY2VzL2RhdGFTZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvc2VydmljZXMvY3VzdG9tZXJzU2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvY3VzdG9tZXJzQXBwL3NlcnZpY2VzL2N1c3RvbWVyc0JyZWV6ZVNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9zZXJ2aWNlcy9odHRwSW50ZXJjZXB0b3JzLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvc2VydmljZXMvYXV0aFNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9zZXJ2aWNlcy9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vYXBwL2N1c3RvbWVyc0FwcC9maWx0ZXJzL25hbWVQcm9kdWN0RmlsdGVyLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvZmlsdGVycy9uYW1lQ2l0eVN0YXRlRmlsdGVyLmpzIiwid2VicGFjazovLy8uL2FwcC9jdXN0b21lcnNBcHAvZGlyZWN0aXZlcy93Y1VuaXF1ZS5qcyIsIndlYnBhY2s6Ly8vLi9hcHAvY3VzdG9tZXJzQXBwL2FuaW1hdGlvbnMvbGlzdEFuaW1hdGlvbnMuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIk9yZGVyQ2hpbGRDb250cm9sbGVyIiwiJHNjb3BlIiwidm0iLCJ0aGlzIiwidXBkYXRlVG90YWwiLCJjdXN0b21lciIsInRvdGFsIiwib3JkZXJzIiwibGVuZ3RoIiwib3JkZXJUb3RhbCIsIm9yZGVyc1RvdGFsIiwib3JkZXJieSIsInJldmVyc2UiLCIkb24iLCJldmVudCIsInNldE9yZGVyIiwiJGluamVjdCIsImFuZ3VsYXIiLCJjb250cm9sbGVyIiwiYXBwIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ2aWV3QmFzZSIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXJBcyIsInNlY3VyZSIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiYXV0aFNlcnZpY2UiLCJuZXh0IiwiY3VycmVudCIsIiQkcm91dGUiLCJ1c2VyIiwiaXNBdXRoZW50aWNhdGVkIiwiJGV2YWxBc3luYyIsInJlZGlyZWN0VG9Mb2dpbiIsIkxvZ2luQ29udHJvbGxlciIsIiRyb3V0ZVBhcmFtcyIsInBhdGgiLCJlbWFpbCIsInBhc3N3b3JkIiwiZXJyb3JNZXNzYWdlIiwibG9naW4iLCJ0aGVuIiwic3RhdHVzIiwicmVkaXJlY3QiLCJOYXZiYXJDb250cm9sbGVyIiwiJCRwYXRoIiwicmVwbGFjZSIsInNldExvZ2luTG9nb3V0VGV4dCIsImxvZ2luTG9nb3V0VGV4dCIsImlzQ29sbGFwc2VkIiwiYXBwVGl0bGUiLCJ1c2VCcmVlemUiLCJoaWdobGlnaHQiLCJzdWJzdHIiLCJsb2dpbk9yT3V0IiwibG9nb3V0IiwibG9nZ2VkSW4iLCJBYm91dENvbnRyb2xsZXIiLCJPcmRlcnNDb250cm9sbGVyIiwiJGZpbHRlciIsIiR3aW5kb3ciLCJkYXRhU2VydmljZSIsImZpbHRlckN1c3RvbWVyc1Byb2R1Y3RzIiwiZmlsdGVyVGV4dCIsImZpbHRlcmVkQ3VzdG9tZXJzIiwiY3VzdG9tZXJzIiwiZmlsdGVyZWRDb3VudCIsImdldEN1c3RvbWVycyIsImN1cnJlbnRQYWdlIiwicGFnZVNpemUiLCJkYXRhIiwidG90YWxSZWNvcmRzIiwicmVzdWx0cyIsImVycm9yIiwiYWxlcnQiLCJtZXNzYWdlIiwicGFnZUNoYW5nZWQiLCJwYWdlIiwic2VhcmNoVGV4dENoYW5nZWQiLCJzZWFyY2hUZXh0IiwiQ3VzdG9tZXJzQ29udHJvbGxlciIsIiR0aW1lb3V0IiwibW9kYWxTZXJ2aWNlIiwiZ2V0Q3VzdG9tZXJzU3VtbWFyeSIsImZpbHRlckN1c3RvbWVycyIsImNhcmRBbmltYXRpb25DbGFzcyIsImRlbGV0ZUN1c3RvbWVyIiwiaWQiLCJjdXN0IiwiZ2V0Q3VzdG9tZXJCeUlkIiwibW9kYWxPcHRpb25zIiwiY2xvc2VCdXR0b25UZXh0IiwiYWN0aW9uQnV0dG9uVGV4dCIsImhlYWRlclRleHQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImJvZHlUZXh0Iiwic2hvd01vZGFsIiwicmVzdWx0Iiwic3BsaWNlIiwibG9naW5QYXRoIiwiRGlzcGxheU1vZGVFbnVtIiwiQ2FyZCIsIkxpc3QiLCJjaGFuZ2VEaXNwbGF5TW9kZSIsImRpc3BsYXlNb2RlIiwibGlzdERpc3BsYXlNb2RlRW5hYmxlZCIsIm5hdmlnYXRlIiwidXJsIiwiQ3VzdG9tZXJPcmRlcnNDb250cm9sbGVyIiwiY3VzdG9tZXJJZCIsInBhcnNlSW50IiwiZ2V0Q3VzdG9tZXIiLCIkYnJvYWRjYXN0IiwiQ3VzdG9tZXJFZGl0Q29udHJvbGxlciIsInRpbWVyIiwib25Sb3V0ZUNoYW5nZU9mZiIsInJvdXRlQ2hhbmdlIiwibmV3VXJsIiwib2xkVXJsIiwiZWRpdEZvcm0iLCIkZGlydHkiLCJoYXNoIiwicHJldmVudERlZmF1bHQiLCJwcm9jZXNzU3VjY2VzcyIsInVwZGF0ZVN0YXR1cyIsInRpdGxlIiwiYnV0dG9uVGV4dCIsInN0YXJ0VGltZXIiLCJwcm9jZXNzRXJyb3IiLCJjYW5jZWwiLCJzdGF0ZXMiLCJpc1N0YXRlU2VsZWN0ZWQiLCJjdXN0b21lclN0YXRlSWQiLCJzdGF0ZUlkIiwic2F2ZUN1c3RvbWVyIiwiJHZhbGlkIiwidXBkYXRlQ3VzdG9tZXIiLCJpbnNlcnRDdXN0b21lciIsImdldFN0YXRlcyIsIm5ld0N1c3RvbWVyIiwiJG1vZGFsIiwibW9kYWxEZWZhdWx0cyIsImJhY2tkcm9wIiwia2V5Ym9hcmQiLCJtb2RhbEZhZGUiLCJjdXN0b21Nb2RhbERlZmF1bHRzIiwiY3VzdG9tTW9kYWxPcHRpb25zIiwic2hvdyIsInRlbXBNb2RhbERlZmF1bHRzIiwidGVtcE1vZGFsT3B0aW9ucyIsImV4dGVuZCIsIiRtb2RhbEluc3RhbmNlIiwib2siLCJjbG9zZSIsIm9wZW4iLCJzZXJ2aWNlIiwiY3VzdG9tZXJzU2VydmljZSIsImN1c3RvbWVyc0JyZWV6ZVNlcnZpY2UiLCJmYWN0b3J5IiwiY3VzdG9tZXJzRmFjdG9yeSIsIiRodHRwIiwiJHEiLCJzZXJ2aWNlQmFzZSIsImV4dGVuZEN1c3RvbWVycyIsImN1c3RzTGVuIiwib3JkZXJzTGVuIiwiaiIsIm9yZGVyIiwicXVhbnRpdHkiLCJwcmljZSIsImdldFBhZ2VkUmVzb3VyY2UiLCJiYXNlUmVzb3VyY2UiLCJwYWdlSW5kZXgiLCJyZXNvdXJjZSIsImFyZ3VtZW50cyIsImJ1aWxkUGFnaW5nVXJpIiwicmVzcG9uc2UiLCJjdXN0cyIsImhlYWRlcnMiLCJjb3VudCIsImNoZWNrVW5pcXVlVmFsdWUiLCJlc2NhcGUiLCJwb3N0IiwicHV0IiwiZGVsZXRlIiwiYnJlZXplIiwiRW50aXR5UXVlcnkiLCJpbml0aWFsaXplQWRhcHRlckluc3RhbmNlIiwiTmFtaW5nQ29udmVudGlvbiIsImNhbWVsQ2FzZSIsInNldEFzRGVmYXVsdCIsInNlcnZpY2VOYW1lIiwiZW50aXR5TWFuYWdlciIsIkVudGl0eU1hbmFnZXIiLCJleGVjdXRlUXVlcnkiLCJxdWVyeSIsInRha2VGaXJzdCIsInVzaW5nIiwiZXhlY3V0ZSIsImVudGl0eU5hbWUiLCJleHBhbmQiLCJmcm9tIiwic2tpcCIsInRha2UiLCJpbmxpbmVDb3VudCIsImdldEFsbCIsIndoZXJlIiwicHJvcGVydHlQcmVkaWNhdGUiLCJQcmVkaWNhdGUiLCJwcmVkaWNhdGUiLCJhbmQiLCJzYXZlQ2hhbmdlcyIsInN0b3JlIiwibWV0YWRhdGFTdG9yZSIsImhhc01ldGFkYXRhRm9yIiwiZmV0Y2hNZXRhZGF0YSIsImNyZWF0ZUVudGl0eSIsImdldEVudGl0eUJ5S2V5Iiwic2xpY2UiLCJmb3JFYWNoIiwiZGV0YWNoRW50aXR5IiwiZW50aXR5QXNwZWN0Iiwic2V0RGVsZXRlZCIsImdlbmRlciIsIkVudGl0eVN0YXRlIiwiRGVsZXRlZCIsInJlZ2lzdGVyRW50aXR5VHlwZUN0b3IiLCIkaHR0cFByb3ZpZGVyIiwiaHR0cEludGVyY2VwdG9yNDAxIiwic3VjY2VzcyIsInJlcyIsInJlamVjdCIsInByb21pc2UiLCJpbnRlcmNlcHRvcnMiLCJwdXNoIiwiYXV0aEZhY3RvcnkiLCJyb2xlcyIsImNoYW5nZUF1dGgiLCJ1c2VyTG9naW4iLCJ1c2VyTmFtZSIsImZpbHRlciIsIm1hdGNoZXNQcm9kdWN0IiwiZmlsdGVyVmFsdWUiLCJwcm9kdWN0IiwidG9Mb3dlckNhc2UiLCJpbmRleE9mIiwibWF0Y2hlcyIsImNpdHkiLCJzdGF0ZSIsIndjVW5pcXVlRGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHJzIiwibmdNb2RlbCIsIiRhc3luY1ZhbGlkYXRvcnMiLCJ1bmlxdWUiLCJtb2RlbFZhbHVlIiwidmlld1ZhbHVlIiwiZGVmZXJyZWQiLCJkZWZlciIsImN1cnJlbnRWYWx1ZSIsImtleSIsIndjVW5pcXVlS2V5Iiwid2NVbmlxdWVQcm9wZXJ0eSIsInJlc29sdmUiLCJkaXJlY3RpdmUiLCJhbmltYXRpb24iLCJlbnRlciIsImRvbmUiLCJyYW5kb20iLCJNYXRoIiwiVHdlZW5NYXgiLCJzZXQiLCJvcGFjaXR5IiwibGVmdCIsInJhbmRvbTIiLCJ0byIsImVhc2UiLCJCYWNrIiwiZWFzZUluT3V0IiwiZGVsYXkiLCJvbkNvbXBsZXRlIiwibGVhdmUiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYs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YnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyMCk7XG4iLCIoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIGluamVjdFBhcmFtcyA9IFsnJHNjb3BlJ107XHJcblxyXG4gICAgdmFyIE9yZGVyQ2hpbGRDb250cm9sbGVyID0gZnVuY3Rpb24gKCRzY29wZSkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZtLm9yZGVyYnkgPSAncHJvZHVjdCc7XHJcbiAgICAgICAgdm0ucmV2ZXJzZSA9IGZhbHNlO1xyXG4gICAgICAgIHZtLm9yZGVyc1RvdGFsID0gMC4wMDtcclxuICAgICAgICB2bS5jdXN0b21lcjtcclxuXHJcbiAgICAgICAgaW5pdCgpO1xyXG5cclxuICAgICAgICB2bS5zZXRPcmRlciA9IGZ1bmN0aW9uIChvcmRlcmJ5KSB7XHJcbiAgICAgICAgICAgIGlmIChvcmRlcmJ5ID09PSB2bS5vcmRlcmJ5KSB7XHJcbiAgICAgICAgICAgICAgICB2bS5yZXZlcnNlID0gIXZtLnJldmVyc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdm0ub3JkZXJieSA9IG9yZGVyYnk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5jdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgdm0uY3VzdG9tZXIgPSAkc2NvcGUuY3VzdG9tZXI7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbCgkc2NvcGUuY3VzdG9tZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRvbignY3VzdG9tZXInLCBmdW5jdGlvbiAoZXZlbnQsIGN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uY3VzdG9tZXIgPSBjdXN0b21lcjtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVUb3RhbChjdXN0b21lcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlVG90YWwoY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsID0gMC4wMDtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXN0b21lci5vcmRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcmRlciA9IGN1c3RvbWVyLm9yZGVyc1tpXTtcclxuICAgICAgICAgICAgICAgIHRvdGFsICs9IG9yZGVyLm9yZGVyVG90YWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdm0ub3JkZXJzVG90YWwgPSB0b3RhbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIE9yZGVyQ2hpbGRDb250cm9sbGVyLiRpbmplY3QgPSBpbmplY3RQYXJhbXM7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbWVyc0FwcCcpLmNvbnRyb2xsZXIoJ09yZGVyQ2hpbGRDb250cm9sbGVyJywgT3JkZXJDaGlsZENvbnRyb2xsZXIpO1xyXG5cclxufSgpKTsiLCIoZnVuY3Rpb24oKSB7XHJcblxyXG4gIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tZXJzQXBwJywgW1xyXG4gICAgJ25nUm91dGUnLFxyXG4gICAgJ25nQW5pbWF0ZScsXHJcbiAgICAnd2MuZGlyZWN0aXZlcycsXHJcbiAgICAndWkuYm9vdHN0cmFwJyxcclxuICAgICdicmVlemUuYW5ndWxhcidcclxuICBdKTtcclxuXHJcbiAgYXBwLmNvbmZpZyhbXHJcbiAgICAnJHJvdXRlUHJvdmlkZXInLFxyXG4gICAgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICAgdmFyIHZpZXdCYXNlID0gJy9hcHAvY3VzdG9tZXJzQXBwL3ZpZXdzLyc7XHJcblxyXG4gICAgICAkcm91dGVQcm92aWRlclxyXG4gICAgICAgIC53aGVuKCcvY3VzdG9tZXJzJywge1xyXG4gICAgICAgICAgY29udHJvbGxlcjogJ0N1c3RvbWVyc0NvbnRyb2xsZXInLFxyXG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdCYXNlICsgJ2N1c3RvbWVycy9jdXN0b21lcnMuaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVuKCcvY3VzdG9tZXJvcmRlcnMvOmN1c3RvbWVySWQnLCB7XHJcbiAgICAgICAgICBjb250cm9sbGVyOiAnQ3VzdG9tZXJPcmRlcnNDb250cm9sbGVyJyxcclxuICAgICAgICAgIHRlbXBsYXRlVXJsOiB2aWV3QmFzZSArICdjdXN0b21lcnMvY3VzdG9tZXJPcmRlcnMuaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVuKCcvY3VzdG9tZXJlZGl0LzpjdXN0b21lcklkJywge1xyXG4gICAgICAgICAgY29udHJvbGxlcjogJ0N1c3RvbWVyRWRpdENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdCYXNlICsgJ2N1c3RvbWVycy9jdXN0b21lckVkaXQuaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgICBzZWN1cmU6IHRydWUgLy9UaGlzIHJvdXRlIHJlcXVpcmVzIGFuIGF1dGhlbnRpY2F0ZWQgdXNlclxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLndoZW4oJy9vcmRlcnMnLCB7XHJcbiAgICAgICAgICBjb250cm9sbGVyOiAnT3JkZXJzQ29udHJvbGxlcicsXHJcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld0Jhc2UgKyAnb3JkZXJzL29yZGVycy5odG1sJyxcclxuICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLndoZW4oJy9hYm91dCcsIHtcclxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdBYm91dENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgdGVtcGxhdGVVcmw6IHZpZXdCYXNlICsgJ2Fib3V0Lmh0bWwnLFxyXG4gICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXHJcbiAgICAgICAgfSlcclxuICAgICAgICAud2hlbignL2xvZ2luLzpyZWRpcmVjdCo/Jywge1xyXG4gICAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsXHJcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogdmlld0Jhc2UgKyAnbG9naW4uaHRtbCcsXHJcbiAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vdGhlcndpc2UoeyByZWRpcmVjdFRvOiAnL2N1c3RvbWVycycgfSk7XHJcbiAgICB9XHJcbiAgXSk7XHJcblxyXG4gIGFwcC5ydW4oW1xyXG4gICAgJyRyb290U2NvcGUnLFxyXG4gICAgJyRsb2NhdGlvbicsXHJcbiAgICAnYXV0aFNlcnZpY2UnLFxyXG4gICAgZnVuY3Rpb24oJHJvb3RTY29wZSwgJGxvY2F0aW9uLCBhdXRoU2VydmljZSkge1xyXG4gICAgICAvL0NsaWVudC1zaWRlIHNlY3VyaXR5LiBTZXJ2ZXItc2lkZSBmcmFtZXdvcmsgTVVTVCBhZGQgaXQnc1xyXG4gICAgICAvL293biBzZWN1cml0eSBhcyB3ZWxsIHNpbmNlIGNsaWVudC1iYXNlZCBzZWN1cml0eSBpcyBlYXNpbHkgaGFja2VkXHJcbiAgICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKGV2ZW50LCBuZXh0LCBjdXJyZW50KSB7XHJcbiAgICAgICAgaWYgKG5leHQgJiYgbmV4dC4kJHJvdXRlICYmIG5leHQuJCRyb3V0ZS5zZWN1cmUpIHtcclxuICAgICAgICAgIGlmICghYXV0aFNlcnZpY2UudXNlci5pc0F1dGhlbnRpY2F0ZWQpIHtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGF1dGhTZXJ2aWNlLnJlZGlyZWN0VG9Mb2dpbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICBdKTtcclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIGluamVjdFBhcmFtcyA9IFsnJGxvY2F0aW9uJywgJyRyb3V0ZVBhcmFtcycsICdhdXRoU2VydmljZSddO1xyXG5cclxuICAgIHZhciBMb2dpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsIGF1dGhTZXJ2aWNlKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcyxcclxuICAgICAgICAgICAgcGF0aCA9ICcvJztcclxuXHJcbiAgICAgICAgdm0uZW1haWwgPSBudWxsO1xyXG4gICAgICAgIHZtLnBhc3N3b3JkID0gbnVsbDtcclxuICAgICAgICB2bS5lcnJvck1lc3NhZ2UgPSBudWxsO1xyXG5cclxuICAgICAgICB2bS5sb2dpbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYXV0aFNlcnZpY2UubG9naW4odm0uZW1haWwsIHZtLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uIChzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIC8vJHJvdXRlUGFyYW1zLnJlZGlyZWN0IHdpbGwgaGF2ZSB0aGUgcm91dGVcclxuICAgICAgICAgICAgICAgIC8vdGhleSB3ZXJlIHRyeWluZyB0byBnbyB0byBpbml0aWFsbHlcclxuICAgICAgICAgICAgICAgIGlmICghc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uZXJyb3JNZXNzYWdlID0gJ1VuYWJsZSB0byBsb2dpbic7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgJiYgJHJvdXRlUGFyYW1zICYmICRyb3V0ZVBhcmFtcy5yZWRpcmVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoICsgJHJvdXRlUGFyYW1zLnJlZGlyZWN0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKHBhdGgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IGluamVjdFBhcmFtcztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tZXJzQXBwJylcclxuICAgICAgICAuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgTG9naW5Db250cm9sbGVyKTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgaW5qZWN0UGFyYW1zID0gWyckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ2NvbmZpZycsICdhdXRoU2VydmljZSddO1xyXG5cclxuICAgIHZhciBOYXZiYXJDb250cm9sbGVyID0gZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCBjb25maWcsIGF1dGhTZXJ2aWNlKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcyxcclxuICAgICAgICAgICAgYXBwVGl0bGUgPSAnQ3VzdG9tZXIgTWFuYWdlbWVudCc7XHJcblxyXG4gICAgICAgIHZtLmlzQ29sbGFwc2VkID0gZmFsc2U7XHJcbiAgICAgICAgdm0uYXBwVGl0bGUgPSAoY29uZmlnLnVzZUJyZWV6ZSkgPyBhcHBUaXRsZSArICcgQnJlZXplJyA6IGFwcFRpdGxlO1xyXG5cclxuICAgICAgICB2bS5oaWdobGlnaHQgPSBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGxvY2F0aW9uLnBhdGgoKS5zdWJzdHIoMCwgcGF0aC5sZW5ndGgpID09PSBwYXRoO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLmxvZ2luT3JPdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNldExvZ2luTG9nb3V0VGV4dCgpO1xyXG4gICAgICAgICAgICB2YXIgaXNBdXRoZW50aWNhdGVkID0gYXV0aFNlcnZpY2UudXNlci5pc0F1dGhlbnRpY2F0ZWQ7XHJcbiAgICAgICAgICAgIGlmIChpc0F1dGhlbnRpY2F0ZWQpIHsgLy9sb2dvdXQgXHJcbiAgICAgICAgICAgICAgICBhdXRoU2VydmljZS5sb2dvdXQoKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH0pOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZWRpcmVjdFRvTG9naW4oKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWRpcmVjdFRvTG9naW4oKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gJy9sb2dpbicgKyAkbG9jYXRpb24uJCRwYXRoO1xyXG4gICAgICAgICAgICAkbG9jYXRpb24ucmVwbGFjZSgpO1xyXG4gICAgICAgICAgICAkbG9jYXRpb24ucGF0aChwYXRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ2xvZ2luU3RhdHVzQ2hhbmdlZCcsIGZ1bmN0aW9uIChsb2dnZWRJbikge1xyXG4gICAgICAgICAgICBzZXRMb2dpbkxvZ291dFRleHQobG9nZ2VkSW4pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdyZWRpcmVjdFRvTG9naW4nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlZGlyZWN0VG9Mb2dpbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRMb2dpbkxvZ291dFRleHQoKSB7XHJcbiAgICAgICAgICAgIHZtLmxvZ2luTG9nb3V0VGV4dCA9IChhdXRoU2VydmljZS51c2VyLmlzQXV0aGVudGljYXRlZCkgPyAnTG9nb3V0JyA6ICdMb2dpbic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXRMb2dpbkxvZ291dFRleHQoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIE5hdmJhckNvbnRyb2xsZXIuJGluamVjdCA9IGluamVjdFBhcmFtcztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tZXJzQXBwJykuY29udHJvbGxlcignTmF2YmFyQ29udHJvbGxlcicsIE5hdmJhckNvbnRyb2xsZXIpO1xyXG5cclxufSgpKTtcclxuIiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgaW5qZWN0UGFyYW1zID0gW107XHJcblxyXG4gICAgdmFyIEFib3V0Q29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIEFib3V0Q29udHJvbGxlci4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5jb250cm9sbGVyKCdBYm91dENvbnRyb2xsZXInLCBBYm91dENvbnRyb2xsZXIpO1xyXG5cclxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBpbmplY3RQYXJhbXMgPSBbJyRmaWx0ZXInLCAnJHdpbmRvdycsICdkYXRhU2VydmljZSddO1xyXG5cclxuICAgIHZhciBPcmRlcnNDb250cm9sbGVyID0gZnVuY3Rpb24gKCRmaWx0ZXIsICR3aW5kb3csIGRhdGFTZXJ2aWNlKSB7XHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuXHJcbiAgICAgICAgdm0uY3VzdG9tZXJzID0gW107XHJcbiAgICAgICAgdm0uZmlsdGVyZWRDdXN0b21lcnM7XHJcbiAgICAgICAgdm0uZmlsdGVyZWRDb3VudDtcclxuXHJcbiAgICAgICAgLy9wYWdpbmdcclxuICAgICAgICB2bS50b3RhbFJlY29yZHMgPSAwO1xyXG4gICAgICAgIHZtLnBhZ2VTaXplID0gMTA7XHJcbiAgICAgICAgdm0uY3VycmVudFBhZ2UgPSAxO1xyXG5cclxuICAgICAgICBpbml0KCk7XHJcblxyXG4gICAgICAgIHZtLnBhZ2VDaGFuZ2VkID0gZnVuY3Rpb24gKHBhZ2UpIHtcclxuICAgICAgICAgICAgdm0uY3VycmVudFBhZ2UgPSBwYWdlO1xyXG4gICAgICAgICAgICBnZXRDdXN0b21lcnMoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2bS5zZWFyY2hUZXh0Q2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZmlsdGVyQ3VzdG9tZXJzUHJvZHVjdHModm0uc2VhcmNoVGV4dCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAgICAgLy9jcmVhdGVXYXRjaGVzKCk7XHJcbiAgICAgICAgICAgIGdldEN1c3RvbWVycygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9mdW5jdGlvbiBjcmVhdGVXYXRjaGVzKCkge1xyXG4gICAgICAgIC8vICAgIC8vV2F0Y2ggc2VhcmNoVGV4dCB2YWx1ZSBhbmQgcGFzcyBpdCBhbmQgdGhlIGN1c3RvbWVycyB0byBuYW1lQ2l0eVN0YXRlRmlsdGVyXHJcbiAgICAgICAgLy8gICAgLy9Eb2luZyB0aGlzIGluc3RlYWQgb2YgYWRkaW5nIHRoZSBmaWx0ZXIgdG8gbmctcmVwZWF0IGFsbG93cyBpdCB0byBvbmx5IGJlIHJ1biBvbmNlIChyYXRoZXIgdGhhbiB0d2ljZSlcclxuICAgICAgICAvLyAgICAvL3doaWxlIGFsc28gYWNjZXNzaW5nIHRoZSBmaWx0ZXJlZCBjb3VudCB2aWEgdm0uZmlsdGVyZWRDb3VudCBhYm92ZVxyXG5cclxuICAgICAgICAvLyAgICAvL0JldHRlciB0byBoYW5kbGUgdGhpcyB1c2luZyBuZy1jaGFuZ2Ugb24gPGlucHV0Pi4gU2VlIHNlYXJjaFRleHRDaGFuZ2VkKCkgZnVuY3Rpb24uXHJcbiAgICAgICAgLy8gICAgJHNjb3BlLiR3YXRjaChcInNlYXJjaFRleHRcIiwgZnVuY3Rpb24gKGZpbHRlclRleHQpIHtcclxuICAgICAgICAvLyAgICAgICAgZmlsdGVyQ3VzdG9tZXJzUHJvZHVjdHMoZmlsdGVyVGV4dCk7XHJcbiAgICAgICAgLy8gICAgfSk7XHJcbiAgICAgICAgLy99XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbHRlckN1c3RvbWVyc1Byb2R1Y3RzKGZpbHRlclRleHQpIHtcclxuICAgICAgICAgICAgdm0uZmlsdGVyZWRDdXN0b21lcnMgPSAkZmlsdGVyKFwibmFtZVByb2R1Y3RGaWx0ZXJcIikodm0uY3VzdG9tZXJzLCBmaWx0ZXJUZXh0KTtcclxuICAgICAgICAgICAgdm0uZmlsdGVyZWRDb3VudCA9IHZtLmZpbHRlcmVkQ3VzdG9tZXJzLmxlbmd0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEN1c3RvbWVycygpIHtcclxuICAgICAgICAgICAgZGF0YVNlcnZpY2UuZ2V0Q3VzdG9tZXJzKHZtLmN1cnJlbnRQYWdlIC0gMSwgdm0ucGFnZVNpemUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLnRvdGFsUmVjb3JkcyA9IGRhdGEudG90YWxSZWNvcmRzO1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLmN1c3RvbWVycyA9IGRhdGEucmVzdWx0cztcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJDdXN0b21lcnNQcm9kdWN0cygnJyk7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAkd2luZG93LmFsZXJ0KGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBPcmRlcnNDb250cm9sbGVyLiRpbmplY3QgPSBpbmplY3RQYXJhbXM7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbWVyc0FwcCcpLmNvbnRyb2xsZXIoJ09yZGVyc0NvbnRyb2xsZXInLCBPcmRlcnNDb250cm9sbGVyKTtcclxuXHJcbn0oKSk7XHJcblxyXG5cclxuXHJcbiIsIu+7vyhmdW5jdGlvbigpIHtcclxuICB2YXIgaW5qZWN0UGFyYW1zID0gW1xyXG4gICAgJyRsb2NhdGlvbicsXHJcbiAgICAnJGZpbHRlcicsXHJcbiAgICAnJHdpbmRvdycsXHJcbiAgICAnJHRpbWVvdXQnLFxyXG4gICAgJ2F1dGhTZXJ2aWNlJyxcclxuICAgICdkYXRhU2VydmljZScsXHJcbiAgICAnbW9kYWxTZXJ2aWNlJ1xyXG4gIF07XHJcblxyXG4gIHZhciBDdXN0b21lcnNDb250cm9sbGVyID0gZnVuY3Rpb24oXHJcbiAgICAkbG9jYXRpb24sXHJcbiAgICAkZmlsdGVyLFxyXG4gICAgJHdpbmRvdyxcclxuICAgICR0aW1lb3V0LFxyXG4gICAgYXV0aFNlcnZpY2UsXHJcbiAgICBkYXRhU2VydmljZSxcclxuICAgIG1vZGFsU2VydmljZVxyXG4gICkge1xyXG4gICAgdmFyIHZtID0gdGhpcztcclxuXHJcbiAgICB2bS5jdXN0b21lcnMgPSBbXTtcclxuICAgIHZtLmZpbHRlcmVkQ3VzdG9tZXJzID0gW107XHJcbiAgICB2bS5maWx0ZXJlZENvdW50ID0gMDtcclxuICAgIHZtLm9yZGVyYnkgPSAnbGFzdE5hbWUnO1xyXG4gICAgdm0ucmV2ZXJzZSA9IGZhbHNlO1xyXG4gICAgdm0uc2VhcmNoVGV4dCA9IG51bGw7XHJcbiAgICB2bS5jYXJkQW5pbWF0aW9uQ2xhc3MgPSAnLmNhcmQtYW5pbWF0aW9uJztcclxuXHJcbiAgICAvL3BhZ2luZ1xyXG4gICAgdm0udG90YWxSZWNvcmRzID0gMDtcclxuICAgIHZtLnBhZ2VTaXplID0gMTA7XHJcbiAgICB2bS5jdXJyZW50UGFnZSA9IDE7XHJcblxyXG4gICAgdm0ucGFnZUNoYW5nZWQgPSBmdW5jdGlvbihwYWdlKSB7XHJcbiAgICAgIHZtLmN1cnJlbnRQYWdlID0gcGFnZTtcclxuICAgICAgZ2V0Q3VzdG9tZXJzU3VtbWFyeSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5kZWxldGVDdXN0b21lciA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgIGlmICghYXV0aFNlcnZpY2UudXNlci5pc0F1dGhlbnRpY2F0ZWQpIHtcclxuICAgICAgICAkbG9jYXRpb24ucGF0aChhdXRoU2VydmljZS5sb2dpblBhdGggKyAkbG9jYXRpb24uJCRwYXRoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBjdXN0ID0gZ2V0Q3VzdG9tZXJCeUlkKGlkKTtcclxuICAgICAgdmFyIGN1c3ROYW1lID0gY3VzdC5maXJzdE5hbWUgKyAnICcgKyBjdXN0Lmxhc3ROYW1lO1xyXG5cclxuICAgICAgdmFyIG1vZGFsT3B0aW9ucyA9IHtcclxuICAgICAgICBjbG9zZUJ1dHRvblRleHQ6ICdDYW5jZWwnLFxyXG4gICAgICAgIGFjdGlvbkJ1dHRvblRleHQ6ICdEZWxldGUgQ3VzdG9tZXInLFxyXG4gICAgICAgIGhlYWRlclRleHQ6ICdEZWxldGUgJyArIGN1c3ROYW1lICsgJz8nLFxyXG4gICAgICAgIGJvZHlUZXh0OiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIGN1c3RvbWVyPydcclxuICAgICAgfTtcclxuXHJcbiAgICAgIG1vZGFsU2VydmljZS5zaG93TW9kYWwoe30sIG1vZGFsT3B0aW9ucykudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICBpZiAocmVzdWx0ID09PSAnb2snKSB7XHJcbiAgICAgICAgICBkYXRhU2VydmljZS5kZWxldGVDdXN0b21lcihpZCkudGhlbihcclxuICAgICAgICAgICAgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2bS5jdXN0b21lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh2bS5jdXN0b21lcnNbaV0uaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZtLmN1c3RvbWVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBmaWx0ZXJDdXN0b21lcnModm0uc2VhcmNoVGV4dCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgJHdpbmRvdy5hbGVydCgnRXJyb3IgZGVsZXRpbmcgY3VzdG9tZXI6ICcgKyBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5EaXNwbGF5TW9kZUVudW0gPSB7XHJcbiAgICAgIENhcmQ6IDAsXHJcbiAgICAgIExpc3Q6IDFcclxuICAgIH07XHJcblxyXG4gICAgdm0uY2hhbmdlRGlzcGxheU1vZGUgPSBmdW5jdGlvbihkaXNwbGF5TW9kZSkge1xyXG4gICAgICBzd2l0Y2ggKGRpc3BsYXlNb2RlKSB7XHJcbiAgICAgICAgY2FzZSB2bS5EaXNwbGF5TW9kZUVudW0uQ2FyZDpcclxuICAgICAgICAgIHZtLmxpc3REaXNwbGF5TW9kZUVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2Ugdm0uRGlzcGxheU1vZGVFbnVtLkxpc3Q6XHJcbiAgICAgICAgICB2bS5saXN0RGlzcGxheU1vZGVFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLm5hdmlnYXRlID0gZnVuY3Rpb24odXJsKSB7XHJcbiAgICAgICRsb2NhdGlvbi5wYXRoKHVybCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLnNldE9yZGVyID0gZnVuY3Rpb24ob3JkZXJieSkge1xyXG4gICAgICBpZiAob3JkZXJieSA9PT0gdm0ub3JkZXJieSkge1xyXG4gICAgICAgIHZtLnJldmVyc2UgPSAhdm0ucmV2ZXJzZTtcclxuICAgICAgfVxyXG4gICAgICB2bS5vcmRlcmJ5ID0gb3JkZXJieTtcclxuICAgIH07XHJcblxyXG4gICAgdm0uc2VhcmNoVGV4dENoYW5nZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgZmlsdGVyQ3VzdG9tZXJzKHZtLnNlYXJjaFRleHQpO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAvL2NyZWF0ZVdhdGNoZXMoKTtcclxuICAgICAgZ2V0Q3VzdG9tZXJzU3VtbWFyeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vZnVuY3Rpb24gY3JlYXRlV2F0Y2hlcygpIHtcclxuICAgIC8vICAgIC8vV2F0Y2ggc2VhcmNoVGV4dCB2YWx1ZSBhbmQgcGFzcyBpdCBhbmQgdGhlIGN1c3RvbWVycyB0byBuYW1lQ2l0eVN0YXRlRmlsdGVyXHJcbiAgICAvLyAgICAvL0RvaW5nIHRoaXMgaW5zdGVhZCBvZiBhZGRpbmcgdGhlIGZpbHRlciB0byBuZy1yZXBlYXQgYWxsb3dzIGl0IHRvIG9ubHkgYmUgcnVuIG9uY2UgKHJhdGhlciB0aGFuIHR3aWNlKVxyXG4gICAgLy8gICAgLy93aGlsZSBhbHNvIGFjY2Vzc2luZyB0aGUgZmlsdGVyZWQgY291bnQgdmlhIHZtLmZpbHRlcmVkQ291bnQgYWJvdmVcclxuXHJcbiAgICAvLyAgICAvL0JldHRlciB0byBoYW5kbGUgdGhpcyB1c2luZyBuZy1jaGFuZ2Ugb24gPGlucHV0Pi4gU2VlIHNlYXJjaFRleHRDaGFuZ2VkKCkgZnVuY3Rpb24uXHJcbiAgICAvLyAgICB2bS4kd2F0Y2goXCJzZWFyY2hUZXh0XCIsIGZ1bmN0aW9uIChmaWx0ZXJUZXh0KSB7XHJcbiAgICAvLyAgICAgICAgZmlsdGVyQ3VzdG9tZXJzKGZpbHRlclRleHQpO1xyXG4gICAgLy8gICAgfSk7XHJcbiAgICAvL31cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDdXN0b21lcnNTdW1tYXJ5KCkge1xyXG4gICAgICBkYXRhU2VydmljZS5nZXRDdXN0b21lcnNTdW1tYXJ5KHZtLmN1cnJlbnRQYWdlIC0gMSwgdm0ucGFnZVNpemUpLnRoZW4oXHJcbiAgICAgICAgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgdm0udG90YWxSZWNvcmRzID0gZGF0YS50b3RhbFJlY29yZHM7XHJcbiAgICAgICAgICB2bS5jdXN0b21lcnMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgICAgICBmaWx0ZXJDdXN0b21lcnMoJycpOyAvL1RyaWdnZXIgaW5pdGlhbCBmaWx0ZXJcclxuXHJcbiAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdm0uY2FyZEFuaW1hdGlvbkNsYXNzID0gJyc7IC8vVHVybiBvZmYgYW5pbWF0aW9uIHNpbmNlIGl0IHdvbid0IGtlZXAgdXAgd2l0aCBmaWx0ZXJpbmdcclxuICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICAgICR3aW5kb3cuYWxlcnQoJ1NvcnJ5LCBhbiBlcnJvciBvY2N1cnJlZDogJyArIGVycm9yLmRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGZpbHRlckN1c3RvbWVycyhmaWx0ZXJUZXh0KSB7XHJcbiAgICAgIHZtLmZpbHRlcmVkQ3VzdG9tZXJzID0gJGZpbHRlcignbmFtZUNpdHlTdGF0ZUZpbHRlcicpKFxyXG4gICAgICAgIHZtLmN1c3RvbWVycyxcclxuICAgICAgICBmaWx0ZXJUZXh0XHJcbiAgICAgICk7XHJcbiAgICAgIHZtLmZpbHRlcmVkQ291bnQgPSB2bS5maWx0ZXJlZEN1c3RvbWVycy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q3VzdG9tZXJCeUlkKGlkKSB7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdm0uY3VzdG9tZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIGN1c3QgPSB2bS5jdXN0b21lcnNbaV07XHJcbiAgICAgICAgaWYgKGN1c3QuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICByZXR1cm4gY3VzdDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpO1xyXG4gIH07XHJcblxyXG4gIEN1c3RvbWVyc0NvbnRyb2xsZXIuJGluamVjdCA9IGluamVjdFBhcmFtcztcclxuXHJcbiAgYW5ndWxhclxyXG4gICAgLm1vZHVsZSgnY3VzdG9tZXJzQXBwJylcclxuICAgIC5jb250cm9sbGVyKCdDdXN0b21lcnNDb250cm9sbGVyJywgQ3VzdG9tZXJzQ29udHJvbGxlcik7XHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIGluamVjdFBhcmFtcyA9IFsnJHNjb3BlJywnJHJvdXRlUGFyYW1zJywgJyR3aW5kb3cnLCAnZGF0YVNlcnZpY2UnXTtcclxuXHJcbiAgICB2YXIgQ3VzdG9tZXJPcmRlcnNDb250cm9sbGVyID0gZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlUGFyYW1zLCAkd2luZG93LCBkYXRhU2VydmljZSkge1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXMsXHJcbiAgICAgICAgICAgIGN1c3RvbWVySWQgPSAoJHJvdXRlUGFyYW1zLmN1c3RvbWVySWQpID8gcGFyc2VJbnQoJHJvdXRlUGFyYW1zLmN1c3RvbWVySWQpIDogMDtcclxuXHJcbiAgICAgICAgdm0uY3VzdG9tZXIgPSB7fTtcclxuICAgICAgICB2bS5vcmRlcnNUb3RhbCA9IDAuMDA7XHJcblxyXG4gICAgICAgIGluaXQoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAgICAgaWYgKGN1c3RvbWVySWQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhU2VydmljZS5nZXRDdXN0b21lcihjdXN0b21lcklkKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm0uY3VzdG9tZXIgPSBjdXN0b21lcjtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgnY3VzdG9tZXInLCBjdXN0b21lcik7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAkd2luZG93LmFsZXJ0KFwiU29ycnksIGFuIGVycm9yIG9jY3VycmVkOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIEN1c3RvbWVyT3JkZXJzQ29udHJvbGxlci4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5jb250cm9sbGVyKCdDdXN0b21lck9yZGVyc0NvbnRyb2xsZXInLCBDdXN0b21lck9yZGVyc0NvbnRyb2xsZXIpO1xyXG5cclxufSgpKTsiLCLvu78oZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBpbmplY3RQYXJhbXMgPSBbJyRzY29wZScsICckbG9jYXRpb24nLCAnJHJvdXRlUGFyYW1zJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyR0aW1lb3V0JywgJ2NvbmZpZycsICdkYXRhU2VydmljZScsICdtb2RhbFNlcnZpY2UnXTtcclxuXHJcbiAgICB2YXIgQ3VzdG9tZXJFZGl0Q29udHJvbGxlciA9IGZ1bmN0aW9uICgkc2NvcGUsICRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQsIGNvbmZpZywgZGF0YVNlcnZpY2UsIG1vZGFsU2VydmljZSkge1xyXG5cclxuICAgICAgICB2YXIgdm0gPSB0aGlzLFxyXG4gICAgICAgICAgICBjdXN0b21lcklkID0gKCRyb3V0ZVBhcmFtcy5jdXN0b21lcklkKSA/IHBhcnNlSW50KCRyb3V0ZVBhcmFtcy5jdXN0b21lcklkKSA6IDAsXHJcbiAgICAgICAgICAgIHRpbWVyLFxyXG4gICAgICAgICAgICBvblJvdXRlQ2hhbmdlT2ZmO1xyXG5cclxuICAgICAgICB2bS5jdXN0b21lciA9IHt9O1xyXG4gICAgICAgIHZtLnN0YXRlcyA9IFtdO1xyXG4gICAgICAgIHZtLnRpdGxlID0gKGN1c3RvbWVySWQgPiAwKSA/ICdFZGl0JyA6ICdBZGQnO1xyXG4gICAgICAgIHZtLmJ1dHRvblRleHQgPSAoY3VzdG9tZXJJZCA+IDApID8gJ1VwZGF0ZScgOiAnQWRkJztcclxuICAgICAgICB2bS51cGRhdGVTdGF0dXMgPSBmYWxzZTtcclxuICAgICAgICB2bS5lcnJvck1lc3NhZ2UgPSAnJztcclxuXHJcbiAgICAgICAgdm0uaXNTdGF0ZVNlbGVjdGVkID0gZnVuY3Rpb24gKGN1c3RvbWVyU3RhdGVJZCwgc3RhdGVJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY3VzdG9tZXJTdGF0ZUlkID09PSBzdGF0ZUlkO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLnNhdmVDdXN0b21lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCRzY29wZS5lZGl0Rm9ybS4kdmFsaWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdm0uY3VzdG9tZXIuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU2VydmljZS5pbnNlcnRDdXN0b21lcih2bS5jdXN0b21lcikudGhlbihwcm9jZXNzU3VjY2VzcywgcHJvY2Vzc0Vycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTZXJ2aWNlLnVwZGF0ZUN1c3RvbWVyKHZtLmN1c3RvbWVyKS50aGVuKHByb2Nlc3NTdWNjZXNzLCBwcm9jZXNzRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdm0uZGVsZXRlQ3VzdG9tZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXN0TmFtZSA9IHZtLmN1c3RvbWVyLmZpcnN0TmFtZSArICcgJyArIHZtLmN1c3RvbWVyLmxhc3ROYW1lO1xyXG4gICAgICAgICAgICB2YXIgbW9kYWxPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgY2xvc2VCdXR0b25UZXh0OiAnQ2FuY2VsJyxcclxuICAgICAgICAgICAgICAgIGFjdGlvbkJ1dHRvblRleHQ6ICdEZWxldGUgQ3VzdG9tZXInLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyVGV4dDogJ0RlbGV0ZSAnICsgY3VzdE5hbWUgKyAnPycsXHJcbiAgICAgICAgICAgICAgICBib2R5VGV4dDogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBjdXN0b21lcj8nXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBtb2RhbFNlcnZpY2Uuc2hvd01vZGFsKHt9LCBtb2RhbE9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ29rJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTZXJ2aWNlLmRlbGV0ZUN1c3RvbWVyKHZtLmN1c3RvbWVyLmlkKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Sb3V0ZUNoYW5nZU9mZigpOyAvL1N0b3AgbGlzdGVuaW5nIGZvciBsb2NhdGlvbiBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvY3VzdG9tZXJzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgcHJvY2Vzc0Vycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuXHJcbiAgICAgICAgICAgIGdldFN0YXRlcygpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1c3RvbWVySWQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNlcnZpY2UuZ2V0Q3VzdG9tZXIoY3VzdG9tZXJJZCkudGhlbihmdW5jdGlvbiAoY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uY3VzdG9tZXIgPSBjdXN0b21lcjtcclxuICAgICAgICAgICAgICAgICAgICB9LCBwcm9jZXNzRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhU2VydmljZS5uZXdDdXN0b21lcigpLnRoZW4oZnVuY3Rpb24gKGN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZtLmN1c3RvbWVyID0gY3VzdG9tZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vTWFrZSBzdXJlIHRoZXkncmUgd2FybmVkIGlmIHRoZXkgbWFkZSBhIGNoYW5nZSBidXQgZGlkbid0IHNhdmUgaXRcclxuICAgICAgICAgICAgLy9DYWxsIHRvICRvbiByZXR1cm5zIGEgXCJkZXJlZ2lzdHJhdGlvblwiIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZCB0b1xyXG4gICAgICAgICAgICAvL3JlbW92ZSB0aGUgbGlzdGVuZXIgKHNlZSByb3V0ZUNoYW5nZSgpIGZvciBhbiBleGFtcGxlIG9mIHVzaW5nIGl0KVxyXG4gICAgICAgICAgICBvblJvdXRlQ2hhbmdlT2ZmID0gJHNjb3BlLiRvbignJGxvY2F0aW9uQ2hhbmdlU3RhcnQnLCByb3V0ZUNoYW5nZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbml0KCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJvdXRlQ2hhbmdlKGV2ZW50LCBuZXdVcmwsIG9sZFVybCkge1xyXG4gICAgICAgICAgICAvL05hdmlnYXRlIHRvIG5ld1VybCBpZiB0aGUgZm9ybSBpc24ndCBkaXJ0eVxyXG4gICAgICAgICAgICBpZiAoIXZtLmVkaXRGb3JtIHx8ICF2bS5lZGl0Rm9ybS4kZGlydHkpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHZhciBtb2RhbE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvblRleHQ6ICdDYW5jZWwnLFxyXG4gICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uVGV4dDogJ0lnbm9yZSBDaGFuZ2VzJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlclRleHQ6ICdVbnNhdmVkIENoYW5nZXMnLFxyXG4gICAgICAgICAgICAgICAgYm9keVRleHQ6ICdZb3UgaGF2ZSB1bnNhdmVkIGNoYW5nZXMuIExlYXZlIHRoZSBwYWdlPydcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIG1vZGFsU2VydmljZS5zaG93TW9kYWwoe30sIG1vZGFsT3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSAnb2snKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25Sb3V0ZUNoYW5nZU9mZigpOyAvL1N0b3AgbGlzdGVuaW5nIGZvciBsb2NhdGlvbiBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJGxvY2F0aW9uLnVybChuZXdVcmwpLmhhc2goKSk7IC8vR28gdG8gcGFnZSB0aGV5J3JlIGludGVyZXN0ZWQgaW5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvL3ByZXZlbnQgbmF2aWdhdGlvbiBieSBkZWZhdWx0IHNpbmNlIHdlJ2xsIGhhbmRsZSBpdFxyXG4gICAgICAgICAgICAvL29uY2UgdGhlIHVzZXIgc2VsZWN0cyBhIGRpYWxvZyBvcHRpb25cclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0U3RhdGVzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YVNlcnZpY2UuZ2V0U3RhdGVzKCkudGhlbihmdW5jdGlvbiAoc3RhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICB2bS5zdGF0ZXMgPSBzdGF0ZXM7XHJcbiAgICAgICAgICAgIH0sIHByb2Nlc3NFcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzU3VjY2VzcygpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmVkaXRGb3JtLiRkaXJ0eSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2bS51cGRhdGVTdGF0dXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB2bS50aXRsZSA9ICdFZGl0JztcclxuICAgICAgICAgICAgdm0uYnV0dG9uVGV4dCA9ICdVcGRhdGUnO1xyXG4gICAgICAgICAgICBzdGFydFRpbWVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBwcm9jZXNzRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICAgICAgdm0uZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgc3RhcnRUaW1lcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3RhcnRUaW1lcigpIHtcclxuICAgICAgICAgICAgdGltZXIgPSAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xyXG4gICAgICAgICAgICAgICAgdm0uZXJyb3JNZXNzYWdlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB2bS51cGRhdGVTdGF0dXMgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBDdXN0b21lckVkaXRDb250cm9sbGVyLiRpbmplY3QgPSBpbmplY3RQYXJhbXM7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbWVyc0FwcCcpLmNvbnRyb2xsZXIoJ0N1c3RvbWVyRWRpdENvbnRyb2xsZXInLCBDdXN0b21lckVkaXRDb250cm9sbGVyKTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgaW5qZWN0UGFyYW1zID0gWyckbW9kYWwnXTtcclxuXHJcbiAgICB2YXIgbW9kYWxTZXJ2aWNlID0gZnVuY3Rpb24gKCRtb2RhbCkge1xyXG5cclxuICAgICAgICB2YXIgbW9kYWxEZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgYmFja2Ryb3A6IHRydWUsXHJcbiAgICAgICAgICAgIGtleWJvYXJkOiB0cnVlLFxyXG4gICAgICAgICAgICBtb2RhbEZhZGU6IHRydWUsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9jdXN0b21lcnNBcHAvcGFydGlhbHMvbW9kYWwuaHRtbCdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgbW9kYWxPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBjbG9zZUJ1dHRvblRleHQ6ICdDbG9zZScsXHJcbiAgICAgICAgICAgIGFjdGlvbkJ1dHRvblRleHQ6ICdPSycsXHJcbiAgICAgICAgICAgIGhlYWRlclRleHQ6ICdQcm9jZWVkPycsXHJcbiAgICAgICAgICAgIGJvZHlUZXh0OiAnUGVyZm9ybSB0aGlzIGFjdGlvbj8nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5zaG93TW9kYWwgPSBmdW5jdGlvbiAoY3VzdG9tTW9kYWxEZWZhdWx0cywgY3VzdG9tTW9kYWxPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmICghY3VzdG9tTW9kYWxEZWZhdWx0cykgY3VzdG9tTW9kYWxEZWZhdWx0cyA9IHt9O1xyXG4gICAgICAgICAgICBjdXN0b21Nb2RhbERlZmF1bHRzLmJhY2tkcm9wID0gJ3N0YXRpYyc7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3coY3VzdG9tTW9kYWxEZWZhdWx0cywgY3VzdG9tTW9kYWxPcHRpb25zKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnNob3cgPSBmdW5jdGlvbiAoY3VzdG9tTW9kYWxEZWZhdWx0cywgY3VzdG9tTW9kYWxPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIC8vQ3JlYXRlIHRlbXAgb2JqZWN0cyB0byB3b3JrIHdpdGggc2luY2Ugd2UncmUgaW4gYSBzaW5nbGV0b24gc2VydmljZVxyXG4gICAgICAgICAgICB2YXIgdGVtcE1vZGFsRGVmYXVsdHMgPSB7fTtcclxuICAgICAgICAgICAgdmFyIHRlbXBNb2RhbE9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIC8vTWFwIGFuZ3VsYXItdWkgbW9kYWwgY3VzdG9tIGRlZmF1bHRzIHRvIG1vZGFsIGRlZmF1bHRzIGRlZmluZWQgaW4gdGhpcyBzZXJ2aWNlXHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHRlbXBNb2RhbERlZmF1bHRzLCBtb2RhbERlZmF1bHRzLCBjdXN0b21Nb2RhbERlZmF1bHRzKTtcclxuXHJcbiAgICAgICAgICAgIC8vTWFwIG1vZGFsLmh0bWwgJHNjb3BlIGN1c3RvbSBwcm9wZXJ0aWVzIHRvIGRlZmF1bHRzIGRlZmluZWQgaW4gdGhpcyBzZXJ2aWNlXHJcbiAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHRlbXBNb2RhbE9wdGlvbnMsIG1vZGFsT3B0aW9ucywgY3VzdG9tTW9kYWxPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGVtcE1vZGFsRGVmYXVsdHMuY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGVtcE1vZGFsRGVmYXVsdHMuY29udHJvbGxlciA9IGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsT3B0aW9ucyA9IHRlbXBNb2RhbE9wdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsT3B0aW9ucy5vayA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1vZGFsSW5zdGFuY2UuY2xvc2UoJ29rJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxPcHRpb25zLmNsb3NlID0gZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkbW9kYWxJbnN0YW5jZS5jbG9zZSgnY2FuY2VsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGVtcE1vZGFsRGVmYXVsdHMuY29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJG1vZGFsSW5zdGFuY2UnXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuICRtb2RhbC5vcGVuKHRlbXBNb2RhbERlZmF1bHRzKS5yZXN1bHQ7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgbW9kYWxTZXJ2aWNlLiRpbmplY3QgPSBpbmplY3RQYXJhbXM7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbWVyc0FwcCcpLnNlcnZpY2UoJ21vZGFsU2VydmljZScsIG1vZGFsU2VydmljZSk7XHJcblxyXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIGluamVjdFBhcmFtcyA9IFsnY29uZmlnJywgJ2N1c3RvbWVyc1NlcnZpY2UnLCAnY3VzdG9tZXJzQnJlZXplU2VydmljZSddO1xyXG5cclxuICAgIHZhciBkYXRhU2VydmljZSA9IGZ1bmN0aW9uIChjb25maWcsIGN1c3RvbWVyc1NlcnZpY2UsIGN1c3RvbWVyc0JyZWV6ZVNlcnZpY2UpIHtcclxuICAgICAgICByZXR1cm4gKGNvbmZpZy51c2VCcmVlemUpID8gY3VzdG9tZXJzQnJlZXplU2VydmljZSA6IGN1c3RvbWVyc1NlcnZpY2U7XHJcbiAgICB9O1xyXG5cclxuICAgIGRhdGFTZXJ2aWNlLiRpbmplY3QgPSBpbmplY3RQYXJhbXM7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbWVyc0FwcCcpLmZhY3RvcnkoJ2RhdGFTZXJ2aWNlJywgZGF0YVNlcnZpY2UpO1xyXG5cclxufSgpKTtcclxuXHJcbiIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIGluamVjdFBhcmFtcyA9IFsnJGh0dHAnLCAnJHEnXTtcclxuXHJcbiAgICB2YXIgY3VzdG9tZXJzRmFjdG9yeSA9IGZ1bmN0aW9uICgkaHR0cCwgJHEpIHtcclxuICAgICAgICB2YXIgc2VydmljZUJhc2UgPSAnL2FwaS9kYXRhc2VydmljZS8nLFxyXG4gICAgICAgICAgICBmYWN0b3J5ID0ge307XHJcblxyXG4gICAgICAgIGZhY3RvcnkuZ2V0Q3VzdG9tZXJzID0gZnVuY3Rpb24gKHBhZ2VJbmRleCwgcGFnZVNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldFBhZ2VkUmVzb3VyY2UoJ2N1c3RvbWVycycsIHBhZ2VJbmRleCwgcGFnZVNpemUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZhY3RvcnkuZ2V0Q3VzdG9tZXJzU3VtbWFyeSA9IGZ1bmN0aW9uIChwYWdlSW5kZXgsIHBhZ2VTaXplKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRQYWdlZFJlc291cmNlKCdjdXN0b21lcnNTdW1tYXJ5JywgcGFnZUluZGV4LCBwYWdlU2l6ZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS5nZXRTdGF0ZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoc2VydmljZUJhc2UgKyAnc3RhdGVzJykudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHMuZGF0YTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZhY3RvcnkuY2hlY2tVbmlxdWVWYWx1ZSA9IGZ1bmN0aW9uIChpZCwgcHJvcGVydHksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICghaWQpIGlkID0gMDtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldChzZXJ2aWNlQmFzZSArICdjaGVja1VuaXF1ZS8nICsgaWQgKyAnP3Byb3BlcnR5PScgKyBwcm9wZXJ0eSArICcmdmFsdWU9JyArIGVzY2FwZSh2YWx1ZSkpLnRoZW4oXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzLmRhdGEuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS5pbnNlcnRDdXN0b21lciA9IGZ1bmN0aW9uIChjdXN0b21lcikge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChzZXJ2aWNlQmFzZSArICdwb3N0Q3VzdG9tZXInLCBjdXN0b21lcikudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xyXG4gICAgICAgICAgICAgICAgY3VzdG9tZXIuaWQgPSByZXN1bHRzLmRhdGEuaWQ7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cy5kYXRhO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5Lm5ld0N1c3RvbWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEud2hlbih7aWQ6IDB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LnVwZGF0ZUN1c3RvbWVyID0gZnVuY3Rpb24gKGN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoc2VydmljZUJhc2UgKyAncHV0Q3VzdG9tZXIvJyArIGN1c3RvbWVyLmlkLCBjdXN0b21lcikudGhlbihmdW5jdGlvbiAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdHVzLmRhdGE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZhY3RvcnkuZGVsZXRlQ3VzdG9tZXIgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZShzZXJ2aWNlQmFzZSArICdkZWxldGVDdXN0b21lci8nICsgaWQpLnRoZW4oZnVuY3Rpb24gKHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXR1cy5kYXRhO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LmdldEN1c3RvbWVyID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgIC8vdGhlbiBkb2VzIG5vdCB1bndyYXAgZGF0YSBzbyBtdXN0IGdvIHRocm91Z2ggLmRhdGEgcHJvcGVydHlcclxuICAgICAgICAgICAgLy9zdWNjZXNzIHVud3JhcHMgZGF0YSBhdXRvbWF0aWNhbGx5IChubyBuZWVkIHRvIGNhbGwgLmRhdGEgcHJvcGVydHkpXHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoc2VydmljZUJhc2UgKyAnY3VzdG9tZXJCeUlkLycgKyBpZCkudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xyXG4gICAgICAgICAgICAgICAgZXh0ZW5kQ3VzdG9tZXJzKFtyZXN1bHRzLmRhdGFdKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzLmRhdGE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGV4dGVuZEN1c3RvbWVycyhjdXN0b21lcnMpIHtcclxuICAgICAgICAgICAgdmFyIGN1c3RzTGVuID0gY3VzdG9tZXJzLmxlbmd0aDtcclxuICAgICAgICAgICAgLy9JdGVyYXRlIHRocm91Z2ggY3VzdG9tZXJzXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VzdHNMZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1c3QgPSBjdXN0b21lcnNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1c3Qub3JkZXJzKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgb3JkZXJzTGVuID0gY3VzdC5vcmRlcnMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvcmRlcnNMZW47IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmRlciA9IGN1c3Qub3JkZXJzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIG9yZGVyLm9yZGVyVG90YWwgPSBvcmRlci5xdWFudGl0eSAqIG9yZGVyLnByaWNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY3VzdC5vcmRlcnNUb3RhbCA9IG9yZGVyc1RvdGFsKGN1c3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRQYWdlZFJlc291cmNlKGJhc2VSZXNvdXJjZSwgcGFnZUluZGV4LCBwYWdlU2l6ZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2UgPSBiYXNlUmVzb3VyY2U7XHJcbiAgICAgICAgICAgIHJlc291cmNlICs9IChhcmd1bWVudHMubGVuZ3RoID09IDMpID8gYnVpbGRQYWdpbmdVcmkocGFnZUluZGV4LCBwYWdlU2l6ZSkgOiAnJztcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldChzZXJ2aWNlQmFzZSArIHJlc291cmNlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1c3RzID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgICAgICAgIGV4dGVuZEN1c3RvbWVycyhjdXN0cyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsUmVjb3JkczogcGFyc2VJbnQocmVzcG9uc2UuaGVhZGVycygnWC1JbmxpbmVDb3VudCcpKSxcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiBjdXN0c1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBidWlsZFBhZ2luZ1VyaShwYWdlSW5kZXgsIHBhZ2VTaXplKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmkgPSAnPyR0b3A9JyArIHBhZ2VTaXplICsgJyYkc2tpcD0nICsgKHBhZ2VJbmRleCAqIHBhZ2VTaXplKTtcclxuICAgICAgICAgICAgcmV0dXJuIHVyaTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlzIHRoaXMgc3RpbGwgdXNlZD8/P1xyXG4gICAgICAgIGZ1bmN0aW9uIG9yZGVyVG90YWwob3JkZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9yZGVyLnF1YW50aXR5ICogb3JkZXIucHJpY2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb3JkZXJzVG90YWwoY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsID0gMDtcclxuICAgICAgICAgICAgdmFyIG9yZGVycyA9IGN1c3RvbWVyLm9yZGVycztcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gb3JkZXJzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdG90YWwgKz0gb3JkZXJzW2ldLm9yZGVyVG90YWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBmYWN0b3J5O1xyXG4gICAgfTtcclxuXHJcbiAgICBjdXN0b21lcnNGYWN0b3J5LiRpbmplY3QgPSBpbmplY3RQYXJhbXM7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbWVyc0FwcCcpLmZhY3RvcnkoJ2N1c3RvbWVyc1NlcnZpY2UnLCBjdXN0b21lcnNGYWN0b3J5KTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgaW5qZWN0UGFyYW1zID0gWydicmVlemUnLCAnJHEnLCAnJHdpbmRvdyddO1xyXG5cclxuICAgIHZhciBjdXN0b21lcnNCcmVlemVTZXJ2aWNlID0gZnVuY3Rpb24gKGJyZWV6ZSwgJHEsICR3aW5kb3cpIHtcclxuXHJcbiAgICAgICAgdmFyIGZhY3RvcnkgPSB7fTtcclxuICAgICAgICB2YXIgRW50aXR5UXVlcnkgPSBicmVlemUuRW50aXR5UXVlcnk7XHJcblxyXG4gICAgICAgIC8vIGNvbmZpZ3VyZSB0byB1c2UgdGhlIG1vZGVsIGxpYnJhcnkgZm9yIEFuZ3VsYXJcclxuICAgICAgICBicmVlemUuY29uZmlnLmluaXRpYWxpemVBZGFwdGVySW5zdGFuY2UoJ21vZGVsTGlicmFyeScsICdiYWNraW5nU3RvcmUnLCB0cnVlKTtcclxuICAgICAgICAvLyBjb25maWd1cmUgdG8gdXNlIGNhbWVsQ2FzZVxyXG4gICAgICAgIGJyZWV6ZS5OYW1pbmdDb252ZW50aW9uLmNhbWVsQ2FzZS5zZXRBc0RlZmF1bHQoKTtcclxuICAgICAgICAvLyBjcmVhdGUgZW50aXR5IE1hbmFnZXJcclxuICAgICAgICB2YXIgc2VydmljZU5hbWUgPSAnYnJlZXplL2JyZWV6ZWRhdGFzZXJ2aWNlJztcclxuICAgICAgICB2YXIgZW50aXR5TWFuYWdlciA9IG5ldyBicmVlemUuRW50aXR5TWFuYWdlcihzZXJ2aWNlTmFtZSk7XHJcblxyXG4gICAgICAgIGZhY3RvcnkuZ2V0Q3VzdG9tZXJzID0gZnVuY3Rpb24gKHBhZ2VJbmRleCwgcGFnZVNpemUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldFBhZ2VkUmVzb3VyY2UoJ0N1c3RvbWVycycsICdvcmRlcnMnLCBwYWdlSW5kZXgsIHBhZ2VTaXplKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LmdldEN1c3RvbWVyc1N1bW1hcnkgPSBmdW5jdGlvbiAocGFnZUluZGV4LCBwYWdlU2l6ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0UGFnZWRSZXNvdXJjZSgnQ3VzdG9tZXJzU3VtbWFyeScsICcnLCBwYWdlSW5kZXgsIHBhZ2VTaXplKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LmdldFN0YXRlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldEFsbCgnU3RhdGVzJyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS5nZXRDdXN0b21lciA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnkgPSBFbnRpdHlRdWVyeVxyXG4gICAgICAgICAgICAgICAgLmZyb20oJ0N1c3RvbWVycycpXHJcbiAgICAgICAgICAgICAgICAud2hlcmUoJ2lkJywgJz09JywgaWQpXHJcbiAgICAgICAgICAgICAgICAuZXhwYW5kKCdvcmRlcnMsIHN0YXRlJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBleGVjdXRlUXVlcnkocXVlcnksIHRydWUpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZhY3RvcnkuY2hlY2tVbmlxdWVWYWx1ZSA9IGZ1bmN0aW9uIChpZCwgcHJvcGVydHksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eVByZWRpY2F0ZSA9IG5ldyBicmVlemUuUHJlZGljYXRlKHByb3BlcnR5LCBcIj09XCIsIHZhbHVlKTtcclxuICAgICAgICAgICAgdmFyIHByZWRpY2F0ZSA9IChpZCkgPyBwcm9wZXJ0eVByZWRpY2F0ZS5hbmQobmV3IGJyZWV6ZS5QcmVkaWNhdGUoXCJpZFwiLCBcIiE9XCIsIGlkKSkgOiBwcm9wZXJ0eVByZWRpY2F0ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IEVudGl0eVF1ZXJ5LmZyb20oJ0N1c3RvbWVycycpLndoZXJlKHByZWRpY2F0ZSkudGFrZSgwKS5pbmxpbmVDb3VudCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5LnVzaW5nKGVudGl0eU1hbmFnZXIpLmV4ZWN1dGUoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKGRhdGEgJiYgZGF0YS5pbmxpbmVDb3VudCA9PSAwKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS5pbnNlcnRDdXN0b21lciA9IGZ1bmN0aW9uIChjdXN0b21lcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZW50aXR5TWFuYWdlci5zYXZlQ2hhbmdlcygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZhY3RvcnkubmV3Q3VzdG9tZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRNZXRhZGF0YSgpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudGl0eU1hbmFnZXIuY3JlYXRlRW50aXR5KCdDdXN0b21lcicsIHsgZmlyc3ROYW1lOiAnJywgbGFzdE5hbWU6ICcnIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LmRlbGV0ZUN1c3RvbWVyID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgICAgICAgICR3aW5kb3cuYWxlcnQoJ0lEIHdhcyBudWxsIC0gY2Fubm90IGRlbGV0ZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGN1c3RvbWVyID0gZW50aXR5TWFuYWdlci5nZXRFbnRpdHlCeUtleSgnQ3VzdG9tZXInLCBpZCk7XHJcblxyXG4gICAgICAgICAgICAvKiAgV2hlbiB0aGUgY3VzdG9tZXIgaXMgZGVsZXRlZCB0aGUgY3VzdG9tZXJJRCBpcyBzZXQgdG8gMCBmb3IgZWFjaCBvcmRlclxyXG4gICAgICAgICAgICAgICAgc2luY2Ugbm8gcGFyZW50IGV4aXN0c1xyXG4gICAgICAgICAgICAgICAgRGV0YWNoIG9yZGVycyBzaW5jZSB0aGUgY3VzdG9tZXIgaXMgYmVpbmcgZGVsZXRlZCBhbmQgc2VydmVyXHJcbiAgICAgICAgICAgICAgICBpcyBzZXQgdG8gY2FzY2FkZSBkZWxldGVzXHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGlmIChjdXN0b21lcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9yZGVycyA9IGN1c3RvbWVyLm9yZGVycy5zbGljZSgpOyAvL0NyZWF0ZSBhIGNvcHkgb2YgdGhlIGxpdmUgbGlzdFxyXG4gICAgICAgICAgICAgICAgb3JkZXJzLmZvckVhY2goZnVuY3Rpb24gKG9yZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50aXR5TWFuYWdlci5kZXRhY2hFbnRpdHkob3JkZXIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21lci5lbnRpdHlBc3BlY3Quc2V0RGVsZXRlZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy9SZWFsbHkgYSBDdXN0b21lclN1bW1hcnkgc28gd2UncmUgZ29pbmcgdG8gYWRkIGEgbmV3IEN1c3RvbWVyIFxyXG4gICAgICAgICAgICAgICAgLy9hbmQgbWFyayBpdCBhcyBkZWxldGVkLiBUaGF0IGFsbG93cyB1cyB0byBzYXZlIHNvbWUgY29kZSBhbmQgYXZvaWQgaGF2aW5nXHJcbiAgICAgICAgICAgICAgICAvL2Egc2VwYXJhdGUgbWV0aG9kIHRvIGRlYWwgd2l0aCB0aGUgQ3VzdG9tZXJTdW1tYXJ5IHByb2plY3Rpb25cclxuICAgICAgICAgICAgICAgIGN1c3RvbWVyID0gZW50aXR5TWFuYWdlci5jcmVhdGVFbnRpdHkoJ0N1c3RvbWVyJywgeyBpZDogaWQsIGdlbmRlcjogJ01hbGUnIH0sIGJyZWV6ZS5FbnRpdHlTdGF0ZS5EZWxldGVkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVudGl0eU1hbmFnZXIuc2F2ZUNoYW5nZXMoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LnVwZGF0ZUN1c3RvbWVyID0gZnVuY3Rpb24gKGN1c3RvbWVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHlNYW5hZ2VyLnNhdmVDaGFuZ2VzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXhlY3V0ZVF1ZXJ5KHF1ZXJ5LCB0YWtlRmlyc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5LnVzaW5nKGVudGl0eU1hbmFnZXIpLmV4ZWN1dGUoKS50aGVuKHF1ZXJ5U3VjY2VzcywgcXVlcnlFcnJvcik7XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBxdWVyeVN1Y2Nlc3MoZGF0YSwgc3RhdHVzLCBoZWFkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFrZUZpcnN0ID8gZGF0YS5yZXN1bHRzWzBdIDogZGF0YS5yZXN1bHRzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBxdWVyeUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAkd2luZG93LmFsZXJ0KGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRBbGwoZW50aXR5TmFtZSwgZXhwYW5kKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IEVudGl0eVF1ZXJ5LmZyb20oZW50aXR5TmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChleHBhbmQpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXhwYW5kKGV4cGFuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVRdWVyeShxdWVyeSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRNZXRhZGF0YSgpIHtcclxuICAgICAgICAgICAgdmFyIHN0b3JlID0gZW50aXR5TWFuYWdlci5tZXRhZGF0YVN0b3JlO1xyXG4gICAgICAgICAgICBpZiAoc3RvcmUuaGFzTWV0YWRhdGFGb3Ioc2VydmljZU5hbWUpKSB7IC8vSGF2ZSBtZXRhZGF0YVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLndoZW4odHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7IC8vR2V0IG1ldGFkYXRhXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZmV0Y2hNZXRhZGF0YShzZXJ2aWNlTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFBhZ2VkUmVzb3VyY2UoZW50aXR5TmFtZSwgZXhwYW5kLCBwYWdlSW5kZXgsIHBhZ2VTaXplKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeSA9IEVudGl0eVF1ZXJ5XHJcbiAgICAgICAgICAgIC5mcm9tKGVudGl0eU5hbWUpXHJcbiAgICAgICAgICAgIC5za2lwKHBhZ2VJbmRleCAqIHBhZ2VTaXplKVxyXG4gICAgICAgICAgICAudGFrZShwYWdlU2l6ZSlcclxuICAgICAgICAgICAgLmlubGluZUNvdW50KHRydWUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4cGFuZCAmJiBleHBhbmQgIT0gJycpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnkuZXhwYW5kKGV4cGFuZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vTm90IGNhbGxpbmcgdGhlIHJlLXVzZWFibGUgZXhlY3V0ZVF1ZXJ5KCkgZnVuY3Rpb24gaGVyZSBzaW5jZSB3ZSBuZWVkIHRvIGdldCB0byBtb3JlIGRldGFpbHNcclxuICAgICAgICAgICAgLy9hbmQgcmV0dXJuIGEgY3VzdG9tIG9iamVjdFxyXG4gICAgICAgICAgICByZXR1cm4gcXVlcnkudXNpbmcoZW50aXR5TWFuYWdlcikuZXhlY3V0ZSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxSZWNvcmRzOiBwYXJzZUludChkYXRhLmlubGluZUNvdW50KSxcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiBkYXRhLnJlc3VsdHNcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgJHdpbmRvdy5hbGVydCgnRXJyb3IgJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBPcmRlckN0b3IgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb3JkZXJJbml0KG9yZGVyKSB7XHJcbiAgICAgICAgICAgIG9yZGVyLm9yZGVyVG90YWwgPSBvcmRlci5xdWFudGl0eSAqIG9yZGVyLnByaWNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIEN1c3RvbWVyQ3RvciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjdXN0b21lckluaXQoY3VzdG9tZXIpIHtcclxuICAgICAgICAgICAgY3VzdG9tZXIub3JkZXJzVG90YWwgPSBvcmRlcnNUb3RhbChjdXN0b21lcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvcmRlcnNUb3RhbChjdXN0b21lcikge1xyXG4gICAgICAgICAgICB2YXIgdG90YWwgPSAwO1xyXG4gICAgICAgICAgICB2YXIgb3JkZXJzID0gY3VzdG9tZXIub3JkZXJzO1xyXG4gICAgICAgICAgICB2YXIgY291bnQgPSBvcmRlcnMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbCArPSBvcmRlcnNbaV0ub3JkZXJUb3RhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZW50aXR5TWFuYWdlci5tZXRhZGF0YVN0b3JlLnJlZ2lzdGVyRW50aXR5VHlwZUN0b3IoJ09yZGVyJywgT3JkZXJDdG9yLCBvcmRlckluaXQpO1xyXG4gICAgICAgIGVudGl0eU1hbmFnZXIubWV0YWRhdGFTdG9yZS5yZWdpc3RlckVudGl0eVR5cGVDdG9yKCdDdXN0b21lcicsIEN1c3RvbWVyQ3RvciwgY3VzdG9tZXJJbml0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XHJcbiAgICB9O1xyXG5cclxuICAgIGN1c3RvbWVyc0JyZWV6ZVNlcnZpY2UuJGluamVjdCA9IGluamVjdFBhcmFtcztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnY3VzdG9tZXJzQXBwJylcclxuICAgICAgICAuZmFjdG9yeSgnY3VzdG9tZXJzQnJlZXplU2VydmljZScsIGN1c3RvbWVyc0JyZWV6ZVNlcnZpY2UpO1xyXG5cclxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKVxyXG4gICAgICAgIC5jb25maWcoWyckaHR0cFByb3ZpZGVyJywgZnVuY3Rpb24gKCRodHRwUHJvdmlkZXIpIHtcclxuXHJcbiAgICAgICAgdmFyIGluamVjdFBhcmFtcyA9IFsnJHEnLCAnJHJvb3RTY29wZSddO1xyXG5cclxuICAgICAgICB2YXIgaHR0cEludGVyY2VwdG9yNDAxID0gZnVuY3Rpb24gKCRxLCAkcm9vdFNjb3BlKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIGVycm9yID0gZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vUmFpc2UgZXZlbnQgc28gbGlzdGVuZXIgKG5hdmJhckNvbnRyb2xsZXIpIGNhbiBhY3Qgb24gaXRcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3JlZGlyZWN0VG9Mb2dpbicsIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAocHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihzdWNjZXNzLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGh0dHBJbnRlcmNlcHRvcjQwMS4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgICAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKGh0dHBJbnRlcmNlcHRvcjQwMSk7XHJcblxyXG4gICAgfV0pO1xyXG5cclxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBpbmplY3RQYXJhbXMgPSBbJyRodHRwJywgJyRyb290U2NvcGUnXTtcclxuXHJcbiAgICB2YXIgYXV0aEZhY3RvcnkgPSBmdW5jdGlvbiAoJGh0dHAsICRyb290U2NvcGUpIHtcclxuICAgICAgICB2YXIgc2VydmljZUJhc2UgPSAnL2FwaS9kYXRhc2VydmljZS8nLFxyXG4gICAgICAgICAgICBmYWN0b3J5ID0ge1xyXG4gICAgICAgICAgICAgICAgbG9naW5QYXRoOiAnL2xvZ2luJyxcclxuICAgICAgICAgICAgICAgIHVzZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvbGVzOiBudWxsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIGZhY3RvcnkubG9naW4gPSBmdW5jdGlvbiAoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KHNlcnZpY2VCYXNlICsgJ2xvZ2luJywgeyB1c2VyTG9naW46IHsgdXNlck5hbWU6IGVtYWlsLCBwYXNzd29yZDogcGFzc3dvcmQgfSB9KS50aGVuKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbG9nZ2VkSW4gPSByZXN1bHRzLmRhdGEuc3RhdHVzOztcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VBdXRoKGxvZ2dlZEluKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9nZ2VkSW47XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmYWN0b3J5LmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3Qoc2VydmljZUJhc2UgKyAnbG9nb3V0JykudGhlbihcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ2dlZEluID0gIXJlc3VsdHMuZGF0YS5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlQXV0aChsb2dnZWRJbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvZ2dlZEluO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmFjdG9yeS5yZWRpcmVjdFRvTG9naW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgncmVkaXJlY3RUb0xvZ2luJywgbnVsbCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2hhbmdlQXV0aChsb2dnZWRJbikge1xyXG4gICAgICAgICAgICBmYWN0b3J5LnVzZXIuaXNBdXRoZW50aWNhdGVkID0gbG9nZ2VkSW47XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbG9naW5TdGF0dXNDaGFuZ2VkJywgbG9nZ2VkSW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XHJcbiAgICB9O1xyXG5cclxuICAgIGF1dGhGYWN0b3J5LiRpbmplY3QgPSBpbmplY3RQYXJhbXM7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbWVyc0FwcCcpLmZhY3RvcnkoJ2F1dGhTZXJ2aWNlJywgYXV0aEZhY3RvcnkpO1xyXG5cclxufSgpKTtcclxuXHJcbiIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIHZhbHVlID0ge1xyXG4gICAgICAgIHVzZUJyZWV6ZTogZmFsc2VcclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbWVyc0FwcCcpLnZhbHVlKCdjb25maWcnLCB2YWx1ZSk7XHJcblxyXG59KCkpOyIsIihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIG5hbWVQcm9kdWN0RmlsdGVyID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBtYXRjaGVzUHJvZHVjdChjdXN0b21lciwgZmlsdGVyVmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKGN1c3RvbWVyLm9yZGVycykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXN0b21lci5vcmRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tZXIub3JkZXJzW2ldLnByb2R1Y3QudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlclZhbHVlKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGN1c3RvbWVycywgZmlsdGVyVmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKCFmaWx0ZXJWYWx1ZSB8fCAhY3VzdG9tZXJzKSByZXR1cm4gY3VzdG9tZXJzO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBbXTtcclxuICAgICAgICAgICAgZmlsdGVyVmFsdWUgPSBmaWx0ZXJWYWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGN1c3RvbWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1c3QgPSBjdXN0b21lcnNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VzdC5maXJzdE5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlclZhbHVlKSA+IC0xIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdC5sYXN0TmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyVmFsdWUpID4gLTEgfHxcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVzUHJvZHVjdChjdXN0LCBmaWx0ZXJWYWx1ZSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGN1c3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5maWx0ZXIoJ25hbWVQcm9kdWN0RmlsdGVyJywgbmFtZVByb2R1Y3RGaWx0ZXIpO1xyXG5cclxufSgpKTsiLCIoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBuYW1lQ2l0eVN0YXRlRmlsdGVyID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGN1c3RvbWVycywgZmlsdGVyVmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKCFmaWx0ZXJWYWx1ZSkgcmV0dXJuIGN1c3RvbWVycztcclxuXHJcbiAgICAgICAgICAgIHZhciBtYXRjaGVzID0gW107XHJcbiAgICAgICAgICAgIGZpbHRlclZhbHVlID0gZmlsdGVyVmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXN0b21lcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjdXN0ID0gY3VzdG9tZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1c3QuZmlyc3ROYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXJWYWx1ZSkgPiAtMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGN1c3QubGFzdE5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKGZpbHRlclZhbHVlKSA+IC0xIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdC5jaXR5LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihmaWx0ZXJWYWx1ZSkgPiAtMSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGN1c3Quc3RhdGUubmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyVmFsdWUpID4gLTEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGN1c3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5maWx0ZXIoJ25hbWVDaXR5U3RhdGVGaWx0ZXInLCBuYW1lQ2l0eVN0YXRlRmlsdGVyKTtcclxuXHJcbn0oKSk7IiwiKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgaW5qZWN0UGFyYW1zID0gWyckcScsICdkYXRhU2VydmljZSddO1xyXG5cclxuICAgIHZhciB3Y1VuaXF1ZURpcmVjdGl2ZSA9IGZ1bmN0aW9uICgkcSwgZGF0YVNlcnZpY2UpIHtcclxuXHJcbiAgICAgICAgdmFyIGxpbmsgPSBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XHJcbiAgICAgICAgICAgIG5nTW9kZWwuJGFzeW5jVmFsaWRhdG9ycy51bmlxdWUgPSBmdW5jdGlvbiAobW9kZWxWYWx1ZSwgdmlld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IG1vZGVsVmFsdWUgfHwgdmlld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGF0dHJzLndjVW5pcXVlS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5ID0gYXR0cnMud2NVbmlxdWVQcm9wZXJ0eTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL0ZpcnN0IHRpbWUgdGhlIGFzeW5jVmFsaWRhdG9ycyBmdW5jdGlvbiBpcyBsb2FkZWQgdGhlXHJcbiAgICAgICAgICAgICAgICAvL2tleSB3b24ndCBiZSBzZXQgIHNvIGVuc3VyZSB0aGF0IHdlIGhhdmUgXHJcbiAgICAgICAgICAgICAgICAvL2tleSBhbmQgcHJvcGVydHlOYW1lIGJlZm9yZSBjaGVja2luZyB3aXRoIHRoZSBzZXJ2ZXIgXHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICYmIHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVNlcnZpY2UuY2hlY2tVbmlxdWVWYWx1ZShrZXksIHByb3BlcnR5LCBjdXJyZW50VmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVuaXF1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5pcXVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7IC8vSXQncyB1bmlxdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpOyAvL0FkZCB1bmlxdWUgdG8gJGVycm9yc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEud2hlbih0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgICAgICAgIGxpbms6IGxpbmtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICB3Y1VuaXF1ZURpcmVjdGl2ZS4kaW5qZWN0ID0gaW5qZWN0UGFyYW1zO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdjdXN0b21lcnNBcHAnKS5kaXJlY3RpdmUoJ3djVW5pcXVlJywgd2NVbmlxdWVEaXJlY3RpdmUpO1xyXG5cclxufSgpKTsiLCIoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIHdjQW5pbWF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZHVyYXRpb24gPSAwLjU7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZW50ZXI6IGZ1bmN0aW9uIChlbGVtZW50LCBkb25lKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmFuZG9tID0gTWF0aC5yYW5kb20oKSAqIDEwMDtcclxuICAgICAgICAgICAgICAgIFR3ZWVuTWF4LnNldChlbGVtZW50LCB7IG9wYWNpdHk6IDAsIGxlZnQ6IHJhbmRvbSArICdweCcgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJhbmRvbTIgPSBNYXRoLnJhbmRvbSgpO1xyXG4gICAgICAgICAgICAgICAgVHdlZW5NYXgudG8oZWxlbWVudCwgZHVyYXRpb24sIHsgb3BhY2l0eTogMSwgbGVmdDogJzBweCcsIGVhc2U6IEJhY2suZWFzZUluT3V0LCBkZWxheTogcmFuZG9tMiwgb25Db21wbGV0ZTogZG9uZSB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbGVhdmU6IGZ1bmN0aW9uIChlbGVtZW50LCBkb25lKSB7XHJcbiAgICAgICAgICAgICAgICBUd2Vlbk1heC50byhlbGVtZW50LCBkdXJhdGlvbiwgeyBvcGFjaXR5OiAwLCBsZWZ0OiAnLTUwcHgnLCBvbkNvbXBsZXRlOiBkb25lIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2N1c3RvbWVyc0FwcCcpLmFuaW1hdGlvbignLmNhcmQtYW5pbWF0aW9uJywgd2NBbmltYXRpb25zKTtcclxuXHJcbn0oKSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=